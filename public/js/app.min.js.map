{"version":3,"sources":["helpers.js","init.js","options.js","layout.js","tripwire.js","global-hooks.js","systemAnalysis.js","favourite.js","invasions.js","guidance.js","systemRendering.js","chain-map-renderer-orgchart.js","chain-map-renderer-radial.js","chain-map.js","active.js","addSignature.js","api.js","automapper.js","comments.js","deleteSignature.js","editSignature.js","esi.js","eve.js","parse.js","paste.js","redo.js","serverStatus.js","sync.js","systemChange.js","tutorials.js","undo.js","activity-graph.js","ckeditor.js","dialogs/admin-dialog.js","dialogs/base-dialog.js","dialogs/options-dialog.js","dialogs/ping-dialog.js","dialogs/signature-delete-dialog.js","dialogs/signature-dialog.js"],"names":["Object","sort","obj","prop","swapped","prev","i","Number","tmp","index","val","cs","key","toLowerCase","find","maxTime","maxTimeString","Date","time","dates","push","length","getTime","$","fn","serializeObject","self","this","json","push_counters","patterns","validate","fixed","named","build","base","value","push_counter","undefined","each","serializeArray","test","name","k","keys","match","merge","reverse_key","pop","replace","RegExp","extend","jQuery","letterToNumbers","string","toUpperCase","letters","sum","Math","pow","indexOf","substr","sigFormat","input","type","alpha","numeric","format","options","chain","typeFormat","classFormat","x","l","positionRelativeTo","elem","ancestor","elemPos","getBoundingClientRect","ancestorPos","left","scrollLeft","top","scrollTop","lookupMultiple","map","propertyName","lookupString","suppress","values","split","results","v","r","join","getCookie","c_name","c_value","document","cookie","c_start","c_end","unescape","substring","setCookie","exdays","exdate","setDate","getDate","escape","toUTCString","location","protocol","originalAddClassMethod","addClass","originalRemoveClassMethod","removeClass","className","result","apply","arguments","trigger","findSystemID","systemName","appData","systems","viewingSystem","attr","viewingSystemID","server","app_name","version","html","window","stop","saveTimer","localOverrides","localOptions","JSON","parse","localStorage","getItem","userID","init","character","id","characterID","characterName","background","uiscale","favorites","grid","tracking","active","masks","corporationID","gridlines","tabs","node-reference","zoom","sigNameLocation","routingLimit","routeSecurity","routeIgnore","enabled","renderer","signatures","editType","copySeparator","pasteLife","alignment","sigID","sigType","sigAge","leadsTo","sigLife","sigMass","buttons","follow","chainWidget","viewing","signaturesWidget","autoMapper","saveDelay","delay","clearTimeout","setTimeout","save","stringify","get","setItem","ajax","url","data","mode","dataType","load","set","local","constructor","reset","defaults","hasOwnProperty","oog","data-col","col","data-row","row","data-sizex","size_x","data-sizey","size_y","css","width","height","favorite","parseInt","home","kspace","evescout","inArray","a","href","hostname","pathname","search","filter","$tab","clone","systemID","append","guidance","clearCache","redraw","gridster","widget_selector","avoid_overlapped_widgets","widget_base_dimensions","widget_margins","autogrow_cols","helper","draggable","start","e","ui","resize","handle_class","max_size","min_size","$widget","serialize_params","$w","wgd","disable","disable_resize","visibility","click","hasClass","serialize","enable","enable_resize","tripwire","timer","xhr","client","wormholes","list","undo","sessionStorage","redo","serverSignatureCount","activity","esi","refreshRate","connected","ageFormat","instance","_this","sync","setAgeFormat","countdown","serverTime","chainMap","draw","pastEOL","since","layout","whTooltip","sig","item","tooltip","sig2Type","whType","Intl","NumberFormat","mass","jump","ageTooltip","date","lifeTime","getMonth","getHours","getMinutes","createdByName","modifiedTime","modifiedByName","refresh","successCallback","alwaysCallback","getSystemIDsByNames","systemNames","on","preventDefault","system","systemChange","parseFloat","originalEvent","wheelDelta","fadeIn","timeout","keydown","activeElement","is","metaKey","ctrlKey","keyCode","getSelection","toString","output","signature","signatureID","wormhole","initialID","secondaryID","otherSignature","aSigSystems","life","lifeLength","lifeLeft","text","focus","select","Notify","splice","target","getElementById","style","display","innerHTML","f","systemInfo","systemAnalysis","analyse","systemRendering","renderEffect","systemTypeClass","systemTypeName","toggle","EVE","show","hide","characters","removeAttr","remove","isArray","delete","esiDelete","stopPropagation","content","color","stick","jBox","offset","y","animation","autoClose","ValidationTooltips","fade","Tooltips","attach","getContent","position","outside","SystemActivityToolTips","appendTo","reposition","repositionOnOpen","createOnInit","onOpen","targetPos","tooltipWidth","source","closest","container","parent","offsetHeight","WormholeRouteToolTips","WormholeTypeToolTips","adjustDistance","responsiveWidth","OccupiedToolTips","pointer","minWidth","repositionOnContent","offsetWidth","setContent","cache","done","occupants","chars","b","shipTypeName","formatSignatureID","linkSig","sigName","sortable","items","axis","tolerance","containment","update","newTabs","setActiveTab","dialog","Remove Tab","Cancel","resizable","minHeight","dialogClass","OK","submit","open","close","create","inlinecomplete","maxSize","thera","checked","eq","contextmenu","delegate","menu","event","my","at","of","children","colName","cmd","beforeOpen","effect","duration","nodeElem","showInfo","setDestination","collapsed","collapse","existingTabIndex","newTab","wormholeID","class","existingTab","autoOpen","Close","payload","jumps","totalMass","jumpMass","shipTypeID","toID","typeName","moogle","prototype","setFlare","flare","flares","removeFlare","widget","autocomplete","_create","element","_selectInit","_super","_value","originalReturn","_superApply","change","_suggest","_initSource","request","response","matcher","escapeRegex","term","Array","_close","input_source","addToSelect","select_added_value","select_source","unshift","removeFromSelect","wrapper","trim","toArray","_createShowAllButton","that","wasOpen","button","icons","primary","_search","tablesorter","sortReset","widgets","textExtraction","2","node","toggleClass","shiftKey","nextUntil","addBack","add","Ok","easing","mutators","addMutator","m","leadsToPointer","nodeClass","nodeSecurity","nodeFaction","security","factionID","getDummySystem","assign","baseSecurity","pathSymbol","systemTypeModifiers","forEach","mutate","effectClass","mutator_favourite","_FavouriteMutator","invasions","_Invasions","pathSymbolMap","stellar_reconnaissance","triglavian_minor_victory","escalating_liminality","final_liminality","edencom_minor_victory","redoubt","bulwark","fortress","textMap","_","keyBy","system_id","status","derived_security_status","updated_at","system_name","system_security","system_sovereignty","systemInvasion","tip","extractKeys","call","sorter","adjustCostForOptions","mapCost","findPaths","end","infinity","Infinity","costs","0","predecessors","addToOpen","cost","vertex","bucket","shift","currentCost","adjacentNodes","totalCost","vertexCost","extractShortest","nodes","u","predecessor","reverse","Guidance","kSpaceCache","findShortestPath","cacheKey","cachedPath","shortest","path","concat","slice","renderPath","systemMarkup","s","tag","ChainMapRendererOrgchart","owner","google","visualization","OrgChart","allowHtml","allowCollapse","size","events","addListener","collapseHandler","DataView","DataTable","cols","label","ready","drawing","switchTo","charts","setOnLoadCallback","switchFrom","lines","newView","nodeId","nodeVal","updateLines","drawNodeLine","addModes","jquerySelector","prefixes","doModeClasses","c","removeModes","classFunc","prefix","$node","nodeIndex","ceil","cellIndex","$connector","$parent","nodeCol","connectorCell","colSpan","parentIndex","newparentIndex","checkSystem","rows","$connecte","me","tempCol","breaker","skip","lastLineData","getCollapsedNodes","collapsedSystems","updateCollapsed","ChainMapRendererRadial","newDiv","createElement","appendChild","div","parentNode","removeChild","mapData","drawInner","CIRCLE_SIZE","first_ring_delta","ringX","ci","ringY","maps","nodesById","ri","inNode","mapNode","minArc","newMap","circles","arc","circle","connection","markup","mi","ni","mapDiv","innerContainer","firstChild","bounds","makeDivsForRing","PI","domNode","finalPositions","w","h","cx","cy","parentWidth","parentHeight","outerContainer","canvas","getElementsByTagName","ctx","getContext","scale","translate","maxCi","beginPath","ellipse","lineWidth","setLineDash","strokeStyle","propertyFromCssClass","stroke","reduce","moveTo","cp1","radToCartesian","radPosition","theta","cp2","bezierCurveTo","lineTo","dashed","minRad","maxRad","parentCollapsed","skipped","rads_per_arc","acc","rad_offset","alignment_delta","frag","createRange","createContextualFragment","dblclick","dr","rad_centre","excess","nextBounds","rad","sin","cos","property","cssText","body","getComputedStyle","getPropertyValue","view","thirdPartySuppliers","renderers","orgChart","radial","useRenderer","elements","querySelectorAll","getAttribute","shipJumps","podKills","shipKills","npcKills","getElementsByClassName","setAttribute","pods","ships","npcs","attachedElements","detach","occupied","count","next","max","frigTypes","connections","topLevel","tab","makeSystemNode","whId","inSigId","nodeTypeMarkup","additionalClasses","systemType","systemNameText","chainNode","statics","shortCodeMap","High-Sec","Low-Sec","Null-Sec","Triglavian","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","classMap","H","L","N","▼","formatStatics","makeCalcChildNode","childID","targetSystem","child","calcNode","calculated","nth","findLinks","parentID","chainList","connectedTo","addCalcChildNodes","chainLinks","regionID","chainData","usedLinks","sig1","sig2","sig1Type","parentType","childType","floor","random","typeBM","classBM","sigIndex","supplier","ids","nextChildID","supplierNodes","ti","supplierNode","thirdParty","nodeNameSuffix","systemsInChainMap","closestToViewing","sigText","modifiers","parentModifiers","chainModifiers","cm","parentPathHome","pathHome","pathToViewed","pathLength","newIndex","rawMap","drawRetryTimer","inChain","prefixText","pathHomeText","n","pathToChainText","expires","universeJumps","getResponseHeader","ship_jumps","then","universeKills","pod_kills","ship_kills","npc_kills","editSigs","editComments","editSig","editComment","animate","backgroundColor","fadeOut","makeSigInfo","wh","wormholeTypeText","formattedType","lifeText","critical","stable","addSig","option","disabled","returnLinkText","sigInfo","leadsToText","tr","until","moment","utc","toDate","onExpiry","alwaysExpire","compact","serverSync","wrapInner","slideDown","$set","replaceWith","contents","setReturnSig","sigToRemoveId","sigToUpdate","returnSig","sigToRemove","sigDialog","overwriteSignature","API","indicator","APIrefresh","expire","periodsToSeconds","onTick","t","automapState","pendingDecision","from","to","console","info","stationID","initial","secondary","toClass","title","signature2","resultSet","formatSystem","empty","trElem","action","comments","modified","$comment","comment","err","message","sticky","commentID","before","created","deleteSig","slideUp","edit","locationTimer","shipTimer","onlineTimer","baseUrl","userAgent","navigator","oauth","subject","accessToken","isExpired","tokenExpire","subtract","isBefore","expired","param","token","user_agent","jqXHR","locationDate","solar_system_id","stationName","shipID","shipName","station_id","stationLookup","always","reference","fail","warn","ship","shipDate","ship_item_id","ship_name","ship_type_id","typeLookup","online","characterStatus","typeID","destinationID","clear_waypoints","beginning","destination_id","clear_other_waypoints","add_to_beginning","headers","Authorization","X-User-Agent","targetID","target_id","eveStatus","idLookup","eveIDs","contentType","processData","characterLookup","eveID","async","corporationLookup","allianceLookup","searchString","categories","strict","fullLookup","promise","Deferred","category","characterData","corporation_id","corporationData","corporation","alliance_id","allianceData","alliance","resolve","parseOauth","_data","$clone","characterChange","updateSignatureTable","newSigsInSystem","mask","column","editing","sigEditing","currentSystem","signatureCount","updateReturnStatus","wormholeId","returnSigId","needReturn","pasteSignatures","processing","rowParse","scanner","columns","validScanGroups","validTypes","Combat Site","Data Site","Gas Site","Ore Site","Relic Site","Wormhole","Site de combat","Site de données","Site de collecte de gaz","Site de minerai","Site de reliques","Trou de ver","Kampfgebiet","Datengebiet","Gasgebiet","Mineraliengebiet","Reliktgebiet","Wurmloch","戦闘サイト","データサイト","ガスサイト","鉱石サイト","遺物サイト","ワームホール","전투 사이트","데이터 사이트","가스 사이트","채광 사이트","유물 사이트","웜홀","Боевой район","Информационный район","Газовый район","Астероидный район","Археологический район","Червоточина","scanGroup","parsePaste","paste","pasteIDs","removes","scan","clipboardData","getData","blur","lastIndex","redoItem","serverStatus","players","times","updateServerTime","innerText","setInterval","log","signatureTime","flareCount","flareTime","last_modified","commentCount","commentTime","aSystems","wormholeInitialIDs","wormholeSecondaryIDs","notify","discord_integration","history","replaceState","effects","bad","whClass","modifier","abs","securityText","HS","LS","NS","Trig","fi","toFixed","factions","regions","tutorial","introJs","setOptions","showStepNumbers","steps","querySelector","intro","exitOnEsc","exitOnOverlayClick","skipLabel","onchange","_currentStep","previousMask","stepFunc","_options","setOption","exiting","exit","goToStep","off","onexit","undoItem","graph","span","role","calc","d","getValue","sourceColumn","setColumns","selectHandler","selections","AreaChart","isStacked","hAxis","textStyle","fontName","fontSize","showTextEvery","vAxis","viewWindowMode","viewWindow","min","maxValue","gridlineColor","pointSize","chartArea","legend","showColorCode","annotations","domain","focusTarget","CKConfig","skin","allowedContent","extraPlugins","enterMode","CKEDITOR","ENTER_BR","removeDialogTabs","autoGrow_onStartup","autoGrow_minHeight","toolbar_minToolbar","toolbar_maxToolbar","toolbar","smallToolbar","maximizedToolbar","fontSize_style","styles","font-size","overrides","attributes","cke","editor","domEvent","altKey","selected_ranges","getRanges","startContainer","parents","getParents","getFirst","getNext","selectElement","selectRanges","ev","definition","getContents","commentSortHandler","sortOrder","sortElem","containerElem","nextSort","flexDirection","removeAllRanges","$this","instances","modifiedDate","createdDate","destroy","Delete","refreshTimer","$total","$ajax","refreshWindow","abort","$row","$col","modal","$menuItem","sortList","parentElement","Save","maskChange","slider","Reset","stats","system_visits","account","logins","lastLogin","username","admin","img","optional","accordion","heightStyle","collapsible","step","slide","error","direction","Add","Remove","send","Create","selectmenu","total","Send","systemText","fromSignature","sigDialogVM","openSignatureDialog","sigId","aSigWormholes","durationPicker","not","form","valid","signatureID_Alpha","signatureID_Numeric","sigKey","existing","findIndex","signatureType","wormholeName","signatureLength","wormholeType","signatureID2_Alpha","signatureID2_Numeric","wormholeName2","wormholeType2","wormholeLife","wormholeMass","signatureName","sigAlpha","completeFunction","delegateSave"],"mappings":"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","file":"app.min.js","sourcesContent":["Object.sort = function(obj, prop) {\n\tvar swapped, prev;\n\tdo {\n\t\tswapped = false, prev = null;\n\t\tfor (var i in obj) {\n\t\t\tif (prev && Number(obj[i][prop]) < Number(obj[prev][prop])) {\n\t\t\t\tvar tmp = obj[i];\n\t\t\t\tobj[i] = obj[prev];\n\t\t\t\tobj[prev] = tmp;\n\t\t\t\tswapped = true;\n\t\t\t}\n\t\t\tprev = i;\n\t\t}\n\t} while (swapped);\n}\n\nObject.index = function(obj, prop, val, cs) {\n\tfor (var key in obj) {\n\t\tif (!cs && obj[key][prop] == val) {\n\t\t\treturn key;\n\t\t} else if (obj[key][prop] && obj[key][prop].toLowerCase() == val.toLowerCase()) {\n\t\t\treturn key;\n\t\t}\n\t}\n}\n\nObject.find = function(obj, prop, val, cs) {\n\tfor (var key in obj) {\n\t\tif (!cs && obj[key][prop] == val) {\n\t\t\treturn obj[key];\n\t\t} else if (obj[key][prop] && obj[key][prop].toLowerCase() == val.toLowerCase()) {\n\t\t\treturn obj[key];\n\t\t}\n\t}\n\n\treturn false;\n}\n\nObject.maxTime = function(obj, prop) {\n\tvar maxTimeString = \"\", maxTime;\n\n\tfor (var key in obj) {\n\t\tif (!maxTime || maxTime < new Date(obj[key][prop])) {\n\t\t\tmaxTime = new Date(obj[key][prop]);\n\t\t\tmaxTimeString = obj[key][prop];\n\t\t}\n\t}\n\treturn maxTimeString;\n}\n\nObject.time = function(obj) {\n\tvar dates = [], key;\n\tfor (key in obj) {\n\t\tdates.push(new Date(obj[key].time));\n\t}\n\n\treturn dates.length ? dates.sort()[dates.length -1].getTime() /1000 : 0;\n};\n\n(function($){\n    $.fn.serializeObject = function(){\n\n        var self = this,\n            json = {},\n            push_counters = {},\n            patterns = {\n                \"validate\": /^[a-zA-Z][a-zA-Z0-9_]*(?:\\[(?:\\d*|[a-zA-Z0-9_]+)\\])*$/,\n                \"key\":      /[a-zA-Z0-9_]+|(?=\\[\\])/g,\n                \"push\":     /^$/,\n                \"fixed\":    /^\\d+$/,\n                \"named\":    /^[a-zA-Z0-9_]+$/\n            };\n\n\n        this.build = function(base, key, value){\n            base[key] = value;\n            return base;\n        };\n\n        this.push_counter = function(key){\n            if(push_counters[key] === undefined){\n                push_counters[key] = 0;\n            }\n            return push_counters[key]++;\n        };\n\n        $.each($(this).serializeArray(), function(){\n\n            // skip invalid keys\n            if(!patterns.validate.test(this.name)){\n                return;\n            }\n\n            var k,\n                keys = this.name.match(patterns.key),\n                merge = this.value,\n                reverse_key = this.name;\n\n            while((k = keys.pop()) !== undefined){\n\n                // adjust reverse_key\n                reverse_key = reverse_key.replace(new RegExp(\"\\\\[\" + k + \"\\\\]$\"), '');\n\n                // push\n                if(k.match(patterns.push)){\n                    merge = self.build([], self.push_counter(reverse_key), merge);\n                }\n\n                // fixed\n                else if(k.match(patterns.fixed)){\n                    merge = self.build([], k, merge);\n                }\n\n                // named\n                else if(k.match(patterns.named)){\n                    merge = self.build({}, k, merge);\n                }\n            }\n\n            json = $.extend(true, json, merge);\n        });\n\n        return json;\n    };\n})(jQuery);\n\nvar letterToNumbers = function(string) {\n    string = string.toUpperCase();\n    var letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', sum = 0, i;\n    for (i = 0; i < string.length; i++) {\n        sum += Math.pow(letters.length, i) * (letters.indexOf(string.substr(((i + 1) * -1), 1)) + 1);\n    }\n    return sum;\n};\n\nvar sigFormat = function(input, type) {\n\tif (!input) return \"\";\n\n\tvar alpha = /^[a-zA-Z]+$/;\n\tvar numeric = /^[0-9]+$/;\n\tvar format = type == \"type\" ? options.chain.typeFormat || \"\" : options.chain.classFormat || \"\";\n\n\tfor (var x = 0, l = format.length; x < l; x++) {\n\t\tif (format[x].match(alpha)) {\n\t\t\tif (format[x].toUpperCase() == \"B\" && input == \"a\") {\n\t\t\t\treturn \"\";\n\t\t\t} else {\n\t\t\t\tif (format[x] == format[x].toUpperCase()) {\n\t\t\t\t\tformat = format.substr(0, x) + input.toUpperCase() + format.substr(x + 1, l);\n\t\t\t\t} else {\n\t\t\t\t\tformat = format.substr(0, x) + input + format.substr(x + 1, l);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (format[x].match(numeric)) {\n\t\t\tif (format[x] == 2 && input == \"a\") {\n\t\t\t\treturn \"\";\n\t\t\t} else {\n\t\t\t\tformat = format.substr(0, x) + letterToNumbers(input) + format.substr(x +1, l);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn format;\n};\n\n/** Find the relative position of one element within the hierarchy tree of another */\nfunction positionRelativeTo(elem, ancestor) {\n\tconst elemPos = elem.getBoundingClientRect(),\n\t\tancestorPos = ancestor.getBoundingClientRect();\n\treturn { \n\t\tleft: elemPos.left - ancestorPos.left + ancestor.scrollLeft,\n\t\ttop: elemPos.top - ancestorPos.top + ancestor.scrollTop\n\t};\n}\n\n/** Look up one or more values in a comma separated string as keys in a data map, and return a property from the results in a new comma separated string.\nConvenience function for UI mapping.\nWill throw a failure message, unless suppress=true in which case it will return undefined, if \nany of the lookups fail to resolve. */\nfunction lookupMultiple(map, propertyName, lookupString, suppress) {\n\tconst values = lookupString.split(',');\n\tconst results = [];\n\tfor(var i = 0; i < values.length; i++) {\n\t\tconst v = values[i];\n\t\tconst r = map[v];\n\t\tif(!r) { \n\t\t\tif(suppress) { return undefined;}\n\t\t\telse { throw 'Value ' + v + ' did not match anything in ' + map; }\n\t\t}\n\t\tresults.push(r[propertyName]);\n\t}\n\treturn results.join(',');\n}\n\nvar getCookie = function(c_name) {\n\tvar c_value = document.cookie;\n\n\tvar c_start = c_value.indexOf(\" \" + c_name + \"=\");\n\tif (c_start == -1) {\n\t\tc_start = c_value.indexOf(c_name + \"=\");\n\t}\n\n\tif (c_start == -1) {\n\t\tc_value = null;\n\t} else {\n\t\tc_start = c_value.indexOf(\"=\", c_start) + 1;\n\t\tvar c_end = c_value.indexOf(\";\", c_start);\n\n\t\tif (c_end == -1) {\n\t\t\tc_end = c_value.length;\n\t\t}\n\n\t\tc_value = unescape(c_value.substring(c_start, c_end));\n\t}\n\n\treturn c_value;\n};\n\nvar setCookie = function(c_name, value, exdays) {\n\tvar exdate = new Date();\n\texdate.setDate(exdate.getDate() + exdays);\n\tvar c_value = escape(value) + ((exdays == null) ? \"\" : \"; expires=\"+exdate.toUTCString());\n\n\tdocument.cookie = c_name + \"=\" + c_value + \";\" + (document.location.protocol == \"https:\" ? \"secure;\" : \"\");\n};\n\n// Global CSS class change event\n(function($) {\n    var originalAddClassMethod = $.fn.addClass;\n\tvar originalRemoveClassMethod = $.fn.removeClass;\n\n    $.fn.addClass = function(className) {\n        // Execute the original method.\n        var result = originalAddClassMethod.apply(this, arguments);\n\n        // trigger a custom event\n        this.trigger('classchange', className);\n\n        // return the original result\n        return result;\n    }\n\n\t$.fn.removeClass = function(className) {\n        // Execute the original method.\n        var result = originalRemoveClassMethod.apply(this, arguments);\n\n        // trigger a custom event\n        this.trigger('classchange', className);\n\n        // return the original result\n        return result;\n    }\n})(jQuery);\n\n","function findSystemID(systemName) {\n\tfor(let k in appData.systems) {\n\t\tif(appData.systems[k].name.toUpperCase() === systemName.toUpperCase()) return k; \n\t}\n\treturn undefined;\n}\n\nvar viewingSystem = $(\"meta[name=system]\").attr(\"content\");\nvar viewingSystemID = findSystemID(viewingSystem);\nvar server = $(\"meta[name=server]\").attr(\"content\");\nvar app_name = $(\"meta[name=app_name]\").attr(\"content\");\nvar version = $(\"meta[name=version]\").attr(\"content\");\n\n// Page cache indicator\nif (getCookie(\"loadedFromBrowserCache\") == \"true\") {\n\t$(\"#pageTime\").html(\"Page is Cached\");\n}\n\n// Reload with default system if it was invalid\nif(!viewingSystemID) { window.stop(); window.location = '?system=Jita'; }\n\n\n// setCookie('loadedFromBrowserCache', true);\n\n// Use this to test performance of javascript code lines\n// var startTime = window.performance.now();\n// console.log(\"stint: \"+ (window.performance.now() - startTime));\n","var options = new function() {\n\tvar localOverrides = [\"grid\"];\n\tvar localOptions = JSON.parse(localStorage.getItem(\"tripwire_options\"));\n\tvar saveTimer;\n\n\tthis.userID = init.userID;\n\tthis.character = {id: init.characterID, name: init.characterName};\n\tthis.background = null;\n\tthis.uiscale = 1.0;\n\tthis.favorites = [];\n\tthis.grid = {};\n\tthis.tracking = {active: \"new\"};\n\tthis.masks = {active: init.corporationID + \".2\"};\n\tthis.chain = {typeFormat: null, classFormat: null, gridlines: true, active: 0, tabs: [], \"node-reference\": \"type\", zoom: 1.0, sigNameLocation: 'name', routingLimit: 15, routeSecurity: 'shortest', routeIgnore: { enabled: false, systems: [ 'Tama', 'Rancer' ] }, renderer: 'orgChart' };\n\tthis.signatures = {editType: \"unknown\", copySeparator: \",\", pasteLife: 72, alignment: {sigID: \"centerAlign\", sigType: \"centerAlign\", sigAge: \"centerAlign\", leadsTo: \"centerAlign\", sigLife: \"centerAlign\", sigMass: \"centerAlign\"}};\n\tthis.buttons = {follow: false, chainWidget: {viewing: false, favorites: false}, signaturesWidget: {autoMapper: false}};\n\n\tthis.saveDelay = function(delay) {\n\t\tif (saveTimer) clearTimeout(saveTimer);\n\n\t\tsaveTimer = setTimeout(\"options.save()\", delay);\n\t};\n\n\t// Saves options in both cookie and database\n\tthis.save = function() {\n\t\tvar options = JSON.stringify(window.options.get());\n\n\t\tlocalStorage.setItem(\"tripwire_options\", options);\n\n\t\treturn $.ajax({\n\t\t\turl: \"options.php\",\n\t\t\tdata: {mode: \"set\", options: options},\n\t\t\ttype: \"POST\",\n\t\t\tdataType: \"JSON\"\n\t\t});\n\t};\n\n\t// Loads options via passed object else cookie\n\tthis.load = function(data) {\n\t\tif (data && typeof(data) != \"undefined\") {\n\t\t\tthis.set(this, data);\n\t\t} else if (localOptions) {\n\t\t\tthis.set(this, localOptions);\n\t\t}\n\n\t\tthis.apply();\n\t};\n\n\t// Gets options from this by exluding types == function\n\tthis.get = function() {\n\t\tvar data = {};\n\n\t\tfor (var x in this) {\n\t\t\tif (typeof(this[x]) != \"function\") {\n\t\t\t\tdata[x] = this[x];\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t};\n\n\t// Sets this from passed object\n\tthis.set = function(local, data) {\n\t\tfor (var prop in data) {\n\t\t\tif (data[prop] && data[prop].constructor && data[prop].constructor === Object) {\n\t\t\t\tif (local) {\n\t\t\t\t\tthis.set(local[prop], data[prop]);\n\t\t\t\t}\n\t\t\t} else if (local && typeof(local[prop]) != \"undefined\") {\n\t\t\t\tlocal[prop] = data[prop];\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.reset = function() {\n\t\tfor (var x in this) {\n\t\t\tif (typeof(this[x]) != \"function\") {\n\t\t\t\tthis[x] = JSON.parse(JSON.stringify(this.reset.defaults[x]));\n\t\t\t}\n\t\t}\n\t};\n\n\t// Applies settings\n\tthis.apply = function() {\n\t\t// Local browser overrides\n\t\tif (localOptions) {\n            for (key in localOverrides) {\n                this[localOverrides[key]] = localOptions[localOverrides[key]];\n\t\t\t}\n\t\t}\n\n\t\t// Grid layout (detect old IGB setting options)\n\t\tif (this.grid.hasOwnProperty(\"oog\") && Object.keys(this.grid.oog||{}).length) {\n\t\t\t$.each(this.grid.oog, function() {\n\t\t\t\t$(\"#\"+this.id).attr({\"data-col\": this.col, \"data-row\": this.row, \"data-sizex\": this.size_x, \"data-sizey\": this.size_y})\n\t\t\t\t\t.css({width: this.width, height: this.height});\n\t\t\t});\n\t\t} else if (Object.keys(this.grid||{}).length) {\n\t\t\t$.each(this.grid, function() {\n\t\t\t\t$(\"#\"+this.id).attr({\"data-col\": this.col, \"data-row\": this.row, \"data-sizex\": this.size_x, \"data-sizey\": this.size_y})\n\t\t\t\t\t.css({width: this.width, height: this.height});\n\t\t\t});\n\t\t}\n\n\t\t// Make sure favorites are all ints and not strings\n\t\tthis.favorites = $.map(this.favorites, function(favorite) {\n\t\t\treturn parseInt(favorite);\n\t\t});\n\n\t\t// Buttons\n\t\tif (this.buttons.follow) $(\"#follow\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.home) $(\"#home\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.kspace) $(\"#k-space\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.viewing) $(\"#show-viewing\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.favorites) $(\"#show-favorite\").addClass(\"active\");\n\t\tif (this.buttons.chainWidget.evescout) $(\"#eve-scout\").addClass(\"active\");\n\t\tif ($.inArray(parseInt(viewingSystemID), this.favorites) !== -1) $(\"#system-favorite\").attr(\"data-icon\", \"star\").addClass(\"active\");\n\t\tif (this.buttons.signaturesWidget.autoMapper) $(\"#toggle-automapper\").addClass(\"active\");\n\n\t\t// UI Scale\n\t\tif (this.uiscale) {\n\t\t\t$(\"body\").css(\"zoom\", this.uiscale);\n\t\t}\n\n\t\t// Chain zoom\n\t\tif (this.chain.zoom) {\n\t\t\t$(\"#chainParent\").css(\"zoom\", this.chain.zoom);\n\t\t}\n\n\t\t// Background\n\t\tif (this.background) {\n\t\t\tvar a = $('<a>', { href:this.background } )[0];\n\t\t\t$(\"#wrapper\").attr(\"style\", \"background-image: url(https://\" + a.hostname + a.pathname + a.search + \");\");\n\t\t} else {\n\t\t\t$(\"#wrapper\").attr(\"style\", \"\");\n\t\t}\n\n\t\t// Characters in Options\n\t\t$(\"#dialog-options #characters\").html(\"<img src='https://image.eveonline.com/Character/\"+init.characterID+\"_64.jpg' />\");\n\n\t\t// Active mask\n\t\t$(\"#dialog-options input[name='mask']\").filter(\"[value='\"+this.masks.active+\"']\").attr(\"checked\", true);\n\n\t\t// Chain tabs\n\t\t$(\"#chainTabs\").html(\"\");\n\t\tfor (var x in this.chain.tabs) {\n\t\t\tif (this.chain.tabs[x]) {\n\t\t\t\tvar $tab = $(\"#chainTab .tab\").clone();\n\n\t\t\t\t$tab.attr(\"id\", x).find(\".name\").data(\"tab\", this.chain.tabs[x].systemID).html(this.chain.tabs[x].name);\n\t\t\t\tif (x == this.chain.active) { $tab.addClass(\"current\"); }\n\n\t\t\t\t$(\"#chainTabs\").append($tab);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Reset routing cache in case routing options changed\n\t\tif(guidance) { guidance.clearCache(); }\n\n\t\t// Draw chain if Tripwire is initialized\n\t\tif (typeof(tripwire) !== \"undefined\") {\n\t\t\tchain.redraw();\n\t\t}\n\t};\n\n\tthis.reset.defaults = JSON.parse(JSON.stringify(this.get()));\n\tthis.load(init && init.options ? init.options : null);\n}\n","var grid = $(\".gridster ul\").gridster({\n\twidget_selector: \"li.gridWidget\",\n\tavoid_overlapped_widgets: false,\n\twidget_base_dimensions: [50, 50],\n\twidget_margins: [5, 5],\n\tautogrow_cols: true,\n\thelper: \"clone\",\n\tdraggable: {\n\t\tstart: function(e, ui) {\n\t\t\t$(\"div.gridster\").width($(\"div.gridster ul\").width());\n\t\t}\n\t},\n\tresize: {\n    \tenabled: true,\n    \thandle_class: \"grid-resize\",\n    \tmax_size: [30, 30],\n    \tmin_size: [4, 4],\n    \tstart: function(e) {\n    \t\t$(\"div.gridster\").width($(\"div.gridster ul\").width());\n    \t},\n    \tstop: function(e, ui, $widget) {\n    \t\t//var width = parseInt($(\".gridster\").css(\"margin-left\")) + this.container_width;\n    \t\t//$(\"#wrapper\").css({width: width + \"px\"})\n    \t\tswitch ($widget.attr(\"id\")) {\n    \t\t\tcase \"infoWidget\":\n    \t\t\t\tsetTimeout(\"activity.redraw();\", 300);\n    \t\t\t\tbreak;\n    \t\t}\n    \t}\n\t},\n\tserialize_params: function($w, wgd) {\n\t\treturn {\n\t\t\tid: $w.attr(\"id\"),\n\t\t\tcol: wgd.col,\n\t\t\trow: wgd.row,\n\t\t\tsize_x: wgd.size_x,\n\t\t\tsize_y: wgd.size_y,\n\t\t\twidth: $w.width(),\n\t\t\theight: $w.height()\n\t\t}\n\t}\n}).data(\"gridster\").disable();\n\ngrid.disable_resize();\n$(\".grid-resize\").addClass(\"hidden\").attr(\"data-icon\", \"resize\");\n\n$(\".gridster\").css({visibility: \"visible\"});\n$(\".gridster > *\").addClass(\"gridster-transition\");\n\n$(\"#layout\").click(function() {\n\tif (!$(this).hasClass(\"active\")) {\n\t\tgrid.enable();\n\t\tgrid.enable_resize();\n\t\t$(\".grid-resize\").removeClass(\"hidden\");\n\n\t\t$(this).addClass(\"active\");\n\t} else {\n\t\tgrid.disable();\n\t\tgrid.disable_resize();\n\t\t$(\".grid-resize\").addClass(\"hidden\");\n\n\t\t$(this).removeClass(\"active\");\n\n\t\toptions.grid = grid.serialize();\n\n\t\toptions.save();\n\t}\n});\n","var tripwire = new function() {\n    this.timer, this.xhr;\n\tthis.version = version;\n\tthis.client = {signatures: {}, wormholes: {}};\n\tthis.server = {signatures: {}, wormholes: {}};\n\tthis.signatures = {list: {}, undo: JSON.parse(sessionStorage.getItem(\"tripwire_undo\")) || {}, redo: JSON.parse(sessionStorage.getItem(\"tripwire_redo\")) || {}};\n\tthis.serverSignatureCount = 0;\n\tthis.activity = {};\n\tthis.data = {tracking: {}, esi: {}};\n\tthis.refreshRate = 5000;\n\tthis.connected = true;\n\tthis.ageFormat = \"HM\";\n\tthis.instance = window.name ? window.name : (new Date().getTime() / 1000, window.name = new Date().getTime() / 1000);\n\n\t// Reference to `this` that can be used inside of functions\n\tvar _this = this\n\n    // Command to start/stop tripwire updates\n\t// ToDo: Include API and Server timers\n\tthis.stop = function() {\n\t\tclearTimeout(this.timer);\n\t\treturn this.timer;\n\t};\n\n\tthis.start = function() {\n\t\treturn this.sync();\n\t}\n\n    // Command to change Age format\n\t// ToDo: Cookie change to keep\n\tthis.setAgeFormat = function(format) {\n\t\tvar format = typeof(format) !== 'undefined' ? format : this.ageFormat;\n\n\t\t$(\"span[data-age]\").each(function() {\n\t\t\t$(this).countdown(\"option\", {format: format});\n\t\t});\n\n\t\treturn true;\n\t}\n\n    this.serverTime = function() {\n\t\tthis.time;\n\n\t\tthis.serverTime.getTime = function() {\n\t\t\treturn tripwire.serverTime.time;\n\t\t}\n\t}\n    this.serverTime();\n\n    // Handles putting chain together\n\tthis.chainMap = function() {\n\t\tthis.chainMap.parse = function(data) {\n\t\t\tchain.draw(data);\n\t\t}\n\t}\n    this.chainMap();\n\n    this.pastEOL = function() {\n\t\tvar options = {since: $(this).countdown('option', 'until'), format: \"HM\", layout: \"-{hnn}{sep}{mnn}&nbsp;\"};\n\t\t$(this).countdown(\"option\", options);\n\t}\n\n    // Handles WH Type hover-over tooltip\n\t// ToDo: Use native JS\n\tthis.whTooltip = function(sig) {\n\t\tif (viewingSystemID == sig.systemID) {\n\t\t\tif ($.inArray(sig.type, $.map(tripwire.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\t\tvar type = sig.type;\n\t\t\t\tvar tooltip = '';\n\t\t\t} else {\n\t\t\t\tvar type = sig.sig2Type;\n\t\t\t\tvar tooltip = \"<b>Type:</b> \"+(type || 'Unknown')+\"<br/>\";\n\t\t\t}\n\t\t} else {\n\t\t\tif ($.inArray(sig.sig2Type, $.map(tripwire.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\t\tvar type = sig.sig2Type;\n\t\t\t\tvar tooltip = '';\n\t\t\t} else {\n\t\t\t\tvar type = sig.type;\n\t\t\t\tvar tooltip = \"<b>Type:</b> \"+(type || 'Unknown')+\"<br/>\";\n\t\t\t}\n\t\t}\n\n\t\tif ($.inArray(type, $.map(tripwire.wormholes, function(item, index) { return index;})) >= 0) {\n\t\t\tvar whType = true;\n\t\t} else {\n\t\t\tvar whType = false;\n\t\t}\n\n\n\t\tif (whType) {\n\t\t\ttooltip += \"<b>Life:</b> \"+(tripwire.wormholes[type].life)+\"<br/>\";\n\t\t\tswitch (tripwire.wormholes[type].leadsTo.split(\" \")[0]) {\n\t\t\t\tcase 'High-Sec':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='hisec'>\"+tripwire.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Low-Sec':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='lowsec'>\"+tripwire.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Null-Sec':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='nullsec'>\"+tripwire.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Class':\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span class='wh'>\"+tripwire.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttooltip += \"<b>Leads To:</b> <span>\"+tripwire.wormholes[type].leadsTo+\"</span><br/>\";\n\t\t\t}\n\n\t\t\ttooltip += \"<b>Max Mass</b>: \"+(Intl.NumberFormat().format(tripwire.wormholes[type].mass))+\" Kg<br/>\";\n\n\t\t\ttooltip += \"<b>Max Jumpable</b>: \"+(Intl.NumberFormat().format(tripwire.wormholes[type].jump))+\" Kg<br/>\";\n\t\t}\n\n\t\treturn tooltip;\n\t}\n\n\t// Handles Age hover-over tooltip\n\t// ToDo: Use native JS\n\tthis.ageTooltip = function(sig) {\n\t\t// var date = new Date(sig.lifeTime);\n\t\t// var localOffset = date.getTimezoneOffset() * 60000;\n\t\t// date = new Date(date.getTime() + localOffset);\n        var date = new Date(sig.lifeTime);\n\n\t\tvar tooltip = \"<table class=\\\"age-tooltip-table\\\"><tr>\"\n        + \"<th>Created:</th><td>\"+(date.getMonth()+1)+\"/\"+date.getDate()+\" \"+(date.getHours() < 10?'0':'')+date.getHours()+\":\"+(date.getMinutes() < 10?'0':'')+date.getMinutes()+\"</td>\"\n        + \"<td>\"+sig.createdByName.replace(/'/g, '&#39;').replace(/\"/g, '&#34;')+\"</td>\"\n        + \"</tr>\";\n\n\t\tif (sig.lifeTime != sig.modifiedTime) {\n\t\t\tdate = new Date(sig.modifiedTime);\n\t\t\t// localOffset = date.getTimezoneOffset() * 60000;\n\t\t\t// date = new Date(date.getTime() + localOffset);\n      \n\t\t\ttooltip += \"<tr><th>Last Modified:</th><td>\"+(date.getMonth()+1)+\"/\"+date.getDate()+\" \"+(date.getHours() < 10?'0':'')+date.getHours()+\":\"+(date.getMinutes() < 10?'0':'')+date.getMinutes()+\"</td>\"\n          + \"<td>\"+sig.modifiedByName.replace(/'/g, '&#39;').replace(/\"/g, '&#34;')+\"</td>\"\n          + \"</tr>\";\n\t\t}\n\n\t\ttooltip += \"</table>\";\n\n\t\treturn tooltip;\n\t}\n\n    this.refresh = function(mode, data, successCallback, alwaysCallback) {\n\t\tvar mode = mode || 'refresh';\n\n\t\tthis.sync(mode, data, successCallback, alwaysCallback);\n\t}\n\n\t// getSystemIDsByNames performs a case-insensitive search of the internal\n\t// list of systems looking for matches on each system name in the given\n\t// comma-separated list of names. A comma-separated list of system IDs is\n\t// returned if all systems are found, otherwise the empty string is returned.\n\tthis.getSystemIDsByNames = function(systemNames) {\n\t\tif (!_this.systems) {\n\t\t\treturn \"\";\n\t\t}\n\t\tconst values = systemNames.split(\",\");\n\t\tconst systems = [];\n\t\tfor(var i = 0; i < values.length; i++) {\n\t\t\tfor (systemID in _this.systems) {\n\t\t\t\tconst system = _this.systems[systemID];\n\t\t\t\tif (system.name.toLowerCase() == values[i].toLowerCase()) {\n\t\t\t\t\tsystems.push(systemID);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (values.length != systems.length) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn systems.join(\",\");\n\t}\n}\n","$(\"body\").on(\"click\", \"a[href^='.?system=']\", function(e) {\n\te.preventDefault();\n\n\tvar system = $(this).attr(\"href\").replace(\".?system=\", \"\");\n\tvar systemID = Object.index(tripwire.systems, \"name\", system);\n\n\ttripwire.systemChange(systemID);\n});\n\n$(\"body\").on(\"submit\", \"#systemSearch\", function(e) {\n\te.preventDefault();\n\n\tvar system = $(this).find(\"[name='system']\").val();\n\tvar systemID = Object.index(tripwire.systems, \"name\", system, true) || false;\n\n\tif (systemID !== false) {\n\t\ttripwire.systemChange(systemID);\n\t\t$(this).find(\"[name='system']\").val(\"\");\n\t\t$(\"#search\").click();\n\t}\n});\n\n$(\"body\").on(\"click\", \"#undo:not(.disabled)\", function() {\n\ttripwire.undo();\n});\n\n$(\"body\").on(\"click\", \"#redo:not(.disabled)\", function() {\n\ttripwire.redo();\n});\n\n// Chain map zooming (Gets funky if you push things too far)\n$(\"#chainParent\").on(\"mousewheel\", function(e) {\n\te.preventDefault();\n\tvar zoom = parseFloat($(\"#chainParent\").css(\"zoom\")) || 1.0;\n\tvar min = 0.6;\n\tvar max = 2.0;\n\n    if (e.originalEvent.wheelDelta / 120 > 0 && zoom < max) {\n\t\t$(\"#chainParent\").css(\"zoom\", zoom + 0.1);\n    } else if (e.originalEvent.wheelDelta / 120 < 0 && zoom > min) {\n\t\t$(\"#chainParent\").css(\"zoom\", zoom - 0.1);\n    }\n\n\t// Show the reset zoom button for awhile\n\t$(\"#chain-zoom-reset\").fadeIn(200);\n\tif (this.timeout) clearTimeout(this.timeout);\n\tthis.timeout = setTimeout('$(\"#chain-zoom-reset\").fadeOut(200);', 3000);\n\n\t// Save options\n\toptions.chain.zoom = parseFloat($(\"#chainParent\").css(\"zoom\"));\n\toptions.saveDelay(2000);\n});\n\n$(\"#chain-zoom-reset\").on(\"click\", function() {\n\t$(\"#chainParent\").css(\"zoom\", 1);\n\toptions.chain.zoom = 1;\n\toptions.saveDelay(2000);\n});\n\n$(document).keydown(function(e)\t{\n\t//Abort - user is in input or textarea\n\tif ($(document.activeElement).is(\"textarea, input\")) return;\n\n\t// Ctrl key hooks\n\tif (e.metaKey || e.ctrlKey) {\n\n\t\tif (e.keyCode === 89 && !$(\"#redo\").hasClass(\"disabled\")) {\n\t\t\t// Ctrl-y redo hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#redo\").click();\n\t\t\tNotify.trigger(\"Redoing last undo\");\n\t\t} else if (e.keyCode === 90 && !$(\"#undo\").hasClass(\"disabled\")) {\n\t\t\t// Ctrl-z undo hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#undo\").click();\n\t\t\tNotify.trigger(\"Undoing last action\");\n\t\t} else if (e.keyCode === 65) {\n\t\t\t// Ctrl-a select all (signatures) hook\n\t\t\te.preventDefault();\n\t\t\t$(\"#sigTable tbody tr\").addClass(\"selected\");\n\t\t\t$(\"#signaturesWidget #delete-signature\").trigger(\"delete:refresh\");\n\t\t} else if (e.keyCode === 67) {\n\t\t\t// Ctrl-c copy selected signatures hook\n\t\t\tif (window.getSelection().toString() === \"\") {\n\t\t\t\tvar output = \"\";\n\t\t\t\t$(\"#sigTable tbody tr.selected\").each(function(row) {\n\t\t\t\t\tvar signature = tripwire.client.signatures[$(this).data(\"id\")];\n\t\t\t\t\tvar row = [];\n\n\t\t\t\t\tif (signature.signatureID) {\n\t\t\t\t\t\trow.push(signature.signatureID.substring(0, 3).toUpperCase() + \"-\" + (signature.signatureID.substring(3, 6) || \"###\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.push(\"null\");\n\t\t\t\t\t}\n\n\t\t\t\t\trow.push(signature.type);\n\t\t\t\t\tif (signature.type === \"wormhole\") {\n\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\tvar otherSignature = signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\trow.push(wormhole.type || \"null\" );\n\t\t\t\t\t\trow.push(tripwire.systems[signature.systemID] ? tripwire.systems[signature.systemID].name : tripwire.aSigSystems[signature.systemID]);\n\t\t\t\t\t\trow.push(tripwire.systems[otherSignature.systemID] ? tripwire.systems[otherSignature.systemID].name : tripwire.aSigSystems[otherSignature.systemID]);\n\t\t\t\t\t\trow.push(wormhole.life);\n\t\t\t\t\t\trow.push(wormhole.mass);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trow.push(signature.name);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.push(signature.createdByName);\n\t\t\t\t\trow.push(signature.lifeTime);\n\t\t\t\t\trow.push(signature.lifeLength);\n\t\t\t\t\trow.push(signature.lifeLeft);\n\t\t\t\t\trow.push(signature.modifiedByName);\n\t\t\t\t\trow.push(signature.modifiedTime);\n\t\t\t\t\toutput += row.join(options.signatures.copySeparator) + \"\\r\\n\";\n\t\t\t\t});\n\t\t\t\t$(\"#clipboard\").text(output);\n\t\t\t\t$(\"#clipboard\").focus();\n\t\t\t\t$(\"#clipboard\").select();\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// delete key keyhooks\n\t\tif (e.keyCode == 46 && $(\"#sigTable tr.selected\").length > 0) {\n\t\t\t$(\"#delete-signature\").click();\n\t\t}\n\t}\n});\n\n// $(\"#APIclock\").knob({angleArc: 359.9, height: 20, width: 20, max: 60, readOnly: true, displayInput: false, fgColor: \"#CCC\", bgColor: \"#666\"});\n\n$(\"#follow\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\toptions.buttons.follow = $(this).hasClass(\"active\");\n\toptions.save();\n})\n\n$(\"#show-viewing\").click(function() {\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\tchain.redraw();\n\n\toptions.buttons.chainWidget.viewing = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#show-favorite\").click(function() {\n\tif ($(this).hasClass(\"active\"))\n\t\t$(this).removeClass(\"active\");\n\telse\n\t\t$(this).addClass(\"active\");\n\n\tchain.redraw();\n\n\toptions.buttons.chainWidget.favorites = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#system-favorite\").click(function() {\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\").attr(\"data-icon\", \"star-empty\");\n\n\t\toptions.favorites.splice(options.favorites.indexOf(parseInt(viewingSystemID)), 1);\n\t} else {\n\t\t$(this).attr(\"data-icon\", \"star\").addClass(\"active\");\n\n\t\toptions.favorites.push(parseInt(viewingSystemID));\n\t}\n\n\tif ($(\"#show-favorite\").hasClass(\"active\"))\n\t\tchain.redraw();\n\n\toptions.save();\n});\n\n$('#favorite-dropdown-toggle').click(function() {\n\tconst target = document.getElementById('favorite-panel');\n\tif(target.style.display === 'none') {\n\t\tconst listWrapper = document.getElementById('favorite-panel-wrapper');\n\t\tlistWrapper.innerHTML = options.favorites.length == 0 ? '<p>You have no favourites. Use the star to add a system.</p>'\n\t\t\t: options.favorites.map(function(f) {\n\t\t\t\tconst systemInfo = systemAnalysis.analyse(f);\n\t\t\t\treturn '<p><a href=\".?system=' + systemInfo.name + '\">' + systemInfo.name + '</a> (' + systemRendering.renderEffect(systemInfo, 'span') + '<span class=\"' + systemInfo.systemTypeClass + '\">' + systemInfo.systemTypeName + '</span>)';\n\t\t\t}).join('\\n');\n\t\ttarget.style.display = '';\n\t} else { target.style.display = 'none'; }\n});\n\n$(\"#search\").click(function(e) {\n\t$(\"#searchSpan\").toggle();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\t\tif (tripwire.client.EVE && tripwire.client.EVE.systemName)\n\t\t\t$(\"#currentSpan\").show();\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t\t$(\"#currentSpan\").hide();\n\n\t\t$(\"#searchSpan input[name=system]\").focus().select();\n\t}\n});\n\n$(\"#toggle-automapper\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\t} else {\n\t\t$(this).addClass(\"active\");\n\t}\n\n\toptions.buttons.signaturesWidget.autoMapper = $(this).hasClass(\"active\");\n\toptions.save();\n});\n\n$(\"#track\").on(\"click\", \".tracking-clone\", function() {\n\tvar characterID =$(this).attr(\"data-characterid\");\n\t$(\"#tracking .tracking-clone\").removeClass(\"active\");\n\n\tif (options.tracking.active == characterID) {\n\t\toptions.tracking.active = null;\n\t\ttripwire.EVE(false, true);\n\t\t$(\"#removeESI\").attr(\"disabled\", \"disabled\");\n\t} else {\n\t\toptions.tracking.active = characterID;\n\n\t\tif (tripwire.esi.characters[options.tracking.active]) {\n\t\t\t$(\"#tracking .tracking-clone[data-characterid='\"+ options.tracking.active +\"']\").addClass(\"active\");\n\t\t\ttripwire.EVE(tripwire.esi.characters[options.tracking.active], true);\n\t\t}\n\n\t\t$(\"#removeESI\").removeAttr(\"disabled\");\n\t}\n\n\toptions.save();\n});\n\n$(\"#login\").on(\"click\", \"#removeESI\", function() {\n\tvar characterID = options.tracking.active;\n\n\toptions.tracking.active = null;\n\ttripwire.EVE(false, true);\n\toptions.save();\n\n\t$(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").remove();\n\n\t$(\"#removeESI\").attr(\"disabled\", \"disabled\");\n\n\tif ($.isArray(tripwire.data.esi.delete)) {\n\t\ttripwire.data.esiDelete.push(characterID);\n\t} else {\n\t\ttripwire.data.esiDelete = [characterID];\n\t}\n});\n\n$(\"#user\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"active\")) {\n\t\t$(this).removeClass(\"active\");\n\n\t\t$(\"#login > #panel\").css({display: \"none\"});\n\n\t\t//$(\"#wrapper\").unbind(\"click\");\n\t} else {\n\t\t$(this).addClass(\"active\");\n\n\t\t$(\"#login > #panel\").css({display: \"inline\"});\n\t\t$(\"#loginForm input[name=username]\").focus().select();\n\n\t\t// Click outside closes\n\t\t$(\"#wrapper\").click(function(e) {\n\t\t\t$(\"#login > #panel\").css({display: \"none\"});\n\t\t\t$(\"#user\").removeClass(\"active\");\n\t\t});\n\n\t\t$(\"#login\").click(function(e) {\n\t\t\te.stopPropagation();\n\t\t})\n\t}\n});\n\n$(\"#logout\").click(function() {\n\twindow.location = \"logout.php\";\n});\n\nvar Notify = new function() {\n\tthis.trigger = function(content, color, stick, id) {\n\t\tvar color = typeof(color) !== \"undefined\" ? color : \"blue\";\n\t\tvar stick = typeof(stick) !== \"undefined\" ? stick : 10000;\n\t\tvar id = typeof(id) !== \"undefined\" ? id : null;\n\n\t\tnew jBox(\"Notice\", {\n\t\t\tid: id,\n\t\t\tcontent: content,\n\t\t\toffset: {y: 35},\n\t\t\tanimation: \"flip\",\n\t\t\tcolor: color,\n\t\t\tautoClose: stick\n\t\t});\n\t}\n}\n\n// Init valdiation tooltips\nvar ValidationTooltips = new jBox(\"Tooltip\", {\n\ttrigger: null,\n\taddClass: \"validation-tooltip\",\n\tanimation: \"flip\",\n\tfade: 0\n});\n\nvar Tooltips = new jBox(\"Tooltip\", {\n\tattach: $(\"[data-tooltip]\"),\n\tgetContent: \"data-tooltip\",\n\tposition: {x: \"right\", y: \"center\"},\n\toutside: \"x\"\n});\n\nvar SystemActivityToolTips = new jBox(\"Tooltip\", {\n\tgetContent: \"data-tooltip\",\n\tposition: {y: \"bottom\"},\n\tappendTo: $(\"#chainParent\"),\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar nodePos = this.source.closest(\"[data-nodeid]\").position();\n\t\tvar parentPos = this.source.closest(\".nodeActivity\").position();\n\t\tvar nodeHeight = this.source.closest(\"[data-nodeid]\").height();\n\t\t// var nodeWidth = this.source.closest(\"[data-nodeid]\").width();\n\t\tvar tooltipWidth = this.container.parent().width();\n\t\t// var tooltipHeight = this.container.parent().height();\n\n\t\tthis.options.position = {x: targetPos.left + 3 - tooltipWidth /2 , y: targetPos.top + this.target[0].offsetHeight};\n\t}\n});\n\nvar WormholeRouteToolTips = new jBox(\"Tooltip\", {\n\tgetContent: \"data-tooltip\",\n\tposition: {y: \"bottom\"},\n\tappendTo: $(\"#chainParent\"),\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar nodeHeight = this.source.closest(\"[data-nodeid]\").height();\n\t\t// var nodeWidth = this.source.closest(\"[data-nodeid]\").width();\n\t\tvar tooltipWidth = this.container.parent().width();\n\t\t// var tooltipHeight = this.container.parent().height();\n\t\t\n\t\tthis.options.position = {x: targetPos.left + 3 - tooltipWidth /2 , y: targetPos.top + this.target[0].offsetHeight};\n\t}\n});\n\nvar WormholeTypeToolTips = new jBox(\"Tooltip\", {\n\tattach: $(\"#chainMap .whEffect[data-icon]\"),\n\tgetContent: \"data-tooltip\",\n\tposition: {x: \"left\", y: \"center\"},\n\tappendTo: $(\"#chainParent\"),\n\toutside: \"x\",\n\tadjustDistance: 100,\n\tresponsiveWidth: false,\n\treposition: true,\n\trepositionOnOpen: true,\n\tcreateOnInit: true,\n\tonOpen: function() {\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\t\tvar tooltipWidth = this.container.parent().width();\n\n\t\tthis.options.position = {x: targetPos.left - tooltipWidth - 10, y: targetPos.top - 3};\n\t}\n});\n\nvar OccupiedToolTips = new jBox(\"Tooltip\", {\n\tpointer: \"top:-3\",\n\tposition: {x: \"right\", y: \"center\"},\n\tappendTo: $(\"#chainParent\"),\n\toutside: \"x\",\n\tminWidth: 100,\n\tanimation: \"move\",\n\tadjustDistance: 100,\n\tresponsiveWidth: false,\n\treposition: true,\n\trepositionOnOpen: true,\n\trepositionOnContent: true,\n\tcreateOnInit: true,\n\tonOpen: function() {\n\t\tvar tooltip = this;\n\t\tconst nodeElemJ = this.source.closest(\"[data-nodeid]\");\n\t\tvar systemID = nodeElemJ.data(\"nodeid\");\n\t\tvar targetPos = positionRelativeTo(this.target[0], document.getElementById('chainParent'));\n\n\t\tthis.options.position = {x: targetPos.left + this.target[0].offsetWidth, y: targetPos.top - 3};\n\n\t\ttooltip.setContent(\"&nbsp;\");\n\n\t\t$.ajax({\n\t\t\turl: \"occupants.php\",\n\t\t\tdataType: \"JSON\",\n\t\t\tdata: \"systemID=\"+systemID,\n\t\t\tcache: false\n\t\t}).done(function(data) {\n\t\t\tif (data && data.occupants) {\n\t\t\t\tvar chars = \"<table>\";\n\n\t\t\t\t// Sort by characterName\n\t\t\t\tdata.occupants.sort(function(a, b) {\n\t\t\t\t\tif (a.characterName.toLowerCase() < b.characterName.toLowerCase()) return -1;\n\t\t\t\t\tif (a.characterName.toLowerCase() > b.characterName.toLowerCase()) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\n\t\t\t\tfor (var x in data.occupants) {\n\t\t\t\t\tchars += \"<tr><td>\"+data.occupants[x].characterName+\"</td><td style='padding-left: 10px;'>\"+(data.occupants[x].shipTypeName?data.occupants[x].shipTypeName:\"\")+\"</td></tr>\";\n\t\t\t\t}\n\n\t\t\t\tchars += \"</table>\";\n\t\t\t\ttooltip.setContent(chars);\n\t\t\t}\n\t\t});\n\t}\n});\n\n$(\"#chainTabs\").sortable({\n\titems: \"> .tab\",\n\taxis: \"x\",\n\tdelay: 150,\n\ttolerance: \"pointer\",\n\tcontainment: \"parent\",\n\tupdate: function(e, ui) {\n\t\tvar result = $(\"#chainTabs\").sortable(\"toArray\");\n\t\tvar newTabs = [];\n\n\t\tfor (var x in result) {\n\t\t\tnewTabs.push(options.chain.tabs[result[x]]);\n\t\t\t$(\"#chainTabs .tab:eq(\"+x+\")\").attr(\"id\", x);\n\t\t}\n\n\t\toptions.chain.active = $(\".tab.current\").index();\n\t\toptions.chain.tabs = newTabs;\n\t\toptions.save();\n\t}\n});\n\n$(\"#chainTabs\").on(\"click\", \".tab\", function(e) {\n\te.preventDefault();\n\tchain.setActiveTab($(this).hasClass(\"current\") ? null : $(this).index())\n});\n\n$(\"#chainTabs\").on(\"click\", \".closeTab\", function(e) {\n\te.stopPropagation();\n\tvar $tab = $(this).closest(\".tab\");\n\n\t$(\"#dialog-confirm #msg\").html(\"This tab will be removed, are you sure?\");\n\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\tbuttons: {\n\t\t\t\"Remove Tab\": function() {\n\t\t\t\tvar i = $tab.index();\n\n\t\t\t\toptions.chain.active = $(\".tab.current\").index();\n\t\t\t\toptions.chain.tabs.splice(i, 1);\n\t\t\t\toptions.save();\n\n\t\t\t\t$tab.remove();\n\t\t\t\tif ($(\"#chainTabs .tab.current\").length == 0) {\n\t\t\t\t\t$(\"#chainTabs .tab:last\").click();\n\t\t\t\t}\n\n\t\t\t\tfor (var x = 0, l = $(\"#chainTabs .tab\").length; x < l; x++) {\n\t\t\t\t\t$(\"#chainTabs .tab:eq(\"+x+\")\").attr(\"id\", x);\n\t\t\t\t}\n\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t},\n\t\t\tCancel: function() {\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t}\n\t\t}\n\t}).dialog(\"open\");\n});\n\n$(\"#newTab\").on(\"click\", function() {\n\t// check if dialog is open\n\tif (!$(\"#dialog-newTab\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-newTab\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tOK: function() {\n\t\t\t\t\t$(\"#newTab_form\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-newTab .name\").val(viewingSystem).focus();\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").val(viewingSystem);\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").inlinecomplete({source: tripwire.aSigSystems, maxSize: 10, delay: 0});\n\n\t\t\t\t$(\"#newTab_form\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar $tab = $(\"#chainTab .tab\").clone();\n\t\t\t\t\tvar name = $(\"#dialog-newTab .name\").val();\n\t\t\t\t\tvar systemID = tripwire.getSystemIDsByNames($(\"#dialog-newTab .sigSystemsAutocomplete\").val());\n\t\t\t\t\tvar thera = $(\"#tabThera\")[0].checked ? true : false;\n\n\t\t\t\t\tif (!name) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-newTab .name\")}).setContent(\"Must have a name!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!systemID && $(\"#tabType1\")[0].checked) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-newTab .sigSystemsAutocomplete\")}).setContent(\"Must have valid systems (comma separated if multiple)!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if ($(\"#tabType2\")[0].checked) {\n\t\t\t\t\t\tsystemID = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t$tab.attr(\"id\", $(\"#chainTabs .tab\").length).find(\".name\").data(\"tab\", systemID).html(name);\n\t\t\t\t\toptions.chain.tabs.push({systemID: systemID, name: name, evescout: thera});\n\t\t\t\t\toptions.save();\n\n\t\t\t\t\t$(\"#chainTabs\").append($tab);\n\n\t\t\t\t\t$(\"#dialog-newTab\").dialog(\"close\");\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-newTab .sigSystemsAutocomplete\").click(function(e) {\n\t\t\t\t\t$(\"#dialog-newTab #tabType1\").click();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-newTab\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-newTab\").dialog(\"open\");\n\t}\n});\n\n$(\"#chainTabs\").on(\"click\", \".editTab\", function(e) {\n\te.stopPropagation();\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-editTab\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-editTab\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tOK: function() {\n\t\t\t\t\t$(\"#editTab_form\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-editTab .name\").val(options.chain.tabs[options.chain.active].name).focus();\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").val(options.chain.tabs[options.chain.active].systemID != 0 ? lookupMultiple(tripwire.systems, 'name', options.chain.tabs[options.chain.active].systemID) : \"\");\n\t\t\t\toptions.chain.tabs[options.chain.active].systemID != 0 ? $(\"#dialog-editTab #editTabType1\")[0].checked = true : $(\"#dialog-editTab #editTabType2\")[0].checked = true;\n\t\t\t\t$(\"#dialog-editTab #editTabThera\")[0].checked = options.chain.tabs[options.chain.active].evescout;\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").inlinecomplete({source: tripwire.aSigSystems, maxSize: 10, delay: 0});\n\n\t\t\t\t$(\"#editTab_form\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar $tab = $(\"#chainTabs .tab\").eq([options.chain.active]);\n\t\t\t\t\tvar name = $(\"#dialog-editTab .name\").val();\n\t\t\t\t\tvar systemID = tripwire.getSystemIDsByNames($(\"#dialog-editTab .sigSystemsAutocomplete\").val());\n\t\t\t\t\tvar thera = $(\"#editTabThera\")[0].checked ? true : false;\n\n\t\t\t\t\tif (!name) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-editTab .name\")}).setContent(\"Must have a name!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if (!systemID && $(\"#editTabType1\")[0].checked) {\n\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-editTab .sigSystemsAutocomplete\")}).setContent(\"Must have valid systems (comma separated if multiple)!\");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if ($(\"#editTabType2\")[0].checked) {\n\t\t\t\t\t\tsystemID = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t$tab.attr(\"id\", $(\"#chainTabs .tab\").length).find(\".name\").data(\"tab\", systemID).html(name);\n\t\t\t\t\toptions.chain.tabs[options.chain.active] = {systemID: systemID, name: name, evescout: thera};\n\t\t\t\t\toptions.save();\n\t\t\t\t\tchain.redraw();\n\n\t\t\t\t\ttripwire.parse(tripwire.client, \"refresh\");\n\n\t\t\t\t\t//$(\"#chainTabs\").append($tab);\n\n\t\t\t\t\t$(\"#dialog-editTab\").dialog(\"close\");\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-editTab .sigSystemsAutocomplete\").click(function(e) {\n\t\t\t\t\t$(\"#dialog-editTab #editTabType1\").click();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-editTab\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-editTab\").dialog(\"open\");\n\t}\n});\n\n// Signature column context menu\n$(\"#signaturesWidget #sigTable thead\").contextmenu({\n\tdelegate: \"th.sortable\",\n\tmenu: \"#signatureColumnMenu\",\n\tposition: function(event, ui) {\n        return {my: \"left top\", at: \"center\", of: ui.target};\n    },\n\tselect: function(e, ui) {\n\t\tvar col = $(ui.target).parent().parent().children().index($(ui.target).parent()) + 1;\n\n\t\tswitch(col) {\n\t\t\tcase 1:\n\t\t\t\tcolName = \"sigID\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcolName = \"sigType\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcolName = \"sigAge\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tcolName = \"leadsTo\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tcolName = \"sigLife\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tcolName = \"sigMass\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tswitch(ui.cmd) {\n\t\t\tcase \"leftAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"centerAlign rightAlign\").addClass(\"leftAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"leftAlign\";\n\t\t\t\tbreak;\n\t\t\tcase \"centerAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"leftAlign rightAlign\").addClass(\"centerAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"centerAlign\";\n\t\t\t\tbreak;\n\t\t\tcase \"rightAlign\":\n\t\t\t\t$(\"#signaturesWidget #sigTable tbody td:nth-child(\"+ col +\")\").removeClass(\"centerAlign leftAlign\").addClass(\"rightAlign\");\n\t\t\t\toptions.signatures.alignment[colName] = \"rightAlign\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\toptions.save();\n\t},\n\tbeforeOpen: function(e, ui) {\n\t\tvar col = $(ui.target).parent().parent().children().index($(ui.target).parent()) + 1;\n\n\t\tswitch(col) {\n\t\t\tcase 1:\n\t\t\t\tcolName = \"sigID\";\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcolName = \"sigType\";\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcolName = \"sigAge\";\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tcolName = \"leadsTo\";\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tcolName = \"sigLife\";\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tcolName = \"sigMass\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\t$(this).contextmenu(\"enableEntry\", \"leftAlign\", true);\n\t\t$(this).contextmenu(\"enableEntry\", \"centerAlign\", true);\n\t\t$(this).contextmenu(\"enableEntry\", \"rightAlign\", true);\n\n\t\t$(this).contextmenu(\"enableEntry\", options.signatures.alignment[colName], false);\n\t}\n});\n\n// Chain Map Context Menu\n$(\"#chainParent\").contextmenu({\n\tappendTo: \"#chainParent\",\n\tdelegate: \".nodeSystem a\",\n\tposition: function(event, ui) {\n        return {my: \"left top-1\", at: \"right top\", of: ui.target};\n    },\n\tmenu: \"#chainMenu\",\n\tshow: {effect: \"slideDown\", duration: 150},\n\tselect: function(e, ui) {\n\t\tconst nodeElem = $(ui.target[0]).closest(\"[data-nodeid]\");\n\t\tvar id = nodeElem.data(\"nodeid\");\n\t\tvar row = nodeElem.attr(\"id\").replace(\"node\", \"\") -1;\n\n\t\tswitch(ui.cmd) {\n\t\t\tcase \"showInfo\":\n\t\t\t\ttripwire.esi.showInfo(id, options.tracking.active);\n\t\t\t\tbreak;\n\t\t\tcase \"setDest\":\n\t\t\t\ttripwire.esi.setDestination(id, options.tracking.active, true);\n\t\t\t\tbreak;\n\t\t\tcase \"addWay\":\n\t\t\t\ttripwire.esi.setDestination(id, options.tracking.active, false);\n\t\t\t\tbreak;\n\t\t\tcase \"showMap\":\n\t\t\t\t// CCPEVE.showMap(id);\n\t\t\t\tbreak;\n\t\t\tcase \"red\":\n\t\t\t\tnodeElem.hasClass(\"redNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"yellow\":\n\t\t\t\tnodeElem.hasClass(\"yellowNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"green\":\n\t\t\t\tnodeElem.hasClass(\"greenNode\") ? $(this).contextmenu(\"removeFlare\", id, ui) : $(this).contextmenu(\"setFlare\", id, ui.cmd, ui);\n\t\t\t\tbreak;\n\t\t\tcase \"mass\":\n\t\t\t\t$(\"#dialog-mass\").data(\"id\", nodeElem.data(\"sigid\")).data(\"systemID\", id).dialog(\"open\");\n\t\t\t\tbreak;\n\t\t\tcase \"ping\":\n\t\t\t\t$(\"#dialog-ping\").data(\"id\", nodeElem.data(\"sigid\") || null).data(\"systemID\", id).dialog(\"open\");\n\t\t\t\tbreak;\n\t\t\tcase \"collapse\":\n\t\t\t\tvar toggle = options.chain.tabs[options.chain.active] ? ($.inArray(id, options.chain.tabs[options.chain.active].collapsed) == -1 ? true : false) : true;\n\t\t\t\tchain.renderer.collapse(id, toggle);\n\t\t\t\tbreak;\n\t\t\tcase \"makeTab\":\n\t\t\t\tconst existingTabIndex = Object.index(options.chain.tabs, 'systemID', '' + id, false);\n\t\t\t\tif(undefined !== existingTabIndex) {\n\t\t\t\t\tchain.setActiveTab(existingTabIndex);\n\t\t\t\t} else {\n\t\t\t\t\tconst systemName = tripwire.systems[id].name;\n\t\t\t\t\toptions.chain.tabs.push({systemID: '' + id, name: systemName});\n\t\t\t\t\tvar newTab = $(\"#chainTab .tab\").clone();\n\t\t\t\t\tnewTab.attr('id', options.chain.tabs.length - 1).find(\".name\").data(\"tab\", id).html(systemName);\n\t\t\t\t\t$(\"#chainTabs\").append(newTab);\n\t\t\t\t\tchain.setActiveTab(options.chain.tabs.length - 1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\tbeforeOpen: function(e, ui) {\n\t\tvar wormholeID = $(ui.target[0]).closest(\"[data-nodeid]\").data(\"sigid\") || null;\n\t\tvar systemID = $(ui.target[0]).closest(\"[data-nodeid]\").data(\"nodeid\");\n\n\t\t// Add check for k-space\n\t\tif (tripwire.systems[systemID].class || !tripwire.esi.characters[options.tracking.active]) {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDest\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWay\", false);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"showMap\", false);\n\t\t} else {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"setDest\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"addWay\", true);\n\t\t\t$(this).contextmenu(\"enableEntry\", \"showMap\", false);\n\t\t}\n\t\t\n\t\t// Add check for in-sig\n\t\tif (wormholeID) {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"mass\", true);\n\t\t} else {\n\t\t\t$(this).contextmenu(\"enableEntry\", \"mass\", false);\n\t\t}\n\t\t\n\t\t// Add check for tab validity\n\t\tconst existingTab = Object.find(options.chain.tabs, 'systemID', '' + systemID, false);\n\t\t$('#makeTabMenuItem').text(existingTab ? 'View Tab' : 'Make Tab' );\n\t},\n\tcreate: function(e, ui) {\n\t\t// Fix some bad CSS from jQuery Position\n\t\t$(this).find(\".ui-front\").css(\"width\", \"10em\");\n\t\t$(this).find(\".ui-front\").css(\"position\", \"\");\n\n\t\t$(\"#dialog-mass\").dialog({\n\t\t\tautoOpen: false,\n\t\t\twidth: \"auto\",\n\t\t\theight: \"auto\",\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tClose: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\tvar wormholeID = $(this).data(\"id\");\n\t\t\t\tvar systemID = $(this).data(\"systemID\");\n\t\t\t\tvar wormhole = tripwire.client.wormholes[wormholeID];\n\t\t\t\tvar signature = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\tvar otherSignature = tripwire.client.signatures[wormhole.secondaryID];\n\n\t\t\t\t$(\"#dialog-mass\").dialog(\"option\", \"title\", \"From \"+tripwire.systems[signature.systemID].name+\" to \"+tripwire.systems[otherSignature.systemID].name);\n\n\t\t\t\t$(\"#dialog-mass #massTable tbody tr\").remove();\n\n\t\t\t\tvar payload = {wormholeID: wormhole.id};\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"mass.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: payload,\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(data) {\n\t\t\t\t\tif (data && data.jumps) {\n                        var totalMass = 0;\n\t\t\t\t\t\tfor (x in data.jumps) {\n\t\t\t\t\t\t\tconst jumpMass = parseFloat(appData.mass[data.jumps[x].shipTypeID].mass);\n                            totalMass += jumpMass;\n\t\t\t\t\t\t\t$(\"#dialog-mass #massTable tbody\").append(\"<tr><td>\"+data.jumps[x].characterName+\"</td><td>\"+(data.jumps[x].toID == systemID ? \"In\" : \"Return\")+\"</td><td>\"+appData.mass[data.jumps[x].shipTypeID].typeName+\"</td><td>\"+Intl.NumberFormat().format(jumpMass)+\"Kg</td><td>\"+data.jumps[x].time+\"</td></tr>\");\n\t\t\t\t\t\t}\n                        $(\"#dialog-mass #massTable tbody\").append(\"<tr><td></td><td></td><td></td><th>\"+ Intl.NumberFormat().format(totalMass) +\"Kg</th><td></td></tr>\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t$.moogle.contextmenu.prototype.setFlare = function(systemID, flare, ui) {\n\t\t\tvar data = {\"systemID\": systemID, \"flare\": flare};\n\n\t\t\t$.ajax({\n\t\t\t\turl: \"flares.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: data,\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.result) {\n\t\t\t\t\t// $(ui.target[0]).closest(\"td\").removeClass(\"redNode yellowNode greenNode\").addClass(flare+\"Node\");\n\n\t\t\t\t\tchain.data.flares.flares.push({systemID: systemID, flare: flare, time: null});\n\t\t\t\t\tchain.flares(chain.data.flares);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$.moogle.contextmenu.prototype.removeFlare = function(systemID, ui) {\n\t\t\tvar data = {\"systemID\": systemID};\n\n\t\t\t$.ajax({\n\t\t\t\turl: \"flares.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: data,\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.result) {\n\t\t\t\t\t// $(ui.target[0]).closest(\"td\").removeClass(\"redNode yellowNode greenNode\");\n\n\t\t\t\t\tchain.data.flares.flares.splice(Object.index(chain.data.flares.flares, \"systemID\", systemID), 1);\n\t\t\t\t\tchain.flares(chain.data.flares);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\n/** Format a signature ID like abc123 as ABC-123 for user display */\nfunction formatSignatureID(signatureID) {\n\treturn (!signatureID) ? '???-###' :\n\t\t(signatureID.length >= 3 ? signatureID.substring(0, 3).toUpperCase() : '') + \"-\" + (signatureID.length == 6 ? signatureID.substring(3, 6) : \"###\");\n}\n\n// Used to generate eve-survival guide link\nfunction linkSig(sigName) {\n\tvar wormholeSignatures = [\n\t\t// Ore sites\n\t\t\"Average Frontier Deposit\",\n\t\t\"Unexceptional Frontier Deposit\",\n\t\t\"Common Perimeter Deposit\",\n\t\t\"Exceptional Core Deposit\",\n\t\t\"Infrequent Core Deposit\",\n\t\t\"Unusual Core Deposit\",\n\t\t\"Rarified Core Deposit\",\n\t\t\"Isolated Core Deposit\",\n\t\t\"Ordinary Permiter Deposit\",\n\t\t\"Uncommon Core Deposit\",\n\n\t\t// Gas Sites\n\t\t\"Barren Perimeter Reservoir\",\n\t\t\"Minor Perimeter Reservoir\",\n\t\t\"Ordinary Perimeter Reservoir\",\n\t\t\"Sizeable Perimeter Reservoir\",\n\t\t\"Token Perimeter Reservoir\",\n\t\t\"Bountiful Frontier Reservoir\",\n\t\t\"Vast Frontier Reservoir\",\n\t\t\"Instrumental Core Reservoir\",\n\t\t\"Vital Core Reservoir\",\n\n\t\t// Class 1\n\t\t\"Perimeter Ambush Point\",\n\t\t\"Perimeter Camp\",\n\t\t\"Phase Catalyst Node\",\n\t\t\"The Line\",\n\t\t\"Forgotten Perimeter Coronation Platform\",\n\t\t\"Forgotten Perimeter Power Array\",\n\t\t\"Unsecured Perimeter Amplifier\",\n\t\t\"Unsecured Perimeter Information Center\",\n\n\t\t// Class 2\n\t\t\"Perimeter Checkpoint\",\n\t\t\"Perimeter Hangar\",\n\t\t\"The Ruins of Enclave Cohort 27\",\n\t\t\"Sleeper Data Sanctuary\",\n\t\t\"Forgotten Perimeter Gateway\",\n\t\t\"Forgotten Perimeter Habitation Coils\",\n\t\t\"Unsecured Perimeter Comms Relay\",\n\t\t\"Unsecured Perimeter Transponder Farm\",\n\n\t\t// Class 3\n\t\t\"Fortification Frontier Stronghold\",\n\t\t\"Outpost Frontier Stronghold\",\n\t\t\"Solar Cell\",\n\t\t\"The Oruze Construct\",\n\t\t\"Forgotten Frontier Quarantine Outpost\",\n\t\t\"Forgotten Frontier Recursive Depot\",\n\t\t\"Unsecured Frontier Database\",\n\t\t\"Unsecured Frontier Receiver\",\n\n\t\t// Class 4\n\t\t\"Frontier Barracks\",\n\t\t\"Frontier Command Post\",\n\t\t\"Integrated Terminus\",\n\t\t\"Sleeper Information Sanctum\",\n\t\t\"Forgotten Frontier Conversion Module\",\n\t\t\"Forgotten Frontier Evacuation Center\",\n\t\t\"Unsecured Frontier Digital Nexus\",\n\t\t\"Unsecured Frontier Trinary Hub\",\n\n\t\t// Class 5\n\t\t\"Core Garrison\",\n\t\t\"Core Stronghold\",\n\t\t\"Oruze Osobnyk\",\n\t\t\"Quarantine Area\",\n\t\t\"Forgotten Core Data Field\",\n\t\t\"Forgotten Core Information Pen\",\n\t\t\"Unsecured Frontier Enclave Relay\",\n\t\t\"Unsecured Frontier Server Bank\",\n\n\t\t// Class 6\n\t\t\"Core Citadel\",\n\t\t\"Core Bastion\",\n\t\t\"Strange Energy Readings\",\n\t\t\"The Mirror\",\n\t\t\"Forgotten Core Assembly Hall\",\n\t\t\"Forgotten Core Circuitry Disassembler\",\n\t\t\"Unsecured Core Backup Array\",\n\t\t\"Unsecured Core Emergence\"\n\t];\n\n\tif (wormholeSignatures.indexOf(sigName) > -1) {\n\t\treturn '<a href=\"http://eve-survival.org/wikka.php?wakka='+sigName.replace(/ /g, '')+'\" target=\"_blank\" class=\"siteLink\">'+sigName+'</a>';\n\t}\n\n\treturn sigName;\n}\n\n// Custom inlinecomplete + dropdown input\n$.widget(\"custom.inlinecomplete\", $.ui.autocomplete, {\n\t_create: function() {\n\t\tif (!this.element.is(\"input\")) {\n\t\t\tthis._selectInit();\n\t\t}\n\n\t\t// Invoke the parent function\n\t\treturn this._super();\n\t},\n\t_value: function() {\n\t\t// Invoke the parent function\n\t\tvar originalReturn = this._superApply(arguments);\n\n\t\tthis.element.change();\n\n\t\treturn originalReturn;\n\t},\n\t_suggest: function(items) {\n\t\t// if (this.element.val() != items[0].value) {\n\t\t\t// this.element.val(items[0].value.substr(0, this.element.val().length));\n\t\t// }\n\n\t\t// Invoke the parent function\n\t\treturn this._super(items);\n\t},\n\t_initSource: function() {\n\t\tif ($.isArray(this.options.source)) {\n\t\t\tthis.source = function(request, response) {\n\t\t\t\tvar matcher = new RegExp(\"^\" + $.ui.autocomplete.escapeRegex(request.term), \"i\");\n\t\t\t\tvar results = new Array(); // results array\n\t\t\t\tvar data = this.options.source;\n\t\t\t\tvar maxSize = this.options.maxSize || 25; // maximum result size\n\t\t\t\t// simple loop for the options\n\t\t\t\tfor (var i = 0, l = data.length; i < l; i++) {\n\t\t\t\t\tif (matcher.test(data[i])) {\n\t\t\t\t\t\tresults.push(data[i]);\n\n\t\t\t\t\t\tif (maxSize && results.length > maxSize) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t // send response\n\t\t\t\t response(results);\n\t\t\t}\n\t\t} else {\n\t\t\t// Invoke the parent function\n\t\t\treturn this._super();\n\t\t}\n\t},\n\t_close: function(event) {\n\t\tthis.options.source = this.options.input_source ? this.options.input_source : this.options.source;\n\n\t\t// Invoke the parent function\n\t\treturn this._super(event);\n\t},\n\taddToSelect: function(value) {\n\t\tthis.options.select_added_value = value;\n\t\tthis.options.select_source.unshift(value);\n\t},\n\tremoveFromSelect: function(value) {\n\t\tif (value) {\n\t\t\tthis.options.select_source.splice(value, 1);\n\t\t} else if (this.options.select_added_value) {\n\t\t\tthis.options.select_source.splice(this.options.select_added_value, 1);\n\t\t}\n\t\tthis.options.select_added_value = null;\n\t},\n\t_selectInit: function() {\n\t\tthis.element.addClass(\"custom-combobox\");\n\t\tthis.wrapper = this.element;\n\t\tthis.element = this.wrapper.find(\"input:first\");\n\t\tthis.select = this.wrapper.find(\"select:first\").remove();\n\n\t\tthis.options.input_source = this.options.source;\n\t\tthis.options.select_source = this.select.children(\"option[value!='']\").map(function() {\n            return $.trim(this.text);\n        }).toArray();\n\n\t\tthis._createShowAllButton();\n\t},\n\t_createShowAllButton: function() {\n        var that = this,\n          wasOpen = false;\n\n        $(\"<a>\")\n\t\t\t.attr(\"tabIndex\", that.element.prop(\"tabindex\"))\n\t\t\t.attr(\"title\", \"\")\n\t\t\t.appendTo(that.wrapper)\n\t\t\t.button({icons: {primary: \"ui-icon-triangle-1-s\"}, text: false})\n\t\t\t.removeClass(\"ui-corner-all\")\n\t\t\t.addClass(\"custom-combobox-toggle ui-corner-right\")\n\t\t\t.on(\"mousedown\", function() {\n\t\t\t\twasOpen = that.widget().is(\":visible\");\n\t\t\t})\n\t\t\t.on(\"click\", function() {\n\t\t\t\tthat.element.trigger(\"focus\");\n\n\t\t\t\t// Close if already visible\n\t\t\t\tif (wasOpen) {\n\t\t\t\t  return;\n\t\t\t\t}\n\n\t\t\t\t// Pass empty string as value to search for, displaying all results\n\t\t\t\tthat.options.source = that.options.select_source;\n\t\t\t\tthat._search(\"\");\n\t\t\t});\n\t},\n});\n\n// Initialize tablesorter plugin on signaturesWidget table\n$(\"#sigTable\").tablesorter({\n\tsortReset: true,\n\twidgets: ['saveSort'],\n\ttextExtraction: {\n\t\t2: function(node) { return $(node).find(\"span\").data(\"age\"); }\n\t}\n});\n\n// Highlight signaturesWidget tr on click\n$(\"#sigTable tbody\").on(\"click\", \"tr\", function(e) {\n\tif (e.metaKey || e.ctrlKey) {\n\t\t// ctrl or cmd key\n\t\t$(this).toggleClass(\"selected\");\n\t} else if (e.shiftKey) {\n\t\t// shift key\n\t\t$(this).addClass(\"selected\");\n\t\t$(\"#sigTable tbody tr.selected:first\").nextUntil(\"#sigTable tbody tr.selected:last\").addBack().add(\"#sigTable tbody tr.selected:last\").addClass(\"selected\");\n\t} else {\n\t\t$(\"#sigTable tbody tr.selected\").removeClass(\"selected\");\n\t\t$(this).addClass(\"selected\");\n\t}\n});\n\n// Un-Highlight signaturesWidget tr on clicking outside\n$(document).click(function(e) {\n    if(!$(e.target).closest('#sigTable tbody').length && !$(e.target).closest('#edit-signature').length && !$(e.target).closest('#delete-signature').length) {\n\t\t$(\"#sigTable tbody tr.selected\").removeClass(\"selected\");\n    }\n});\n\n// Monitor custom 'classchange' event\n$(\"#sigTable tbody\").on(\"classchange\", \"tr\", function(e, className) {\n\t// Trigger signaturesWidget selected row change custom event\n\tif (className === \"selected\") {\n\t\t$(\"#signaturesWidget\").trigger(\"selected:change\");\n\t}\n});\n\n// Update signaturesWidget based on .selected rows change\n$(\"#signaturesWidget\").on(\"selected:change\", function() {\n\t// Enable/Disable delete icon\n\tif ($(\"#sigTable tr.selected\").length === 0) {\n\t\t$(\"#signaturesWidget #delete-signature\").addClass(\"disabled\");\n\t} else {\n\t\t$(\"#signaturesWidget #delete-signature\").removeClass(\"disabled\");\n\t}\n\n\t// Enable/Disable edit icon\n\tif ($(\"#sigTable tr.selected\").length === 1) {\n\t\t$(\"#signaturesWidget #edit-signature\").removeClass(\"disabled\");\n\t} else {\n\t\t$(\"#signaturesWidget #edit-signature\").addClass(\"disabled\");\n\t}\n})\n\n$(\"#dialog-error\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tOk: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t},\n\tcreate: function() {\n\t\t$(this).dialog(\"option\", \"show\", {effect: \"shake\", duration: 150, easing: \"easeOutElastic\"});\n\t}\n});\n\n$(\"#dialog-msg\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tOk: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t}\n});\n\n$(\"#dialog-confirm\").dialog({\n\tautoOpen: false,\n\tresizable: false,\n\tminHeight: 0,\n\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\tbuttons: {\n\t\tCancel: function() {\n\t\t\t$(this).dialog(\"close\");\n\t\t}\n\t}\n});\n\nif (window.location.href.indexOf(\"galileo\") != -1) {\n\tNotify.trigger(\"This is the test version of Tripwire.<br/>Please use <a href='https://tripwire.cloud-things.com'>Tripwire</a>\")\n}\n","const systemAnalysis = new function() {\n\tconst mutators = [];\n\tthis.addMutator = function(m) { mutators.push(m); }\n\t\n\t/** Extract attributes of the system, and allow mutators to add/modify them.\n\t\tOptionally, pass in a system object */\n\tthis.analyse = function(systemID, system) {\n\t\tif(!system) { system = tripwire.systems[systemID]; }\n\t\tif(!system) { system = getDummySystem(systemID); }\n\t\tconst r = Object.assign({}, system);\n\t\t\n\t\t// Defaults or saved original values\n\t\tr.baseSecurity = 1 * system.security;\n\t\tr.pathSymbol = '■';\n\t\tr.systemTypeModifiers = [];\t\t\n\t\t\n\t\tmutators.forEach(function(m) { m.mutate(r, systemID); });\n\t\t\n\t\t// Calculated final values\n\t\tr.systemTypeClass = r.class ? 'wh class-' + r.class :\n\t\t\tr.factionID == 500026 ? 'triglavian' :\n\t\t\tr.security >= 0.45 ? 'hisec' :\n\t\t\tr.security > 0.0 ? 'lowsec' :\n\t\t\tr.security <= 0.0 ? 'nullsec' :\n\t\t\t'unknown';\n\t\tr.systemTypeName = r.class ? 'C' + r.class :\n\t\t\tr.factionID == 500026 ? 'Trig' :\n\t\t\tr.baseSecurity >= 0.45 ? 'HS' :\n\t\t\tr.baseSecurity > 0.0 ? 'LS' :\n\t\t\tr.baseSecurity <= 0.0 ? 'NS' :\n\t\t\t' ';\n\t\tr.effectClass = \n\t\t\tr.effect === 'Black Hole' ? 'blackhole' :\n\t\t\tr.effect === 'Cataclysmic Variable' ? 'cataclysmic-variable' :\n\t\t\tr.effect === 'Magnetar' ? 'magnetar' :\n\t\t\tr.effect === 'Pulsar' ? 'pulsar' :\n\t\t\tr.effect === 'Red Giant' ? 'red-giant' :\n\t\t\tr.effect === 'Wolf-Rayet Star' ? 'wolf-rayet' :\n\t\t\tundefined;\n\t\t\t\n\t\treturn r;\n\t};\n\t\n\t/** Create a dummy system object for fake IDs like 'Null-Sec', 'Class-5' etc */\n\tfunction getDummySystem(systemID) {\n\t\tconst leadsToPointer = typeof(systemID) === \"string\" && systemID.indexOf(\"|\") >= 0 ? tripwire.aSigSystems[systemID.substring(0, systemID.indexOf(\"|\"))] : null;\n\t\tconst nodeClass = \n\t\t\tleadsToPointer && leadsToPointer.substring(0, 6) == 'Class-' ? 1 * leadsToPointer.substring(6) :\n\t\t\tundefined;\n\t\tconst nodeSecurity = \n\t\t\tleadsToPointer == \"High-Sec\" ? 0.8 :\n\t\t\tleadsToPointer == \"Low-Sec\" ? 0.4 :\n\t\t\tleadsToPointer == \"Null-Sec\" ? -0.1 :\n\t\t\tundefined;\n\t\tconst nodeFaction = \n\t\t\tleadsToPointer == \"Triglavian\" ? 500026 :\n\t\t\tundefined;\n\t\t\n\t\treturn { security: nodeSecurity, class: nodeClass, factionID: nodeFaction };\n\t}\n}","const mutator_favourite = new _FavouriteMutator();\nsystemAnalysis.addMutator(mutator_favourite);\n\nfunction _FavouriteMutator() {\n\tconst _this = this;\n\n\tthis.mutate = function(system, systemID) {\n\t\tif(options.favorites.indexOf(systemID * 1) >= 0) {\n\t\t\tsystem.pathSymbol = '★';\n\t\t\tsystem.systemTypeModifiers.push('<span class=\"favorite active\" data-icon=\"star\"></span>');\t\t// star added by CSS\n\t\t}\n\t}\n}","const invasions = new _Invasions();\nsystemAnalysis.addMutator(invasions);\n\nfunction _Invasions() {\n\tconst _this = this;\n\tconst pathSymbolMap = {\n\t\tstellar_reconnaissance: '◆',\n\t\t\n\t\ttriglavian_minor_victory: '▽',\n\t\tescalating_liminality: '▽',\n\t\tfinal_liminality: '▼',\n\t\t\n\t\tedencom_minor_victory: '△',\n\t\tredoubt: '△', bulwark: '△',\n\t\tfortress: '▲',\n\t};\n\tconst textMap = {\n\t\tstellar_reconnaissance: 'Stellar Reconnaissance',\n\t\t\n\t\ttriglavian_minor_victory: 'Triglavian Minor Victory',\n\t\tescalating_liminality: 'Escalating Liminality',\n\t\tfinal_liminality: 'Final Liminality',\n\t\t\n\t\tedencom_minor_victory: 'EDENCOM Minor Victory',\n\t\tredoubt: 'Redoubt',\n\t\tbulwark: 'Bulwark',\n\t\tfortress: 'EDENCOM Fortress',\n\t}\n\tconst data = [{\"system_id\":30003088,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-10-04T12:29:02.888Z\",\"system_name\":\"Oyonata\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003894,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-10-01T18:28:09.852Z\",\"system_name\":\"Sabusi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004302,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T15:36:50.977Z\",\"system_name\":\"Omigiav\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003539,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T14:11:30.759Z\",\"system_name\":\"Miakie\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005074,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T14:02:33.042Z\",\"system_name\":\"Daran\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003570,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-30T13:47:01.992Z\",\"system_name\":\"Elore\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003573,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:38:24.368Z\",\"system_name\":\"Pertnineere\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003463,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:38:14.299Z\",\"system_name\":\"Erlendur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002079,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-28T15:37:20.058Z\",\"system_name\":\"Krirald\",\"system_security\":\"0.2\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002652,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-28T15:36:53.719Z\",\"system_name\":\"Ala\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045331,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-28T15:36:28.616Z\",\"system_name\":\"Vaaralen\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003788,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-26T12:44:03.049Z\",\"system_name\":\"Intaki\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002724,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-25T00:51:28.251Z\",\"system_name\":\"Assiettes\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002999,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-24T12:03:23.037Z\",\"system_name\":\"Shastal\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000102,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-23T22:22:21.093Z\",\"system_name\":\"Dysa\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003919,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-22T10:22:11.970Z\",\"system_name\":\"Ashkoo\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004978,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-22T10:21:30.195Z\",\"system_name\":\"Pemene\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004287,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:25:28.863Z\",\"system_name\":\"Esubara\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002051,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:25:09.478Z\",\"system_name\":\"Anher\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003823,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-20T11:24:54.777Z\",\"system_name\":\"Kenninck\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001400,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-18T14:03:33.048Z\",\"system_name\":\"Litiura\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005251,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-18T09:42:27.550Z\",\"system_name\":\"Asanot\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005267,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-17T11:18:57.960Z\",\"system_name\":\"Bherdasopt\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002411,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-09-17T00:30:42.544Z\",\"system_name\":\"Skarkon\",\"system_security\":\"0.1\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003587,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-15T01:16:50.021Z\",\"system_name\":\"Harner\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003904,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T16:54:07.359Z\",\"system_name\":\"Col\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005209,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T16:53:54.556Z\",\"system_name\":\"Sibe\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004103,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-14T13:40:36.727Z\",\"system_name\":\"Kothe\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005219,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-13T09:34:00.331Z\",\"system_name\":\"Sigga\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002755,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-12T20:51:38.354Z\",\"system_name\":\"Usi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003824,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-11T08:28:52.435Z\",\"system_name\":\"Archavoinet\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002239,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-11T08:28:42.669Z\",\"system_name\":\"Rammi\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005005,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-09-10T21:09:12.196Z\",\"system_name\":\"Ignebaener\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000021,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.8\",\"updated_at\":\"2020-09-09T21:16:25.577Z\",\"system_name\":\"Kuharah\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000118,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-09T08:08:17.988Z\",\"system_name\":\"Uanzin\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003794,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T23:26:42.297Z\",\"system_name\":\"Stacmon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003927,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T22:18:47.862Z\",\"system_name\":\"Zahefeus\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000109,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-07T20:54:30.351Z\",\"system_name\":\"Berta\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002797,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-09-06T13:33:29.649Z\",\"system_name\":\"Kaunokka\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30031392,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-09-06T13:33:15.544Z\",\"system_name\":\"Komo\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004090,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-06T06:22:50.377Z\",\"system_name\":\"Aband\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000060,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-06T01:54:13.794Z\",\"system_name\":\"Janus\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003548,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-05T17:05:22.429Z\",\"system_name\":\"Barira\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000160,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T23:48:55.626Z\",\"system_name\":\"Reisen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004999,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T15:38:27.450Z\",\"system_name\":\"Ladistier\",\"system_security\":\"0.3\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000113,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-04T07:07:27.574Z\",\"system_name\":\"Astabih\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004295,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-09-02T18:09:55.446Z\",\"system_name\":\"Keba\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001413,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.2\",\"updated_at\":\"2020-09-02T08:11:42.869Z\",\"system_name\":\"Nani\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002386,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-09-01T08:04:35.922Z\",\"system_name\":\"Gelfiven\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30004973,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T21:17:02.227Z\",\"system_name\":\"Caslemon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004231,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T20:32:52.884Z\",\"system_name\":\"Shakasi\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004284,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T20:32:43.772Z\",\"system_name\":\"Defsunun\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002266,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-31T10:38:02.368Z\",\"system_name\":\"Ahmak\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003932,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-29T23:12:29.549Z\",\"system_name\":\"Timudan\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004254,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-28T16:43:28.986Z\",\"system_name\":\"Fihrneh\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004244,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-28T07:55:35.187Z\",\"system_name\":\"Onanam\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002513,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-27T20:59:21.817Z\",\"system_name\":\"Dammalin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30000206,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-08-27T14:06:44.066Z\",\"system_name\":\"Wirashoda\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002048,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-27T11:14:57.970Z\",\"system_name\":\"Bei\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003090,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-26T23:04:35.948Z\",\"system_name\":\"Saidusairos\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003478,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-26T00:06:02.331Z\",\"system_name\":\"Basan\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004289,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-25T11:33:32.949Z\",\"system_name\":\"Vaini\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30045345,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T21:16:26.292Z\",\"system_name\":\"Hirri\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001358,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T08:44:18.165Z\",\"system_name\":\"Ossa\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003061,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-24T07:23:55.183Z\",\"system_name\":\"Mormelot\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30040141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-08-23T11:05:21.929Z\",\"system_name\":\"Urhinichi\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003078,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T18:47:39.976Z\",\"system_name\":\"Erkinen\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002530,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T15:09:00.523Z\",\"system_name\":\"Avesber\",\"system_security\":\"0.8\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003900,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-22T07:50:34.044Z\",\"system_name\":\"Ham\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002644,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-21T08:26:40.788Z\",\"system_name\":\"Ambeke\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001401,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-21T00:44:17.584Z\",\"system_name\":\"Nonni\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30045328,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.7\",\"updated_at\":\"2020-08-20T14:35:34.268Z\",\"system_name\":\"Ahtila\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003480,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-20T11:19:04.711Z\",\"system_name\":\"Amod\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004141,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-20T01:50:23.539Z\",\"system_name\":\"Hiremir\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002770,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.1\",\"updated_at\":\"2020-08-18T14:53:00.972Z\",\"system_name\":\"Tunudan\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003504,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.7\",\"updated_at\":\"2020-08-18T14:46:27.787Z\",\"system_name\":\"Niarja\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002253,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-18T09:31:28.183Z\",\"system_name\":\"Arshat\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002737,\"status\":\"final_liminality\",\"derived_security_status\":\"0.0\",\"updated_at\":\"2020-08-16T21:29:53.121Z\",\"system_name\":\"Konola\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003398,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-16T17:38:55.577Z\",\"system_name\":\"Anbald\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003490,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-15T20:27:08.919Z\",\"system_name\":\"Khopa\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001696,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-14T06:57:31.468Z\",\"system_name\":\"Iro\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000192,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-08-14T01:51:38.839Z\",\"system_name\":\"Otanuomi\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002772,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T11:24:31.714Z\",\"system_name\":\"Rairomon\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005284,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T11:24:24.229Z\",\"system_name\":\"Promised Land\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30045354,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-13T07:37:02.262Z\",\"system_name\":\"Reitsato\",\"system_security\":\"0.2\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005222,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-12T17:58:16.210Z\",\"system_name\":\"Serren\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003556,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-10T23:13:52.643Z\",\"system_name\":\"Arton\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005086,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-10T06:50:08.222Z\",\"system_name\":\"Arza\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000157,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.3\",\"updated_at\":\"2020-08-10T06:49:46.743Z\",\"system_name\":\"Otela\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003918,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-09T15:49:15.024Z\",\"system_name\":\"Hakana\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002385,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-09T00:34:34.831Z\",\"system_name\":\"Teonusude\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002704,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-07T22:29:26.455Z\",\"system_name\":\"Adrallezoen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001372,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-08-07T19:29:54.183Z\",\"system_name\":\"Kino\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003908,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-07T07:00:48.775Z\",\"system_name\":\"Bashyam\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000012,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-06T09:30:28.248Z\",\"system_name\":\"Asabona\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005058,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T21:45:44.898Z\",\"system_name\":\"Neesher\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004305,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T21:24:35.293Z\",\"system_name\":\"Esaeel\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003883,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T20:44:57.150Z\",\"system_name\":\"Keberz\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003481,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-05T07:41:10.729Z\",\"system_name\":\"Unefsih\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003397,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-04T16:45:17.206Z\",\"system_name\":\"Bongveber\",\"system_security\":\"0.9\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002702,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-08-04T11:15:48.842Z\",\"system_name\":\"Archee\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003460,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-03T22:03:14.542Z\",\"system_name\":\"Offikatlin\",\"system_security\":\"0.4\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30004084,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-02T17:58:04.736Z\",\"system_name\":\"Ghesis\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003574,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T20:28:35.755Z\",\"system_name\":\"Boystin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005213,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T20:20:33.816Z\",\"system_name\":\"Hesarid\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005308,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T10:42:51.414Z\",\"system_name\":\"Jufvitte\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002665,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T02:12:09.248Z\",\"system_name\":\"Misneden\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000188,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-08-01T02:11:39.811Z\",\"system_name\":\"Hentogaira\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002557,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-31T18:00:06.264Z\",\"system_name\":\"Atgur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003058,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-29T09:14:47.194Z\",\"system_name\":\"Olide\",\"system_security\":\"0.7\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005334,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-28T23:28:39.525Z\",\"system_name\":\"Tierijev\",\"system_security\":\"0.8\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003046,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.5\",\"updated_at\":\"2020-07-28T14:20:51.847Z\",\"system_name\":\"Angymonne\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003514,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-27T18:47:08.094Z\",\"system_name\":\"Yeeramoun\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002760,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-26T11:44:38.056Z\",\"system_name\":\"Manjonakko\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002506,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-23T18:07:27.688Z\",\"system_name\":\"Osoggur\",\"system_security\":\"0.5\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30005052,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-21T17:37:44.002Z\",\"system_name\":\"Soumi\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003931,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-20T16:54:45.398Z\",\"system_name\":\"Sassecho\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005255,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-20T09:34:48.342Z\",\"system_name\":\"Saphthar\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30020141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.9\",\"updated_at\":\"2020-07-19T11:16:57.684Z\",\"system_name\":\"Senda\",\"system_security\":\"0.9\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002795,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-18T01:59:01.724Z\",\"system_name\":\"Oshaima\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30000004,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-17T22:26:00.294Z\",\"system_name\":\"Jark\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004263,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-15T21:20:01.593Z\",\"system_name\":\"Feshur\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000062,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-15T15:49:03.146Z\",\"system_name\":\"Iosantin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002241,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-13T01:22:41.989Z\",\"system_name\":\"Rimbah\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004981,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-12T11:24:07.265Z\",\"system_name\":\"Actee\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002242,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-10T19:06:05.853Z\",\"system_name\":\"Mamenkhanar\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003558,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-10T13:51:31.889Z\",\"system_name\":\"Madimal\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001376,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-09T16:04:24.621Z\",\"system_name\":\"Nourvukaiken\",\"system_security\":\"0.8\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30045329,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.4\",\"updated_at\":\"2020-07-08T10:41:47.622Z\",\"system_name\":\"Ichoriya\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30005252,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-07-07T23:49:41.522Z\",\"system_name\":\"Anzalaisio\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004257,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-07T17:15:51.416Z\",\"system_name\":\"Hakatiz\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004108,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-05T01:56:57.535Z\",\"system_name\":\"Chaneya\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000048,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-03T15:11:36.506Z\",\"system_name\":\"Ihal\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003482,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-02T20:56:41.226Z\",\"system_name\":\"Mista\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002225,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.8\",\"updated_at\":\"2020-07-01T14:11:27.451Z\",\"system_name\":\"Harva\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005263,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-01T13:43:12.530Z\",\"system_name\":\"Mozzidit\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005066,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-07-01T06:43:25.457Z\",\"system_name\":\"Kerying\",\"system_security\":\"0.2\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002986,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-28T17:43:41.096Z\",\"system_name\":\"Mendori\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001381,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.1\",\"updated_at\":\"2020-06-27T00:02:01.315Z\",\"system_name\":\"Arvasaras\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001447,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-25T02:19:25.407Z\",\"system_name\":\"Taisy\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002700,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-24T13:40:05.882Z\",\"system_name\":\"Bawilan\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001390,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-24T09:42:32.895Z\",\"system_name\":\"Pakkonen\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003076,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-23T09:02:12.462Z\",\"system_name\":\"Gammel\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003050,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-23T06:32:08.087Z\",\"system_name\":\"Odixie\",\"system_security\":\"0.6\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000163,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-22T19:28:52.910Z\",\"system_name\":\"Akora\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003073,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-21T07:12:31.404Z\",\"system_name\":\"Netsalakka\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001391,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-20T21:12:20.299Z\",\"system_name\":\"Piekura\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30002771,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-20T00:41:47.611Z\",\"system_name\":\"Kulelen\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30000005,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-19T14:36:55.956Z\",\"system_name\":\"Sasta\",\"system_security\":\"0.8\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005330,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-19T13:21:23.145Z\",\"system_name\":\"Arraron\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30000205,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-18T22:06:13.302Z\",\"system_name\":\"Obe\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003856,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-18T12:10:11.496Z\",\"system_name\":\"Athounon\",\"system_security\":\"0.1\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004250,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T11:42:53.830Z\",\"system_name\":\"Chibi\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004268,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T08:56:42.286Z\",\"system_name\":\"Shenda\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005236,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-17T07:25:26.811Z\",\"system_name\":\"Noranim\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003829,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T22:17:39.177Z\",\"system_name\":\"Renarelle\",\"system_security\":\"0.3\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30005034,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T21:32:34.651Z\",\"system_name\":\"Bridi\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003074,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-16T21:31:28.344Z\",\"system_name\":\"Sasiekko\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003392,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-15T19:26:39.709Z\",\"system_name\":\"Eygfe\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30001445,\"status\":\"final_liminality\",\"derived_security_status\":\"0.0\",\"updated_at\":\"2020-06-15T03:38:02.163Z\",\"system_name\":\"Nalvula\",\"system_security\":\"0.4\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30010141,\"status\":\"final_liminality\",\"derived_security_status\":\"-0.2\",\"updated_at\":\"2020-06-14T01:12:53.428Z\",\"system_name\":\"Sakenta\",\"system_security\":\"1.0\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003809,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-13T20:25:21.879Z\",\"system_name\":\"Brellystier\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001718,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-13T05:28:45.485Z\",\"system_name\":\"Paye\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004256,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-11T13:37:54.195Z\",\"system_name\":\"Edilkam\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002645,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-11T00:28:57.560Z\",\"system_name\":\"Carrou\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045338,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T22:28:25.084Z\",\"system_name\":\"Hikkoken\",\"system_security\":\"0.3\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30004301,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T16:44:37.396Z\",\"system_name\":\"Anath\",\"system_security\":\"0.1\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002575,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-10T05:41:23.824Z\",\"system_name\":\"Sotrenzur\",\"system_security\":\"0.3\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30003515,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T06:49:36.637Z\",\"system_name\":\"Anila\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004100,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T03:04:19.196Z\",\"system_name\":\"Halibai\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002397,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-08T01:10:38.296Z\",\"system_name\":\"Horaka\",\"system_security\":\"0.6\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30002662,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-07T11:22:11.884Z\",\"system_name\":\"Pulin\",\"system_security\":\"0.5\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30001383,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-07T06:16:44.145Z\",\"system_name\":\"Vaajaita\",\"system_security\":\"0.5\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003854,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:17:57.398Z\",\"system_name\":\"Alamel\",\"system_security\":\"0.2\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30003464,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:16:59.888Z\",\"system_name\":\"Aldik\",\"system_security\":\"0.7\",\"system_sovereignty\":\"minmatar\"},{\"system_id\":30000182,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T19:04:22.126Z\",\"system_name\":\"Inaya\",\"system_security\":\"0.6\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30001660,\"status\":\"edencom_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T17:38:27.602Z\",\"system_name\":\"Dabrid\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30001685,\"status\":\"triglavian_minor_victory\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T17:34:50.620Z\",\"system_name\":\"Ordat\",\"system_security\":\"0.3\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005029,\"status\":\"final_liminality\",\"derived_security_status\":\"-1.0\",\"updated_at\":\"2020-06-06T15:44:51.914Z\",\"system_name\":\"Vale\",\"system_security\":\"0.7\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30045322,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-06T01:44:55.204Z\",\"system_name\":\"Samanuni\",\"system_security\":\"0.7\",\"system_sovereignty\":\"caldari\"},{\"system_id\":30003885,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-05T17:09:39.066Z\",\"system_name\":\"Arzanni\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004248,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-05T00:49:40.255Z\",\"system_name\":\"Haimeh\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003495,\"status\":\"final_liminality\",\"derived_security_status\":\"-1.0\",\"updated_at\":\"2020-06-04T23:08:13.644Z\",\"system_name\":\"Raravoss\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003541,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T16:55:17.838Z\",\"system_name\":\"Faswiba\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002651,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T15:38:07.592Z\",\"system_name\":\"Fasse\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30004150,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Shaggoth\",\"system_security\":\"0.7\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30002251,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Sadye\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30005260,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Keri\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30000105,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Abha\",\"system_security\":\"0.4\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30004992,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Palmon\",\"system_security\":\"0.4\",\"system_sovereignty\":\"gallente\"},{\"system_id\":30002243,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Seiradih\",\"system_security\":\"0.6\",\"system_sovereignty\":\"amarr\"},{\"system_id\":30003553,\"status\":\"fortress\",\"derived_security_status\":null,\"updated_at\":\"2020-06-03T04:02:40.650Z\",\"system_name\":\"Warouh\",\"system_security\":\"0.5\",\"system_sovereignty\":\"amarr\"}];\n\t\n\tthis.invasions = _.keyBy(data, function(x) { return x.system_id; });\n\t\n\t/** Update the system */\n\tthis.mutate = function(system, systemID) {\n\t\tconst systemInvasion = this.invasions[systemID];\n\t\tif(systemInvasion) {\n\t\t\tif(systemInvasion.derived_security_status) { system.security = 1 * systemInvasion.derived_security_status; }\n\t\t\tsystem.pathSymbol = pathSymbolMap[systemInvasion.status];\n\t\t\tconst tip = textMap[systemInvasion.status] +\n\t\t\t\t(systemInvasion.derived_security_status ? '<br>Effective security lowered to ' + systemInvasion.derived_security_status : '');\n\t\t\tsystem.systemTypeModifiers.push('<span class=\"invasion ' + systemInvasion.status + '\" data-tooltip=\"' + tip + '\">' + system.pathSymbol + '</span>');\n\t\t}\n\t}\n}","var guidance = (function (undefined) {\n\n\tvar extractKeys = function (obj) {\n\t\tvar keys = [];\n\n\t\tfor (var key in obj) {\n\t\t    Object.prototype.hasOwnProperty.call(obj,key) && keys.push(key);\n\t\t}\n\n\t\treturn keys;\n\t}\n\n\tvar sorter = function (a, b) {\n\t\treturn parseFloat (a) - parseFloat (b);\n\t}\n\n\tfunction adjustCostForOptions(mapCost, system) {\n\t\tvar system = systemAnalysis.analyse(30000000 + 1 * system);\n\t\tif(!system) { return mapCost; }\n\t\tif(options.chain.routeIgnore.enabled && options.chain.routeIgnore.systems.indexOf(system.name) >= 0) {\n\t\t\tmapCost += 100;\t// Penalty for an avoided system\n\t\t}\n\t\tswitch(options.chain.routeSecurity) {\n\t\t\tcase 'highsec': return mapCost + (system.security < 0.45 ? 100 : 0);\n\t\t\tcase 'avoid-high': return mapCost + (system.security >= 0.45 ? 100 : 0);\n\t\t\tcase 'avoid-null': return mapCost + (system.security <= 0.0 ? 100 : 0);\n\t\t\tdefault: return mapCost;\t// in case of some invalid option, default to shortest\n\t\t}\n\t}\n\n\tvar findPaths = function (map, start, end, infinity) {\n\t\tif(!(map[start] && map[end])) { return null; }\t// both ends of path must be in network somewhere\n\t\t\n\t\tinfinity = infinity || Infinity;\n\n\t\tvar costs = {},\n\t\t    open = {'0': [start]},\n\t\t    predecessors = {},\n\t\t    keys;\n\n\t\tvar addToOpen = function (cost, vertex) {\n\t\t\tvar key = \"\" + cost;\n\t\t\tif (!open[key]) open[key] = [];\n\t\t\topen[key].push(vertex);\n\t\t}\n\n\t\tcosts[start] = 0;\n\n\t\twhile (open && !costs[end]) {\n\t\t\tif(!(keys = extractKeys(open)).length) break;\n\n\t\t\tkeys.sort(sorter);\n\n\t\t\tvar key = keys[0],\n\t\t\t    bucket = open[key],\n\t\t\t    node = bucket.shift(),\n\t\t\t    currentCost = parseFloat(key),\n\t\t\t    adjacentNodes = map[node] || {};\n\n\t\t\tif (!bucket.length) delete open[key];\n\n\t\t\tfor (var vertex in adjacentNodes) {\n\t\t\t    if (Object.prototype.hasOwnProperty.call(adjacentNodes, vertex)) {\n\t\t\t\t\tvar cost = adjustCostForOptions(adjacentNodes[vertex], vertex),\n\t\t\t\t\t    totalCost = cost + currentCost,\n\t\t\t\t\t    vertexCost = costs[vertex];\n\n\t\t\t\t\tif ((vertexCost === undefined) || (vertexCost > totalCost)) {\n\t\t\t\t\t\tcosts[vertex] = totalCost;\n\t\t\t\t\t\taddToOpen(totalCost, vertex);\n\t\t\t\t\t\tpredecessors[vertex] = node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (costs[end] === undefined) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn predecessors;\n\t\t}\n\n\t}\n\n\tvar extractShortest = function (predecessors, end) {\n\t\tvar nodes = [],\n\t\t    u = end;\n\n\t\twhile (u) {\n\t\t\tnodes.push(u);\n\t\t\tpredecessor = predecessors[u];\n\t\t\tu = predecessors[u];\n\t\t}\n\n\t\tnodes.reverse();\n\t\treturn nodes;\n\t}\n\n\tvar findShortestPath = function (map, nodes) {\n\t\tvar start = nodes.shift(),\n\t\t    end,\n\t\t    predecessors,\n\t\t    path = [],\n\t\t    shortest;\n\n\t\twhile (nodes.length) {\n\t\t\tend = nodes.shift();\n\t\t\tpredecessors = findPaths(map, start, end);\n\n\t\t\tif (predecessors) {\n\t\t\t\tshortest = extractShortest(predecessors, end);\n\t\t\t\tif (nodes.length) {\n\t\t\t\t\tpath.push.apply(path, shortest.slice(0, -1));\n\t\t\t\t} else {\n\t\t\t\t\treturn path.concat(shortest);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tstart = end;\n\t\t}\n\t}\n\t\n\tvar Guidance = { kSpaceCache: {} };\n\tGuidance.clearCache = function() { Guidance.kSpaceCache = {}; }\n\t\n\tGuidance.findShortestPath = function (map, start, end) {\n\t\tconst nodes = [start, end];\n\n\t\tconst cacheKey = nodes.join(',');\n\t\tconst cachedPath = Guidance.kSpaceCache[cacheKey];\n\t\tif(cachedPath === undefined) {\n\t\t\treturn Guidance.kSpaceCache[cacheKey] = findShortestPath(map, nodes);\n\t\t} else {\n\t\t\treturn cachedPath;\n\t\t}\n\t}\n\n\treturn Guidance;\n})();\n","/** Functions for rendering things relating to systems or parts of the chain */\nconst systemRendering = new function() { \n\t/** Render a path, as returned from guidance.findShortestPath */\n\tthis.renderPath = function(path) {\n\t\tif(path.length <= 1 || path.length > options.chain.routingLimit) { return '' + path.length - 1; }\n\t\telse {\n\t\t\tvar systemMarkup = path\n\t\t\t.slice(0, path.length - 1).reverse()\n\t\t\t.map(function(s) {\n\t\t\t\tconst systemID = 30000000 + 1 * s;\n\t\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\t\tconst securityClass = system.systemTypeClass;\n\t\t\t\treturn '<span class=\"' + securityClass + '\" data-tooltip=\"' + system.name + ' (' + system.security + ')\" onclick=\"tripwire.systemChange(' + systemID + ')\">' + system.pathSymbol + '</span>';\n\t\t\t});\n\t\t\tvar r = '<span class=\"path\">';\n\t\t\tfor(var i = 0; i < systemMarkup.length; i++) {\n\t\t\t\tif(i > 0 && 0 == i % 5) { r += '|'; }\n\t\t\t\t\n\t\t\t\tr += systemMarkup[i];\t\t\t\t \n\t\t\t}\n\t\t\treturn r + '</span>';\n\t\t}\n\t}\n\t\n\tthis.renderEffect = function(system, tag) {\n\t\treturn system.effectClass ? \"<\" + tag + \" class='whEffect' data-icon='\"+system.effectClass+\"' data-tooltip='\"+system.effect+\"'></\" + tag + \">\" : '';\n\t}\n\n};","const ChainMapRendererOrgchart = function(owner) {\n\tconst _this = this;\n\t\n\t/** Initialiser - callback from chart onload */\n\tthis.init = function() {\n\t\t_this.map = new google.visualization.OrgChart(document.getElementById(\"chainMap\"));\n\t\t_this.options = {allowHtml: true, allowCollapse: true, size: \"medium\", nodeClass: \"node\"};\n\n\t\tgoogle.visualization.events.addListener(_this.map, \"collapse\", _this.collapseHandler);\n\n\t\t_this.map.draw(new google.visualization.DataView(new google.visualization.DataTable({cols:[{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}]})), _this.options);\n\t}\n\t\n\t/** Is this renderer ready to accept draw calls? */\n\tthis.ready = function() { return !this.drawing && !!this.map; }\n\t\n\t/** Switch to this renderer. The renderer can be in a blank state; draw() will be called after */\n\tthis.switchTo = function() {\n\t\tdocument.getElementById('chainGrid').style.display = '';\n\t\tif(!_this.map) { google.charts.setOnLoadCallback(this.init); }\n\t}\n\t\n\t/** Switch away from this renderer. All node divs should be removed from the DOM */\n\tthis.switchFrom = function() {\n\t\tdocument.getElementById('chainGrid').style.display = 'none';\n\t\t_this.map.draw(new google.visualization.DataView(new google.visualization.DataTable({cols:[{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}]})), _this.options);\t\t\n\t}\n\t\n\t/** Redraw the map, based on the given node set, line overrides and list of collapsed systems */\n\tthis.draw = function(map, lines, collapsed) {\n\t\tthis.drawing = true;\n\t\tthis.map.draw(newView(map), this.options); \n\t\t\n\t\tfor (var x in collapsed) {\n\t\t\tconst s = collapsed[x];\n\t\t\tconst nodeId = $(\"#chainMap [data-nodeid='\"+s+\"']\").attr(\"id\");\n\t\t\tif (nodeId) {\n\t\t\t\tconst nodeVal = nodeId.split(\"node\")[1];\n\t\t\t\tthis.map.collapse(nodeVal - 1, true);\n\t\t\t}\n\t\t}\n\t\t\n\t\tupdateLines(map, lines);\n\t\tthis.drawing = false;\n\t};\n\t\n\tconst newView = function(json) {\n\t\tconst view = new google.visualization.DataView(new google.visualization.DataTable(json));\n\t\treturn view;\n\t};\n\t\n\tconst updateLines = function(map, lines) {\n\t\t_this.lastLineData = { map: map, lines: lines };\n\t\tfunction drawNodeLine(system, parent, mode, signatureID) {\n\t\t\t/*\tfunction for drawing colored lines  */\n\t\t\tif(typeof mode == 'string') { mode = [mode]; }\n\n\t\t\tfunction addModes(jquerySelector, prefixes) { return doModeClasses(jquerySelector, prefixes, function(s, c) { s.addClass(c); }); }\n\t\t\tfunction removeModes(jquerySelector, prefixes) { return doModeClasses(jquerySelector, prefixes, function(s, c) { s.removeClass(c); }); }\n\t\t\tfunction doModeClasses(jquerySelector, prefixes, classFunc) {\n\t\t\t\tprefixes = prefixes || [];\n\t\t\t\tprefixes.push('');\n\t\t\t\tprefixes.forEach(function(prefix) { \n\t\t\t\t\tmode.forEach( function(mode) { classFunc(jquerySelector, (prefix.length ? prefix + '-' : '') + mode); });\n\t\t\t\t});\n\t\t\t\treturn jquerySelector;\n\t\t\t}\n\n\t\t\t// Find node in chainmap\n\t\t\t//var $node = $(\"#chainMap [data-nodeid='\"+system+\"']\").parent();\n\t\t\tvar $node = $(\"#chainMap #node\"+system).parent();\n\n\t\t\tif ($node.length == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Get node # in this line\n\t\t\tvar nodeIndex = Math.ceil(($node[0].cellIndex + 1) / 2 - 1);\n\n\t\t\t// applly to my top line\n\t\t\tvar $connector = addModes($($node.parent().prev().children(\"td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright\")[nodeIndex]), [ 'left', 'right' ]);\n\n\t\t\t// Find parent node\n\t\t\t//var $parent = $(\"#chainMap [data-nodeid='\"+parent+\"']\").parent();\n\t\t\tvar $parent = $(\"#chainMap #node\"+parent).parent();\n\n\t\t\tif ($parent.length == 0 || $connector.length == 0)\n\t\t\t\treturn false;\n\n\t\t\t// Find the col of my top line\n\t\t\tvar nodeCol = 0, connectorCell = $connector[0].cellIndex;\n\t\t\t$node.parent().prev().find(\"td\").each(function(index) {\n\t\t\t\tnodeCol += this.colSpan;\n\n\t\t\t\tif (index == connectorCell) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Get node # in this line\n\t\t\tvar parentIndex = Math.ceil(($parent[0].cellIndex + 1) / 2 - 1);\n\n\t\t\t// Compensate for non-parent nodes (slight performance hit ~10ms)\n\t\t\tvar newparentIndex = parentIndex;\n\t\t\tfor (var i = 0; i <= parentIndex; i++) {\n\t\t\t\tvar checkSystem = 0;//$node.parent().prev().prev().prev().find(\"td:has([data-nodeid]):eq(\"+i+\")\").find(\"[data-nodeid]\").data(\"nodeid\");\n\t\t\t\t$node.parent().prev().prev().prev().find(\"td > [data-nodeid]\").each(function(index) {\n\t\t\t\t\tif (index == i) {\n\t\t\t\t\t\tcheckSystem = $(this).attr(\"id\").replace(\"node\", \"\");//$(this).data(\"nodeid\");\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif ($.map(map.rows, function(node) { return node.c[1].v == checkSystem ? node : null; }).length <= 0) {\n\t\t\t\t\tnewparentIndex--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentIndex = newparentIndex;\n\n\t\t\t// Apply to parent bottom line\n\t\t\tvar $connecte = addModes($($node.parent().prev().prev().children(\"td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright\")[parentIndex]), [ 'left', 'right'] );\n\n\t\t\t// the beans\n\t\t\tvar col = 0, parent = false, me = false;\n\t\t\t$node.parent().prev().prev().find(\"td\").each(function(index, value) {\n\t\t\t\tcol += this.colSpan;\n\n\t\t\t\tif (me && parent) {\n\t\t\t\t\t// All done - get outta here\n\t\t\t\t\treturn false;\n\t\t\t\t} else if (typeof($connecte[0]) != \"undefined\" && $connecte[0].cellIndex == index) {\n\t\t\t\t\tparent = true;\n\n\t\t\t\t\taddModes($(this), ['left']);\n\n\t\t\t\t\t// remove bottom border that points to the right\n\t\t\t\t\tif (!me && col != nodeCol) {\n\t\t\t\t\t\taddModes($(this), ['bottom']);\n\t\t\t\t\t}\n\n\t\t\t\t\t// parent and node are same - we are done\n\t\t\t\t\tif (nodeCol == col) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else if (col == nodeCol) {\n\t\t\t\t\tme = true;\n\n\t\t\t\t\taddModes($(this), [ 'bottom' ]);\n\t\t\t\t} else if (me || parent) {\n\t\t\t\t\tvar tempCol = 0, breaker = false, skip = false;\n\n\t\t\t\t\t$node.parent().prev().find(\"td\").each(function(index) {\n\t\t\t\t\t\ttempCol += this.colSpan;\n\n\t\t\t\t\t\tif (tempCol == col && ($(this).hasClass(\"google-visualization-orgchart-lineleft\") || $(this).hasClass(\"google-visualization-orgchart-lineright\"))) {\n\t\t\t\t\t\t\tif (parent == false) {\n\t\t\t\t\t\t\t\t// Stop looking cuz there is another node between us and parent\n\t\t\t\t\t\t\t\tbreaker = true;\n\t\t\t\t\t\t\t\tremoveModes($connecte, [ 'left', 'right' ]);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t} else if (parent == true) {\n\t\t\t\t\t\t\t\t// Lets make sure there isnt a node between the parent and me\n\t\t\t\t\t\t\t\tremoveModes($connecte, [ 'left', 'right' ]);\n\n\t\t\t\t\t\t\t\t$node.parent().prev().prev().find(\"td\").each(function(index) {\n\t\t\t\t\t\t\t\t\tif (index >= $connecte[0].cellIndex) {\n\t\t\t\t\t\t\t\t\t\t// there is a node after parent but before me\n\t\t\t\t\t\t\t\t\t\tremoveModes($(this), [ 'bottom' ]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tskip = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (breaker) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!skip) {\n\t\t\t\t\t\taddModes($(this), ['bottom'] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfor (var x in lines) {\n\t\t\tdrawNodeLine(lines[x][0], lines[x][1], lines[x][2], lines[x][3]);\n\t\t}\n\t};\n\n\tthis.collapseHandler = function() {\t\t\n\t\tif(_this.drawing) { return; }\n\t\t\n\t\tconst collapsed = _this.map.getCollapsedNodes();\n\t\tconst collapsedSystems = [];\n\t\tfor (x in collapsed) {\n\t\t\tvar systemID = $(\"#chainMap #node\"+(collapsed[x] +1)).data(\"nodeid\");\n\t\t\tcollapsedSystems.push(systemID);\n\t\t}\n\t\towner.updateCollapsed(collapsedSystems);\n\t\t\n\t\tif(_this.lastLineData) { updateLines(_this.lastLineData.map, _this.lastLineData.lines); }\n\t}\n\n\n};","const ChainMapRendererRadial = function(owner) {\n\t/** Is this renderer ready to accept draw calls? */\n\tthis.ready = function() { return !this.drawing; }\n\t\n\t/** Switch to this renderer. The renderer can be in a blank state; draw() will be called after */\n\tthis.switchTo = function() {\n\t\tif(!document.getElementById('map-container')) {\n\t\t\tconst newDiv = document.createElement('div');\n\t\t\tnewDiv.id = 'map-container';\n\t\t\tnewDiv.className = 'radial-map';\n\t\t\tdocument.getElementById('chainMap').appendChild(newDiv);\n\t\t}\n\t\tthis.container = document.getElementById('map-container');\n\t\tthis.container.style.display = '';\n\t}\n\t\n\t/** Switch away from this renderer. All node divs should be removed from the DOM */\n\tthis.switchFrom = function() {\n\t\tconst div = document.getElementById('map-container');\n\t\tif(div) { div.parentNode.removeChild(div); }\n\t\tthis.container = null;\n\t}\n\t\n\tthis.collapse = function(systemID, collapse) {\n\t\tif(collapse) { this.mapData.collapsed.push(systemID); }\n\t\telse {  this.mapData.collapsed = this.mapData.collapsed.filter(x => x != systemID); }\n\t\towner.updateCollapsed(this.mapData.collapsed);\n\t\tdrawInner(this.mapData.map, this.mapData.lines, this.mapData.collapsed);\n\t}\n\t\n\t/** Redraw the map, based on the given node set, line overrides and list of collapsed systems */\n\tthis.draw = function(map, lines, collapsed) {\n\t\tthis.drawing = true;\n\t\tthis.mapData = {map: map, lines: lines, collapsed: collapsed};\n\t\t\n\t\t// Clear the map for a new one\n\t\t//this.switchFrom(); this.switchTo();\n\n\t\ttry { drawInner(map, lines, collapsed); }\n\t\tfinally { this.drawing = false; }\n\t}\n\t\n\tconst CIRCLE_SIZE = { x: 70, y: 60, first_ring_delta: 0.3,\n\t\tringX: function(ci) { return ci == 0 ? 0 : (ci + this.first_ring_delta) * this.x},\n\t\tringY: function(ci) { return ci == 0 ? 0 : (ci + this.first_ring_delta) * this.y},\n\t };\n\n\tconst _this = this;\n\tconst drawInner = function(map, lines, collapsed) {\n\t\tconst maps = [];\n\t\tconst nodesById = {};\n\t\t\n\t\t// First pass: arrange nodes into rings\n\t\tfor(var ri = 0; ri < map.rows.length; ri++) {\n\t\t\tconst item = map.rows[ri];\n\t\t\tconst inNode = item.c[0], id = inNode.v, parent = item.c[1].v;\n\t\t\t\n\t\t\tconst mapNode = { id: id, children: [], systemID: inNode.systemID, minArc: 0 };\n\t\t\t\n\t\t\tif(parent == null) {\n\t\t\t\tconst newMap =  { circles: [ { arc: 0, nodes: [ mapNode ] } ] };\n\t\t\t\tmapNode.map = newMap;\n\t\t\t\tmapNode.circle = 0;\n\t\t\t\tmaps.push(newMap);\n\t\t\t} else {\n\t\t\t\tconst parentNode = nodesById[parent];\n\t\t\t\tif(!parentNode) { throw 'Parent id ' + parent + ' not on map yet'; }\n\t\t\t\tparentNode.children.push(mapNode);\n\t\t\t\tmapNode.parent = parentNode;\n\t\t\t\tmapNode.connection = lines.filter(function(l) { return l[0] == id; })[0] || [id, parent, [], '?'];\n\t\t\t\tmapNode.connection[2].unshift('connection');\n\t\t\t\tmapNode.map = parentNode.map;\n\t\t\t\tmapNode.circle = parentNode.circle + 1;\n\t\t\t\tif(mapNode.map.circles.length <= mapNode.circle) {\n\t\t\t\t\tmapNode.map.circles.push({ arc: 0, nodes:[mapNode] });\n\t\t\t\t} else { mapNode.map.circles[mapNode.circle].nodes.push(mapNode); }\n\t\t\t}\n\t\t\tnodesById[id] = mapNode;\n\t\t\tmapNode.markup = inNode.f;\n\t\t}\n\n\t\t// Second pass - for each map, find the allocation of arc needed for each node\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\tfor(var ci = map.circles.length - 1; ci >= 1; ci--) {\t// don't need to calculate ring 0\n\t\t\t\tfor(var ni = 0; ni < map.circles[ci].nodes.length; ni++) {\n\t\t\t\t\tconst node = map.circles[ci].nodes[ni];\n\t\t\t\t\tnode.minArc *= ci / (ci + 1.0);\n\t\t\t\t\tif(node.minArc < 1 || collapsed.indexOf(node.systemID * 1) >= 0) { node.minArc = 1; }\n\t\t\t\t\tnode.parent.minArc += node.minArc;\n\t\t\t\t\tmap.circles[ci].arc += node.minArc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Third pass - lay out each ring based on the arc values\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\tvar mapDiv = document.getElementById(\"map\" + mi);\n\t\t\tif(!mapDiv) {\n\t\t\t\tmapDiv = document.createElement('div');\n\t\t\t\tmapDiv.id = \"map\" + mi;\n\t\t\t\tmapDiv.className = \"map-chain-wrapper\";\n\t\t\t}\n\t\t\tmapDiv.innerHTML = '<div class=\"map-outer-container\"><div class=\"map-inner-container\"><canvas class=\"map-drawing\" id=\"map-canvas-' + mi + '\"/></div></div>';\n\t\t\tconst innerContainer = mapDiv.firstChild.firstChild;\n\t\t\tdocument.getElementById('map-container').appendChild(mapDiv);\n\n\t\t\tmap.bounds = makeDivsForRing(innerContainer, 0, map.circles[0].nodes, 0, Math.PI * 2, collapsed);\n\t\t\tmap.domNode = mapDiv;\n\t\t\tmap.innerContainer = innerContainer;\n\t\t}\n\n\t\t// Fourth pass: update div and canvas bounds, and draw rings/links\n\t\tconst CANVAS_SCALE = 1;\n\t\tfor(var mi = 0; mi < maps.length; mi++) {\n\t\t\tconst map = maps[mi];\n\t\t\tconst finalPositions = {\n\t\t\t\tw: 200 + map.bounds.x[1] - map.bounds.x[0],\n\t\t\t\th: 100 + map.bounds.y[1] - map.bounds.y[0],\n\t\t\t\tcx: 100 - map.bounds.x[0],\n\t\t\t\tcy: 50 - map.bounds.y[0]\n\t\t\t}\n\t\t\t\n\t\t\t// Fill the space available, if we didn't already\n\t\t\tif(maps.length == 1) {\n\t\t\t\tconst parentWidth = -38 + _this.container.offsetWidth;\t// 20px for map margins, 18 for scrollbar\n\t\t\t\tif(finalPositions.w < parentWidth) {\n\t\t\t\t\tfinalPositions.cx += 0.5 * (parentWidth - finalPositions.w);\n\t\t\t\t\tfinalPositions.w = parentWidth;\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\tconst parentHeight = document.getElementById('chainParent').offsetHeight;\n\t\t\tif(finalPositions.h < parentHeight) {\n\t\t\t\tfinalPositions.cy += 0.5 * (parentHeight - finalPositions.h);\n\t\t\t\tfinalPositions.h = parentHeight;\n\t\t\t}\n\t\t\t\n\t\t\t// If there's enough space to centre the top level node now, do it\n\t\t\tif(finalPositions.h >= 2 * (map.bounds.y[1] > -map.bounds.y[0] ? map.bounds.y[1] : -map.bounds.y[0])) {\n\t\t\t\tfinalPositions.cy = finalPositions.h / 2;\n\t\t\t}\n\t\t\tif(finalPositions.w >= 2 * (map.bounds.x[1] > -map.bounds.x[0] ? map.bounds.x[1] : -map.bounds.x[0])) {\n\t\t\t\tfinalPositions.cx = finalPositions.w / 2;\n\t\t\t}\t\t\t\n\t\t\tmap.domNode.style.width = finalPositions.w + 'px';\n\t\t\tmap.domNode.style.height = finalPositions.h + 'px';\n\t\t\tconst outerContainer = map.domNode.firstChild;\n\t\t\touterContainer.style.left = finalPositions.cx + 'px';\n\t\t\touterContainer.style.top = finalPositions.cy + 'px';\n\t\t\tconst canvas = outerContainer.getElementsByTagName('canvas')[0];\n\t\t\tcanvas.width = CANVAS_SCALE * finalPositions.w;\n\t\t\tcanvas.style.width = finalPositions.w + 'px';\n\t\t\tcanvas.height = CANVAS_SCALE * finalPositions.h;\n\t\t\tcanvas.style.height = finalPositions.h + 'px';\n\t\t\tcanvas.style.left = -finalPositions.cx + 'px';\n\t\t\tcanvas.style.top = -finalPositions.cy + 'px';\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\tctx.scale(CANVAS_SCALE, CANVAS_SCALE);\n\t\t\tctx.translate(finalPositions.cx, finalPositions.cy);\n\t\t\t\t\n\t\t\tfor(var ci = map.bounds.maxCi; ci >= 1; ci--) {\t// don't need to draw ring 0\n\t\t\t\tif(options.chain.gridlines) {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tif(ctx.ellipse) {\n\t\t\t\t\t\tctx.lineWidth = 0.5;\n\t\t\t\t\t\tctx.setLineDash([]);\n\t\t\t\t\t\tctx.ellipse(0, 0, CIRCLE_SIZE.ringX(ci), CIRCLE_SIZE.ringY(ci), 0, 0, Math.PI * 2);\n\t\t\t\t\t}\n\t\t\t\t\tctx.strokeStyle = propertyFromCssClass('grid-default', 'color');\n\t\t\t\t\tctx.stroke();\t\t\n\t\t\t\t}\n\t\t\t\tif(ci >= map.circles.length) { continue; }\n\t\t\t\t\n\t\t\t\tfor(var ni = 0; ni < map.circles[ci].nodes.length; ni++) {\n\t\t\t\t\tconst node = map.circles[ci].nodes[ni];\n\t\t\t\t\tif(!node.position) { continue; }\t// not drawn on map\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.lineWidth = node.connection[2].reduce(function(w, c) { return c == 'frig' ? 1 : w; }, 3);\n\t\t\t\t\tctx.moveTo(node.position.x, node.position.y);\n\t\t\t\t\tconst cp1 = radToCartesian({ r: node.radPosition.r - 0.5, theta: (node.radPosition.theta + 2 * node.parent.radPosition.theta) / 3.0 });\n\t\t\t\t\tconst cp2 = radToCartesian({ r: node.radPosition.r - 0.5, theta: (2 * node.radPosition.theta + node.parent.radPosition.theta) / 3.0 });\n\t\t\t\t\t\n\t\t\t\t\tif(ci > 1) {\t\t\t\t\n\t\t\t\t\t\tctx.bezierCurveTo(cp2.x, cp2.y, cp1.x, cp1.y, node.parent.position.x, node.parent.position.y);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.lineTo(node.parent.position.x, node.parent.position.y);\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tconst dist2 = (node.position.y - node.parent.position);\n\t\t\t\t\tctx.strokeStyle = propertyFromCssClass(node.connection[2], 'border-top-color');\n\t\t\t\t\tctx.setLineDash ({ dashed: [3, 2] }[propertyFromCssClass(node.connection[2], 'border-top-style')] || []);\n\t\t\t\t\tctx.stroke();\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\t\t\n\t\t// Remove any maps which aren't in use any more\n\t\tfor(var mi = maps.length; ; mi++) {\n\t\t\tconst div = document.getElementById('map' + mi);\n\t\t\tif(div) { div.parentNode.removeChild(div); }\n\t\t\telse { break; }\n\t\t}\n\t}\n\t\n\tfunction makeDivsForRing(innerContainer, ci, nodes, minRad, maxRad, collapsed) {\n\t\tconst bounds = { x: [0, 0], y: [0, 0], maxCi: ci };\n\t\tif(!nodes.length) { return bounds; }\n\t\tconst parentCollapsed = collapsed.indexOf(1 * (nodes[0].parent || {}).systemID) >= 0;\n\t\tconst max_nodes_per_rad = 1.4;\n\t\tif(ci > 0 && !parentCollapsed) {\n\t\t\tvar skipped = 0;\n\t\t\twhile(++skipped < 2 && nodes.length > max_nodes_per_rad * ci * (maxRad - minRad)) { ci++; }\n\t\t}\n\t\tconst totalArc = parentCollapsed ? nodes.length : nodes.reduce(function(acc, x) { return acc + x.minArc; }, 0);\n\t\tconst rads_per_arc = (maxRad - minRad) / totalArc;\n\t\tvar rad_offset = minRad;\n\t\tvar alignment_delta = 0;\n\t\t\n\t\tfor(var ni = 0; ni < nodes.length; ni++) {\n\t\t\tconst node = nodes[ni];\t\n\t\t\t\n\t\t\t// Make the node\n\t\t\tconst frag = document.createRange().createContextualFragment('<div class=\"node-wrapper\">' + node.markup + '</div>');\n\t\t\tnode.domNode = frag.firstChild;\n\t\t\tinnerContainer.appendChild(node.domNode);\n\t\t\tconst systemID = 1 * node.systemID;\n\t\t\t$(node.domNode).dblclick(() => _this.collapse(systemID, collapsed.indexOf(systemID) < 0));\n\t\t\t\n\t\t\t// Position the node\n\t\t\tconst dr = (parentCollapsed ? 1 : node.minArc) * rads_per_arc;\n\t\t\tconst rad_centre = rad_offset + (dr / 2);\n\t\t\t\n\t\t\tif(ci == 1 && ni == 0) { // First node on first ring should be axis aligned\n\t\t\t\talignment_delta -= rad_centre;\n\t\t\t}\n\t\t\t\n\t\t\tnode.radPosition = { r: ci, theta: rad_centre + alignment_delta };\n\t\t\tnode.position = radToCartesian(node.radPosition);\n\t\t\t\n\t\t\tif(node.position.x < bounds.x[0]) { bounds.x[0] = node.position.x; }\n\t\t\tif(node.position.x > bounds.x[1]) { bounds.x[1] = node.position.x; }\n\t\t\tif(node.position.y < bounds.y[0]) { bounds.y[0] = node.position.y; }\n\t\t\tif(node.position.y > bounds.y[1]) { bounds.y[1] = node.position.y; }\n\t\t\t\n\t\t\tnode.domNode.style.left = node.position.x + 'px';\n\t\t\tnode.domNode.style.top = node.position.y + 'px';\n\t\t\t\n\t\t\tif(parentCollapsed) {\n\t\t\t\tnode.domNode.style.display = 'none';\n\t\t\t} else {\t\t\t\t\n\t\t\t\t// Do the segment of the next circle\n\t\t\t\tconst excess = (ci > 0 && dr > node.minArc * ci) ? dr - node.minArc * ci : 0;\n\t\t\t\tif(node.children.length) {\n\t\t\t\t\tconst nextBounds = makeDivsForRing(innerContainer, ci + 1, node.children, rad_offset + (0.5 * excess) + alignment_delta, rad_offset - (0.5 * excess) + alignment_delta + dr, collapsed);\n\t\t\t\t\tif(nextBounds.x[0] < bounds.x[0]) { bounds.x[0] = nextBounds.x[0]; }\n\t\t\t\t\tif(nextBounds.x[1] > bounds.x[1]) { bounds.x[1] = nextBounds.x[1]; }\n\t\t\t\t\tif(nextBounds.y[0] < bounds.y[0]) { bounds.y[0] = nextBounds.y[0]; }\n\t\t\t\t\tif(nextBounds.y[1] > bounds.y[1]) { bounds.y[1] = nextBounds.y[1]; }\n\t\t\t\t\tif(nextBounds.maxCi > bounds.maxCi) { bounds.maxCi = nextBounds.maxCi; }\n\t\t\t\t}\n\t\t\t}\n\t\t\trad_offset += dr;\n\t\t}\n\t\t\n\t\treturn bounds;\n\t}\n\n\tfunction radToCartesian(rad) {\n\t\treturn { \n\t\t\tx: CIRCLE_SIZE.ringX(rad.r) * Math.sin(rad.theta), \n\t\t\ty: CIRCLE_SIZE.ringY(rad.r) * Math.cos(rad.theta)\n\t\t};\n\n\t}\n\n\t/** https://stackoverflow.com/questions/40978050 */\n\tfunction propertyFromCssClass(className, property) {\n\t\tif(Array.isArray(className)) { className = className.join(' '); }\n\t\tvar elem = document.getElementById('temp-div-' + className);\n\t\tif(!elem) {\n\t\t  elem = document.createElement(\"div\");\n\t\t  elem.id = 'temp-div-' + className;\n\t\t  elem.style.cssText = \"position:fixed;left:-100px;top:-100px;width:1px;height:1px\";\n\t\t  elem.className = className + ' temp';\n\t\t  document.body.appendChild(elem);  // required in some browsers\n\t\t  }\n\t  const color = getComputedStyle(elem).getPropertyValue(property);\n\t  //document.body.removeChild(tmp);\n\t  return color;\n\t}\t\n};","var chain = new function() {\n\tvar chain = this;\n\tthis.map, this.view, this.drawing, this.data = {};\n\t\n\tthirdPartySuppliers = [ /*thera*/ ];\n\n\t// Renderer should have:\n\t//  ready() - Whether the renderer is initialised and can accept draw calls\n\t// switchTo() - Make this renderer active. The renderer can be in a blank state; draw() will be called after\n\t// switchFrom() - Switch away from this renderer. All node divs should be removed from the DOM, other items can be removed or made invisible\n\t// draw(map, lines, collapsedSystems) - Redraw the map, based on the given node set, line overrides and list of collapsed systems \n\t// collapse(systemID, toggle) - marks the system as collapsed/not collapsed\n\t// If the renderer allows collapsing of nodes then it will call updateCollapsed on the owner (the chain) with a list of collapsed systems in the current tab\n\t\n\tconst renderers = { \n\t\torgChart: new ChainMapRendererOrgchart(this),\n\t\tradial: new ChainMapRendererRadial(this)\n\t};\n\t\n\tthis.renderer = renderers[options.chain.renderer];\n\tthis.renderer.switchTo();\n\t\n\tthis.useRenderer = function(name) {\n\t\tif(!renderers[name]) { throw 'Unknown renderer ' + name; }\n\t\tif(this.renderer != renderers[name]) {\n\t\t\tthis.renderer.switchFrom();\n\t\t\tthis.renderer = renderers[name];\n\t\t\tthis.renderer.switchTo();\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\n\tthis.activity = function(data) {\n\t\t/*\tfunction for adding recent activity to chain map nodes\t*/\n\t\t//var data = typeof(data) !== \"undefined\" ? data : this.data.activity;\n\n\t\t// Hide all activity colored dots instead of checking each one\n\t\tvar elements = document.querySelectorAll(\"#chainMap .nodeActivity span\");\n\t\tfor (var i = 0, l = elements.length; i < l; ++i) {\n\t\t   elements[i].className = elements[i].className + \" invisible\";\n\t\t}\n\n\t\t// Loop through passed data and show dots by system\n\t\tvar elements = document.querySelectorAll(\"#chainMap [data-nodeid]\");\n\t\tfor (var i = 0, l = elements.length; i < l; ++i) {\n\t\t   var systemID = elements[i].getAttribute(\"data-nodeid\");\n\t\t   if (data[systemID]) {\n\t\t\t   var shipJumps = data[systemID].shipJumps;\n\t\t\t   var podKills = data[systemID].podKills;\n\t\t\t   var shipKills = data[systemID].shipKills;\n\t\t\t   var npcKills = data[systemID].npcKills;\n\t\t\t   var node = elements[i].getElementsByClassName(\"nodeActivity\")[0];\n\n\t\t\t   if (shipJumps > 0) {\n\t\t\t\t   var jumps = node.getElementsByClassName(\"jumps\")[0];\n\t\t\t\t   jumps.className = jumps.className.replace(/invisible/g, \"\");\n\t\t\t\t   jumps.setAttribute(\"data-tooltip\", shipJumps + \" Jumps\");\n\t\t\t   }\n\n\t\t\t   if (podKills > 0) {\n\t\t\t\t   var pods = node.getElementsByClassName(\"pods\")[0];\n\t\t\t\t   pods.className = pods.className.replace(/invisible/g, \"\");\n\t\t\t\t   pods.setAttribute(\"data-tooltip\", podKills + \" Pod Kills\");\n\t\t\t   }\n\n\t\t\t   if (shipKills > 0) {\n\t\t\t\t   var ships = node.getElementsByClassName(\"ships\")[0];\n\t\t\t\t   ships.className = ships.className.replace(/invisible/g, \"\");\n\t\t\t\t   ships.setAttribute(\"data-tooltip\", shipKills + \" Ship Kills\");\n\t\t\t   }\n\n\t\t\t   if (npcKills > 0) {\n\t\t\t\t   var npcs = node.getElementsByClassName(\"npcs\")[0];\n\t\t\t\t   npcs.className = npcs.className.replace(/invisible/g, \"\");\n\t\t\t\t   npcs.setAttribute(\"data-tooltip\", npcKills + \" NPC Kills\");\n\t\t\t   }\n\t\t   }\n\t\t}\n\n\t\tif (SystemActivityToolTips.attachedElements && SystemActivityToolTips.attachedElements.length > 0) {\n\t\t\tSystemActivityToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t}\n\t\tSystemActivityToolTips.attach($(\"#chainMap .nodeActivity > span[data-tooltip]:not(.invisible)\"));\n\n\t\treturn data;\n\t}\n\n\tthis.occupied = function(data) {\n\t\t/*\tfunction for showing occupied icon  */\n\n\t\t// Hide all icons instead of checking each one\n\t\t$(\"#chainMap [data-icon='user'], #chainMap [data-icon='user'] + .badge\").addClass(\"invisible\");\n\n\t\t// Loop through passed data and show icons\n\t\tfor (var x in data) {\n\t\t\t$(\"#chainMap [data-nodeid='\"+data[x].systemID+\"'] [data-icon='user']\").removeClass(\"invisible\");\n\t\t\t$(\"#chainMap [data-nodeid='\"+data[x].systemID+\"'] [data-icon='user'] + .badge\").removeClass(\"invisible\").html(data[x].count);\n\t\t}\n\n\t\tOccupiedToolTips.attach($(\"#chainMap [data-icon='user']:not(.invisible)\"));\n\n\t\treturn data;\n\t}\n\n\tthis.flares = function(data) {\n\t\t/*\tfunction for coloring chain map nodes via flares  */\n\t\t//var data = typeof(data) !== \"undefined\" ? data : this.data.flares;\n\n\t\t// Remove all current node coloring instead of checking each one\n\t\t$(\"#chainMap div.node\").removeClass(\"redNode yellowNode greenNode\");\n\n\t\t// Remove all coloring from chain grid\n\t\t$(\"#chainGrid tr\").removeClass(\"red yellow green\");\n\n\t\t// Loop through passed data and add classes by system\n\t\tif (data) {\n\t\t\tfor (var x in data.flares) {\n\t\t\t\tvar systemID = data.flares[x].systemID;\n\t\t\t\tvar flare = data.flares[x].flare;\n\n\t\t\t\tvar row = ($(\"#chainMap [data-nodeid=\"+systemID+\"]\").addClass(flare+\"Node\").parent().index() - 1) / 3 * 2;\n\n\t\t\t\tif (row > 0) {\n\t\t\t\t\t$(\"#chainGrid tr:eq(\"+row+\")\").addClass(flare).next().addClass(flare);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tthis.grid = function() {\n\t\t/*  function for showing/hiding grid lines  */\n\t\t// This is an optional feature\n\t\tif (options.chain.gridlines == false) {\n\t\t\t$(\"#chainGrid tr\").addClass(\"hidden\");\n\t\t\treturn false;\n\t\t}\n\n\t\t$(\"#chainGrid tr\").removeClass(\"hidden\");\n\t\t//$(\"#chainGrid\").css(\"width\", \"100%\");\n\n\t\t// Calculate how many rows have systems, max 0 hack to prevent negative numbers, and rows above this number get hidden\n\t\tvar rows = Math.max(0, $(\".google-visualization-orgchart-table tr:has(.node)\").length * 2 - 1);\n\t\t$(\"#chainGrid tr:gt(\"+rows+\")\").addClass(\"hidden\");\n\t}\n\n\tthis.nodes = function(map) {\n\t\tvar chain = {cols: [{label: \"System\", type: \"string\"}, {label: \"Parent\", type: \"string\"}], rows: []};\n\t\tvar frigTypes = [\"Q003\", \"E004\", \"L005\", \"Z006\", \"M001\", \"C008\", \"G008\", \"A009\", \"SML\" ];\n\t\tvar connections = [];\n\t\tvar chainMap = this;\n\n\t\tfunction formatStatics(statics) {\n\t\t\tif(!statics) { return ''; }\n\t\t\tconst shortCodeMap = { 'High-Sec': 'H', 'Low-Sec': 'L', 'Null-Sec': 'N', 'Triglavian':'▼',\n\t\t\t\t'Class 1': '1', 'Class 2': '2', 'Class 3': '3', 'Class 4': '4', 'Class 5' : 5, 'Class 6': 6\n\t\t\t};\n\t\t\tconst classMap = { H: 'hisec', L: 'lowsec', N: 'nullsec', '▼': 'triglavian' };\n\t\t\treturn statics.map(function(s) {\n\t\t\t\tconst text = shortCodeMap[tripwire.wormholes[s].leadsTo];\n\t\t\t\tconst className = classMap[text] || 'class-' +  text;\n\t\t\t\tconst tip = tripwire.wormholes[s].leadsTo + ' via ' + s;\n\t\t\t\treturn '<span class=\"' + className + '\" data-tooltip=\"' + tip + '\">' + text + '</span>';\n\t\t\t}).join('');\n\t\t}\n\n\t\tfunction topLevel(systemID, id) {\n\t\t\tif (!systemID || !tripwire.systems[systemID])\n\t\t\t\treturn false;\n\t\t\tconst tab = options.chain.tabs[options.chain.active];\n\t\t\tconst tabName = tab && tab.systemID != 0 && 0 > tab.systemID.indexOf(',') ? options.chain.tabs[options.chain.active].name : undefined;\n\t\t\treturn makeSystemNode(systemID, id, null, null, tabName, '&nbsp;', ['top-level']);\n\t\t}\n\n\t\tfunction makeSystemNode(systemID, id, whId, inSigId, systemName, nodeTypeMarkup, additionalClasses) {\n\t\t\t// System type switch\n\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\tvar systemType = \"<span class='\" + system.systemTypeClass + \"'>\" + system.systemTypeName + system.systemTypeModifiers.join('') + \"</span>\";\n\t\t\t\n\t\t\tsystemName = _.escape(systemName);\n\t\t\tconst systemNameText = \n\t\t\t\toptions.chain.sigNameLocation == 'name' ? (systemName ? systemName : system.name ? system.name : '&nbsp;') :\n\t\t\t\toptions.chain.sigNameLocation == 'name_prefix' ?\n\t\t\t\t\t(systemName ? systemName + (system.name ? ' - ' + system.name : '') : (system.name ? system.name : '&nbsp;')) :\n\t\t\t\t(system.name ? system.name : '&nbsp;');\t\n\n\t\t\tvar node = {v: id, systemID: systemID };\n\t\t\tvar chainNode = \"<div id='node\"+id+\"' data-nodeid='\"+systemID+\"'\"\n\t\t\t\t+(whId ? \" data-sigid='\"+whId+\"'\" : '')\n\t\t\t\t+(inSigId ? \" data-inSigid='\"+inSigId+\"'\" : '')\n\t\t\t\t+\" class='node \" + ((additionalClasses || []).join(' ')) + \"'>\"\n\t\t\t\t\t\t\t+\t\"<div class='nodeIcons'>\"\n\t\t\t\t\t\t\t+\t\t\"<div style='float: left;'>\"\n\t\t\t\t\t\t\t+ systemRendering.renderEffect(system, 'i')\n\t\t\t\t\t\t\t+\t\t\"</div>\"\n\t\t\t\t\t\t\t+\t\t\"<div style='float: right;'>\"\n\t\t\t\t\t\t\t+\t\t\t\"<i data-icon='user' class='invisible'></i>\"\n\t\t\t\t\t\t\t+\t\t\t\"<span class='badge invisible'></span>\"\n\t\t\t\t\t\t\t+\t\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeClass'>\"+systemType+\"</h4>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeSystem'>\"\n\t\t\t\t\t\t\t+\t\t(system.name ? \"<a href='.?system=\"+system.name+\"'>\"+systemNameText+\"</a>\" : systemNameText)\n\t\t\t\t\t\t\t+\t\"</h4>\"\n\t\t\t\t\t\t\t+\t\"<h4 class='nodeType'>\" + nodeTypeMarkup + \"</h4>\"\n\t\t\t\t\t\t\t+\t\"<div class='statics'>\"\n\t\t\t\t\t\t\t+ formatStatics(system.name ? system.statics : [])\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\t\"<div class='nodeActivity'>\"\n\t\t\t\t\t\t\t+\t\t\"<span class='jumps invisible'>&#9679;</span>&nbsp;<span class='pods invisible'>&#9679;</span>&nbsp;&nbsp;<span class='ships invisible'>&#9679;</span>&nbsp;<span class='npcs invisible'>&#9679;</span>\"\n\t\t\t\t\t\t\t+\t\"</div>\"\n\t\t\t\t\t\t\t+\"</div>\";\n\n\t\t\tnode.f = chainNode;\n\n\t\t\treturn node;\n\t\t}\n\t\t\n\t\tfunction makeCalcChildNode(childID, node, targetSystem) {\n\t\t\tvar path = guidance.findShortestPath(tripwire.map.shortest, targetSystem - 30000000, node.child.systemID - 30000000);\n\t\t\tif(!path) { return null; }\n\t\t\t\n\t\t\tvar calcNode = { calculated: true};\n\t\t\tcalcNode.life = \"Gate\";\n\t\t\tcalcNode.parent = {};\n\t\t\tcalcNode.parent.id = node.child.id;\n\t\t\tcalcNode.parent.systemID = node.child.systemID;\n\t\t\tcalcNode.parent.name = node.child.name;\n\t\t\tcalcNode.parent.type = node.child.type;\n\t\t\tcalcNode.parent.nth = node.child.nth;\n\n\t\t\tcalcNode.child = {};\n\t\t\tcalcNode.child.id = ++childID;\n\t\t\tcalcNode.child.systemID = targetSystem;\n\t\t\tcalcNode.child.name = tripwire.systems[targetSystem].name;\n\t\t\tcalcNode.child.path = path;\n\t\t\tcalcNode.child.jumps = path.length - 1;\n\t\t\tcalcNode.child.nth = null;\t\t\t\n\t\t\t\n\t\t\treturn { childID, calcNode };\n\t\t}\n\n\t\tfunction findLinks(system) {\n\t\t\tif (system[0] <= 0) return false;\n\n\t\t\tvar parentID = parseInt(system[1]), childID = chainList.length;\n\t\t\tconst connectedTo = [];\t// Local cache, in addition to usedLinks, for extra link sources\n\n\t\t\t/** Add the 'current' and 'favourite' calculated nodes if appropriate */\n\t\t\tconst addCalcChildNodes = function(node) {\n\t\t\t\tif ($(\"#show-viewing\").hasClass(\"active\") && tripwire.systems[node.child.systemID] && !tripwire.systems[viewingSystemID].class && !tripwire.systems[node.child.systemID].class && viewingSystemID != node.child.systemID ) {\n\t\t\t\t\tvar calcNode = makeCalcChildNode(childID, node, viewingSystemID);\n\t\t\t\t\tif(calcNode) {\n\t\t\t\t\t\tchildID = calcNode.childID;\n\n\t\t\t\t\t\tchainLinks.push(calcNode.calcNode);\n\t\t\t\t\t\tchainList.push([0, childID]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ($(\"#show-favorite\").hasClass(\"active\") && tripwire.systems[node.child.systemID] && !tripwire.systems[node.child.systemID].class) {\n\t\t\t\t\tfor (var x in options.favorites) {\n\t\t\t\t\t\tif (tripwire.systems[options.favorites[x]].regionID >= 11000000 || tripwire.systems[node.child.systemID].regionID >= 11000000 || options.favorites[x] == node.child.systemID)\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tvar calcNode = makeCalcChildNode(childID, node, options.favorites[x]);\n\t\t\t\t\t\tif(calcNode) {\n\t\t\t\t\t\t\tchildID = calcNode.childID;\n\n\t\t\t\t\t\t\tchainLinks.push(calcNode.calcNode);\n\t\t\t\t\t\t\tchainList.push([0, childID]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\t\n\t\t\t};\n\n\t\t\tfor (var x in chainData) {\n\t\t\t\tvar wormhole = chainData[x];\t\t\t\t\n\t\t\t\tif ($.inArray(wormhole.id, usedLinks) == -1) {\n\t\t\t\t\tvar sig1, sig2, sig1Type, sig2Type,\n\t\t\t\t\t\tparent, child, parentType, childType;\n\t\t\t\t\tif (wormhole.parent == \"secondary\") {\n\t\t\t\t\t\tsig1 = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\t\t\t\tsig2 = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsig1 = tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\tsig2 = tripwire.client.signatures[wormhole.secondaryID];\n\t\t\t\t\t}\n\t\t\t\t\tsig1Type = wormhole.type; sig2Type = 'K162';\n\t\t\t\t\t\n\t\t\t\t\tif (sig1 && sig1.systemID == system[0]) {\n\t\t\t\t\t\tparent = sig1; child = sig2;\n\t\t\t\t\t\tparentType = sig2Type; childType = sig1Type;\n\t\t\t\t\t} else if(sig2 && sig2.systemID == system[0]) {\n\t\t\t\t\t\tparent = sig2; child = sig1;\n\t\t\t\t\t\tchildType = sig2Type; parentType = sig1Type;\n\t\t\t\t\t} else { continue; }\n\t\t\t\t\t\n\t\t\t\t\tvar node = {};\n\t\t\t\t\tnode.id = wormhole.id;\n\t\t\t\t\tnode.life = wormhole.life;\n\t\t\t\t\tnode.mass = wormhole.mass;\n\t\t\t\t\tnode.time = parent.modifiedTime;\n\n\t\t\t\t\tnode.parent = {};\n\t\t\t\t\tnode.parent.id = parentID;\n\t\t\t\t\tnode.parent.systemID = tripwire.systems[parent.systemID] ? parent.systemID : parent.systemID + \"|\" + Math.floor(Math.random() * Math.floor(10000));\n\t\t\t\t\tnode.parent.name = child.name;\n\t\t\t\t\tnode.parent.type = parentType;\n\t\t\t\t\tnode.parent.typeBM = null;\n\t\t\t\t\tnode.parent.classBM = null;\n\t\t\t\t\tnode.parent.nth = null;\n\t\t\t\t\tnode.parent.signatureID = child.signatureID;\n\t\t\t\t\tnode.parent.sigIndex = child.id;\n\n\t\t\t\t\tnode.child = {};\n\t\t\t\t\tnode.child.id = ++childID;\n\t\t\t\t\tnode.child.systemID = tripwire.systems[child.systemID] ? child.systemID : child.systemID + \"|\" + Math.floor(Math.random() * Math.floor(10000));\n\t\t\t\t\tnode.child.name = parent.name;\n\t\t\t\t\tnode.child.type = childType;\n\t\t\t\t\tnode.child.typeBM = null;\n\t\t\t\t\tnode.child.classBM = null;\n\t\t\t\t\tnode.child.nth = null;\n\t\t\t\t\tnode.child.signatureID = parent.signatureID;\n\t\t\t\t\tnode.child.sigIndex = parent.id;\n\n\t\t\t\t\tchainLinks.push(node);\n\t\t\t\t\tchainList.push([node.child.systemID, node.child.id, system[2]]);\n\t\t\t\t\tusedLinks.push(node.id);\n\t\t\t\t\tif(tripwire.systems[child.systemID]) { connectedTo.push(1 * child.systemID); }\t// cast to number - sigs have the system as a string\n\t\t\t\t\t// usedLinks[system[2]].push(node.id);\n\t\t\t\t\t\n\t\t\t\t\taddCalcChildNodes(node);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthirdPartySuppliers.forEach(function(supplier) {\t\t\t\t\n\t\t\t\tconst ids = { parentID: parentID, nextChildID: ++childID };\n\t\t\t\tconst supplierNodes = supplier.findLinks(1 * system[0], ids);\n\t\t\t\tif(!supplierNodes) { return; }\n\t\t\t\tchildID = ids.nextChildID - 1;\n\n\t\t\t\tfor(var ti = 0; ti < supplierNodes.length; ti++) {\n\t\t\t\t\tvar supplierNode = supplierNodes[ti];\n\t\t\t\t\tif(0 > usedLinks.indexOf(supplierNode.id)) {\n\t\t\t\t\t\tif(0 > connectedTo.indexOf(supplierNode.child.systemID)) { // not in our map already\n\t\t\t\t\t\t\tsupplierNode.thirdParty = supplier.nodeNameSuffix;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tchainLinks.push(supplierNode);\n\t\t\t\t\t\t\tchainList.push([supplierNode.child.systemID, supplierNode.child.id, system[2]]);\n\t\t\t\t\t\t\tconnectedTo.push(supplierNode.child.systemID);\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\taddCalcChildNodes(supplierNode);\t\t\n\t\t\t\t\t\t}\t\t\t\t\t\t\t\n\t\t\t\t\t\t// Always want to do this, even if we didn't add it, because in that case the link is overridden by one on this mask, so it is 'used' even if not made visible\n\t\t\t\t\t\tusedLinks.push(supplierNode.id);\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif ($(\"#chainTabs .current\").length > 0) {\n\t\t\tvar systems = $(\"#chainTabs .current .name\").data(\"tab\").toString().split(\",\");\n\t\t\tvar chainList = [];\n\t\t\tvar chainData = map;\n\t\t\tvar chainLinks = [];\n\t\t\tvar usedLinks = [];\n\n\t\t\tif (systems == 0) {\n                                let i = 0;\n                                Object.keys(map).slice()/*.reverse()*/.forEach(x => {\n\t\t\t\t        const parent = tripwire.client.signatures[map[x].initialID];\n\t\t\t\t        const child = tripwire.client.signatures[map[x].secondaryID];\n                                        if (parent && tripwire.systems[parent.systemID] && typeof(tripwire.systems[parent.systemID].class) == \"undefined\") {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t// usedLinks[parent.systemID] = [];\n\t\t\t\t\t\tchain.rows.push({c: [topLevel(parent.systemID, i), {v: null}]});\n\t\t\t\t\t\tchainList.push([parent.systemID, i, parent.systemID]);\n                                        } else if (child && tripwire.systems[child.systemID] && typeof(tripwire.systems[child.systemID].class) == \"undefined\") {\n\t\t\t\t  \t        i++;\n\t\t\t\t  \t\t// usedLinks[child.systemID] = [];\n\t\t\t\t\t\tchain.rows.push({c: [topLevel(child.systemID, i), {v: null}]});\n\t\t\t\t\t\tchainList.push([child.systemID, i, child.systemID]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfor (var x in systems) {\n\t\t\t\t\t// usedLinks[systems[x]] = [];\n\t\t\t\t\tchain.rows.push({c: [topLevel(systems[x], parseInt(x) + 1), {v: null}]});\n\t\t\t\t\tchainList.push([systems[x], parseInt(x) + 1, systems[x]]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < chainList.length; i++) {\n\t\t\t\tfindLinks(chainList[i]);\n\t\t\t}\n\t\t} else {\n\t\t\t$(\"#chainError\").hide();\n\n\t\t\tvar row = {c: []};\n\t\t\tvar systemID = viewingSystemID;\n\n\t\t\trow.c.push(topLevel(systemID, 1), {v: null});\n\n\t\t\tchain.rows.push(row);\n\n\t\t\tvar chainList = [[systemID, 1]];\n\t\t\tvar chainData = map;\n\t\t\tvar chainLinks = [];\n\t\t\tvar usedLinks = [];\n\n\t\t\tfor (var i = 0; i < chainList.length; ++i) {\n\t\t\t\tfindLinks(chainList[i]);\n\t\t\t}\n\t\t}\n\n\t\tconst systemsInChainMap = {};\n\t\tvar closestToViewing = null;\n\t\t\n\t\tfor (var x in chainLinks) {\n\t\t\tvar node = chainLinks[x];\n\t\t\tvar row = {c: []};\n\t\t\t\n\t\t\tconst sigText = options.chain[\"node-reference\"] == \"id\" ? (node.child.signatureID ? node.child.signatureID.substring(0, 3) : \"???\") :\n\t\t\t\t\t(node.child.type || \"(?)\") + sigFormat(node.child.typeBM, \"type\");\n\t\t\tconst nodeTypeMarkup = node.child.path ? \n\t\t\t\tsystemRendering.renderPath(node.child.path) :\n\t\t\t\t(node.child.sigIndex ? \"<a href='#' onclick='sigDialog.openSignatureDialog({data: { signature: \" + node.child.sigIndex + \", mode: \\\"update\\\" }}); return false;'>\" : '') + _.escape(\n\t\t\t\t\tnode.child.name && options.chain.sigNameLocation == 'ref' ? node.child.name :\n\t\t\t\t\tnode.child.name && options.chain.sigNameLocation == 'ref_prefix' ? node.child.name + ' - ' + sigText :\n\t\t\t\t\tsigText\n\t\t\t\t) + (node.child.sigIndex ? '</a>' : '');\n\t\t\tconst additionalClasses = node.calculated ? ['calc'] : systemsInChainMap[node.child.systemID] ? [ 'loop' ] : [];\n\t\t\tif(node.thirdParty) { additionalClasses.push('third-party', 'third-party-' + node.thirdParty); }\n\n\t\t\tvar modifiers = [];\t\t\t\n\t\t\tif (node.life == \"critical\") { modifiers.push('eol'); }\n\t\t\tif (node.mass == \"critical\") { modifiers.push('critical'); }\n\t\t\telse if (node.mass == \"destab\") { modifiers.push('destab'); }\n\t\t\t\n\t\t\tif($.inArray(node.parent.type, frigTypes) != -1 || $.inArray(node.child.type, frigTypes) != -1) { modifiers.push('frig'); }\n\t\t\t\n\t\t\tconst parentModifiers = (systemsInChainMap[node.parent.systemID] || { chainModifiers:[]}).chainModifiers;\n\t\t\trow.chainModifiers = modifiers.concat(parentModifiers);\n\t\t\t\n\t\t\trow.chainModifiers.forEach(function(cm) { modifiers.push(cm + '-chain')});\n\t\t\t\n\t\t\t// Update result set (rows/connections)\n\t\t\tconst child = makeSystemNode(node.child.systemID, node.child.id, node.id, node.child.sigIndex, node.child.name, nodeTypeMarkup, additionalClasses.concat(modifiers));\n\n\t\t\tvar parent = {v: node.parent.id};\n\n\t\t\trow.c.push(child, parent);\n\t\t\tchain.rows.push(row);\n\t\t\tif(modifiers.length) { connections.push(Array(child.v, parent.v, modifiers, node.id)); }\n\t\t\t\n\t\t\tconst parentPathHome = (systemsInChainMap[node.parent.systemID] || { pathHome:[]}).pathHome;\n\t\t\trow.pathHome = parentPathHome.concat(node.child);\n\t\t\t\n\t\t\tif(!node.calculated) { \n\t\t\t\tsystemsInChainMap[node.child.systemID] = row; // store for loops/chain modifiers\n\t\t\t\t\n\t\t\t\t// check for closest entrance/way home\n\t\t\t\tconst pathToViewed = guidance.findShortestPath(tripwire.map.shortest, viewingSystemID - 30000000, node.child.systemID - 30000000);\n\t\t\t\tif(pathToViewed && (\n\t\t\t\t\t(viewingSystemID == node.child.systemID) || \n\t\t\t\t\t(pathToViewed && (!closestToViewing || pathToViewed.length < closestToViewing.pathLength))\n\t\t\t\t)) {\n\t\t\t\t\tclosestToViewing = { systemID: node.child.systemID, pathLength: pathToViewed.length, pathHome: row.pathHome };\n\t\t\t\t}\n\t\t\t}\t\n\t\t}\n\n\t\t// Apply critical/destab line colors\n\t\tconnections.reverse(); // so we apply to outer systems first\n\n\t\t//this.data.map = chain;\n\t\t//this.data.lines = connections;\n\t\treturn {\"map\": chain, \"lines\": connections, \"closestToViewing\": closestToViewing};\n\t}\n\n\n\tthis.setActiveTab = function(newIndex) {\n\t\t$(\"#chainTabs .tab\").removeClass(\"current\");\n\t\toptions.chain.active = newIndex;\n\t\tif(newIndex != null) {\n\t\t\t$(\"#chainTabs .tab\").eq(newIndex).addClass('current');\n\t\t}\n\t\t\n\t\toptions.save();\n\t\tchain.redraw();\n\t\ttripwire.parse(tripwire.client, \"refresh\");\n\t}\n\n\tthis.redraw = function() {\n\t\tthis.useRenderer(options.chain.renderer);\n\t\t\n\t\tvar data = $.extend(true, {}, this.data);\n\t\tdata.map = $.extend(true, {}, data.rawMap);\n\n\t\tthis.draw(data);\n\t}\n\t\n\tvar drawRetryTimer = null;\n\n\tthis.draw = function(data) {\n\t\tvar data = typeof(data) !== \"undefined\" ? data : {};\n\t\tclearTimeout(drawRetryTimer);\n\n\t\t// We need to make sure Google chart is ready and we have signature data for this system before we begin, otherwise delay\n\t\tif (!this.renderer.ready() || (Object.keys(data.map||{}).length && !tripwire.client.signatures)) {\n\t\t\tdrawRetryTimer = setTimeout(function() { chain.draw(data) }, 100);\n\t\t\treturn;\n\t\t}\n\n\t\tif (data.map) {\n\t\t\tthis.drawing = true;\n\n\t\t\tthis.data.rawMap = $.extend(true, {}, data.map);\n\n\t\t\t// if (options.chain.active == null || (options.chain.tabs[options.chain.active] && options.chain.tabs[options.chain.active].evescout == false)) {\n\t\t\t// \tif (options.masks.active != \"273.0\") {\n\t\t\t// \t\tfor (var i in data.map) {\n\t\t\t// \t\t\tif (data.map[i].mask == \"273.0\") {\n\t\t\t// \t\t\t\tdelete data.map[i];\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\t// Sort so we keep the chain map order the same\n\t\t\tObject.sort(data.map, \"id\");\n\n\t\t\t$.extend(data, this.nodes(data.map)); // 250ms -> <100ms\n\t\t\t$.extend(this.data, data);\n\t\t\t\n\t\t\tconst collapsedSystems = options.chain.tabs[options.chain.active] ? (options.chain.tabs[options.chain.active].collapsed || []) : [];\n\n\t\t\tthis.renderer.draw(data.map, data.lines, collapsedSystems); // 150ms\n\t\t\t//this.map.draw(this.newView(data.map), this.options); // 150ms\n\n//\t\t\tthis.renderer.lines(data); // 300ms\n\t\t\tthis.grid(); // 4ms\n\n\t\t\t// Apply current system style\n\t\t\t$(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']\").parent().addClass(\"currentNode\"); // 0.1ms\n\n\t\t\t// Remove old system effect tooltips and add current ones\n\t\t\tif (WormholeTypeToolTips.attachedElements && WormholeTypeToolTips.attachedElements.length > 0) {\n\t\t\t\tWormholeTypeToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t\t}\n\t\t\tWormholeTypeToolTips.attach($(\"#chainMap .whEffect[data-icon]\")); // 0.30ms\n\t\t\tWormholeRouteToolTips.attach($(\"#chainMap .path span[data-tooltip]\"));\n\t\t\tSystemActivityToolTips.attach($(\"#chainMap .nodeClass span[data-tooltip]\"));\n\t\t\t\n\t\t\t// Update dependent controls: Path to chain/home\n\t\t\tif(data.closestToViewing) {\n\t\t\t\tconst inChain = data.closestToViewing.pathLength <= 1;\n\t\t\t\tconst prefixText = inChain ? 'In chain: ' : (data.closestToViewing.pathLength - 1) + 'j from ' ;\n\t\t\t\tconst pathHomeText = data.closestToViewing.pathHome.slice().reverse()\n\t\t\t\t\t.map(function(n) { return '<a href=\".?system=' + tripwire.systems[n.systemID].name + '\">' + (n.name || n.signatureID || '???') + '</a>'; })\n\t\t\t\t\t.join(' &gt; ');\n\t\t\t\tconst pathToChainText = inChain ? '' : '<br/>' + systemRendering.renderPath(guidance.findShortestPath(tripwire.map.shortest, data.closestToViewing.systemID - 30000000, viewingSystemID - 30000000));\n\t\t\t\t$(\"#infoExtra\").html(prefixText + pathHomeText + pathToChainText);\n\t\t\t\tTooltips.attach($(\"#infoExtra [data-tooltip]\"));\n\t\t\t} else { $(\"#infoExtra\").text(''); }\n\t\t\t\n\t\t\tthis.drawing = false;\n\t\t}\n\n\t\t// Gather latest system activity\n\t\tif (!this.data.activity || new Date() > this.data.activity.expires) {\n\t\t\tdata.activity = {};\n\t\t\ttripwire.esi.universeJumps()\n\t\t\t\t.done(function(results, status, request) {\n\t\t\t\t\tdata.activity.expires = new Date(request.getResponseHeader(\"expires\"));\n\t\t\t\t\t$.each(results, function(x) {\n\t\t\t\t\t\tdata.activity[results[x].system_id] = {\n\t\t\t\t\t\t\tsystemID: results[x].system_id,\n\t\t\t\t\t\t\tshipJumps: results[x].ship_jumps\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\t return tripwire.esi.universeKills()\n\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t$.each(results, function(x) {\n\t\t\t\t\t\t\t\tif (data.activity[results[x].system_id]) {\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].podKills = results[x].pod_kills;\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].shipKills = results[x].ship_kills;\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id].npcKills = results[x].npc_kills;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdata.activity[results[x].system_id] = {\n\t\t\t\t\t\t\t\t\t\tsystemID: results[x].system_id,\n\t\t\t\t\t\t\t\t\t\tpodKills: results[x].pod_kills,\n\t\t\t\t\t\t\t\t\t\tshipKills: results[x].ship_kills,\n\t\t\t\t\t\t\t\t\t\tnpcKills: results[x].npc_kills,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(function() {\n\t\t\t\t\tchain.data.activity = chain.activity(data.activity);\n\t\t\t\t});\n\t\t} else if (data.map) {\n\t\t\tchain.activity(this.data.activity);\n\t\t}\n\n\t\tif (data.occupied) { // 3ms\n\t\t\tthis.data.occupied = this.occupied(data.occupied);\n\t\t}\n\n\t\tif (data.flares) { // 20ms\n\t\t\tthis.data.flares = this.flares(data.flares);\n\t\t}\n\t}\n\n\tthis.updateCollapsed = function(collapsedSystems) {\n\t\tif (options.chain.tabs[options.chain.active]) {\n\t\t\toptions.chain.tabs[options.chain.active].collapsed = collapsedSystems;\n\t\t}\n\t\t\n\t\t// Apply current system style\n\t\t$(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']\").parent().addClass(\"currentNode\");\n\n\t\tif (WormholeTypeToolTips.attachedElements && WormholeTypeToolTips.attachedElements.length > 0) {\n\t\t\tWormholeTypeToolTips.detach($(\"#chainMap .whEffect\"));\n\t\t}\n\t\tWormholeTypeToolTips.attach($(\"#chainMap .whEffect[data-icon]\"));\n\n\t\tchain.activity(chain.data.activity);\n\n\t\tchain.occupied(chain.data.occupied);\n\n\t\tchain.flares(chain.data.flares);\n\n\t\tchain.grid();\n\n\t\toptions.save();\n\t}\n\n}\n","tripwire.active = function(data) {\n    var editSigs = [];\n    var editComments = [];\n\n    for (var x in data) {\n        var activity = JSON.parse(data[x].activity);\n        editSigs.push(parseInt(activity.editSig));\n        editComments.push(parseInt(activity.editComment));\n\n        if (activity.editSig) {\n            $(\"#sigTable tr[data-id='\"+activity.editSig+\"']\")\n                //.attr('data-tooltip', sig.editing)\n                //.attr(\"title\", sig.editing)\n                .addClass(\"editing\")\n                .find(\"td\")\n                .animate({backgroundColor: \"#001b47\"}, 1000); //35240A - Yellow\n        }\n\n        if (activity.editComment && $(\"#commentWrapper .comment[data-id='\"+activity.editComment+\"'] .cke\").length > 0) {\n            $(\"#commentWrapper .comment[data-id='\"+activity.editComment+\"']\")\n                .addClass(\"editing\")\n                .find(\".commentStatus\").html(data[x].characterName + \" is editing\").fadeIn();\n        }\n    }\n\n    $(\"#sigTable tr.editing\").each(function() {\n        if ($.inArray($(this).data(\"id\"), editSigs) == -1) {\n            $(\"#sigTable tr[data-id='\"+$(this).data(\"id\")+\"']\")\n                //.attr('data-tooltip', '')\n                //.removeAttr(\"title\")\n                .removeClass(\"editing\")\n                .find(\"td\")\n                .animate({backgroundColor: \"#111\"}, 1000, null, function() {$(this).css({backgroundColor: \"\"});});\n        }\n    });\n\n    $(\"#commentWrapper .editing\").each(function() {\n        if ($.inArray($(this).data(\"id\"), editComments) == -1) {\n            $(\"#commentWrapper .editing[data-id='\"+$(this).data(\"id\")+\"']\")\n                .removeClass(\"editing\")\n                .find(\".commentStatus\").fadeOut(function() {$(this).html(\"\")});\n        }\n    });\n}\n","// Hanldes adding to Signatures section\n// ToDo: Use native JS\ntripwire.makeSigInfo = function(sig, wormhole) {\n\twormhole = wormhole ||\t// allow to be passed in to save this lookup\n\t\tObject.values(tripwire.client.wormholes).find(function (wh) { return wh.initialID == sig.id || wh.secondaryID == sig.id});\n\tif (!wormhole) return false;\n\tvar otherSignature = sig.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\tif (!otherSignature) return false;\n\n\tlet leadsTo;\n\tif (sig.name) {\n\t  leadsTo = tripwire.systems[otherSignature.systemID] ? \"<a href='.?system=\"+tripwire.systems[otherSignature.systemID].name+\"'>\"+_.escape(sig.name)+\"</a>\" : _.escape(sig.name);\n\t} else if (tripwire.aSigSystems[otherSignature.systemID]) {\n\t\tleadsTo = tripwire.aSigSystems[otherSignature.systemID];\n\t} else if (tripwire.systems[otherSignature.systemID]) {\n\t\tleadsTo = \"<a href='.?system=\"+tripwire.systems[otherSignature.systemID].name+\"'>\"+tripwire.systems[otherSignature.systemID].name+\"</a>\";\n\t} else {\n\t\tleadsTo = \"\";\n\t}\n\n\tconst wormholeTypeText = wormhole.type || \"???\";\n\treturn {\n\t\tid: sig.id,\n\t\tleadsTo: leadsTo,\n\t\twormhole: wormhole,\n\t\tformattedType: (wormhole[wormhole.parent+\"ID\"] == sig.id ? wormholeTypeText : (wormhole.parent ? \"[\" + wormholeTypeText + \"]\" : \"\")),\n\t\tlifeText: { critical: 'EOL', stable: 'Stable' }[wormhole.life] || wormhole.life,\n\t}\n}\n\ntripwire.addSig = function(add, option, disabled) {\n    var option = option || {};\n    var animate = typeof(option.animate) !== 'undefined' ? option.animate : true;\n    var disabled = disabled || false;\n    var wormhole = {};\n\n\tconst returnLinkText = add.signatureID ? '<a class=\"return-link\" href=\"#\" onclick=\"tripwire.setReturnSig(event, ' + add.id + ')\">&gt;&gt; Set ' + \n\t\t\t\tadd.signatureID.substring(0, 3).toUpperCase() + '-' + add.signatureID.substring(3) +\n\t\t\t\t' as return</a>'\n\t\t\t\t: '';\n\n    if (add.type == \"wormhole\") {\n\t\tconst sigInfo = tripwire.makeSigInfo(add);\n\t\tif(!sigInfo) return false;\n\t\t\n\t\twormhole = sigInfo.wormhole;\n\t\t\n\t\tconst leadsToText = sigInfo.leadsTo ? sigInfo.leadsTo : \n\t\t\tadd.signatureID && add.signatureID.length && add.signatureID[0] != '?' ? returnLinkText\n\t\t\t: '';\t\n\n        var row = \"<tr data-id='\"+add.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(add.signatureID)+\"</td>\"\n            + \"<td class='type-tooltip \"+ options.signatures.alignment.sigType +\"' data-tooltip=\\\"\"+this.whTooltip(wormhole)+\"\\\">\"+sigInfo.formattedType+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(add.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(add)+\"'><span data-age='\"+add.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"'>\"+leadsToText+\"</td>\"\n            + \"<td class='\"+wormhole.life+\" \"+ options.signatures.alignment.sigLife +\"'>\"+sigInfo.lifeText+\"</td>\"\n            + \"<td class='\"+wormhole.mass+\" \"+ options.signatures.alignment.sigMass +\"'>\"+wormhole.mass+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    } else {\n\t\tconst leadsToText = add.type === 'unknown' ? returnLinkText : \n\t\t\t(add.name ? linkSig(add.name) : '');\n        var row = \"<tr data-id='\"+add.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(add.signatureID)+\"</td>\"\n            + \"<td class='\"+ options.signatures.alignment.sigType +\"'>\"+add.type+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(add.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(add)+\"'><span data-age='\"+add.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"' colspan='3'>\"+leadsToText+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    }\n\n    Tooltips.attach($(tr).find(\"[data-tooltip]\"));\n\n    $(\"#sigTable\").append(tr);\n\n    // Add counter\n    if (wormhole.life == \"critical\") {\n        $(tr).find('span[data-age]').countdown({until: moment.utc(add.lifeLeft).toDate(), onExpiry: this.pastEOL, alwaysExpire: true, compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime})\n            // .countdown('pause')\n            .addClass('critical')\n            // .countdown('resume');\n    } else {\n        $(tr).find('span[data-age]').countdown({since: moment.utc(add.lifeTime).toDate(), compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime});\n    }\n\n    if (animate) {\n        $(tr)\n            .find('td')\n            .wrapInner('<div class=\"hidden\" />')\n            .parent()\n            .find('td > div')\n            .slideDown(700, function(){\n                $set = $(this);\n                $set.replaceWith($set.contents());\n            });\n\n        $(tr).find(\"td\").animate({backgroundColor: \"#004D16\"}, 1000).delay(1000).animate({backgroundColor: \"#111\"}, 1000, null, function() {$(this).css({backgroundColor: \"\"});});\n    }\n}\n\ntripwire.setReturnSig = function(event, sigToRemoveId) {\n\tevent.preventDefault();\n\tconst sigToUpdate = tripwire.signatures.returnSig;\n\tconst sigToRemove = tripwire.client.signatures[sigToRemoveId];\n\t\n\tif(!(sigToUpdate && sigToRemove)) { return; }\n\t\n\tsigDialog.overwriteSignature(sigToRemoveId, function(data) {\n\t\tsigToUpdate.signatureID = sigToRemove.signatureID;\n\t\t// we need the wormhole part to make refresh.php not think the sig isn't a wormhole any more\n\t\tconst payload = {\"signatures\": {\"update\": [ { wormhole: 'dummy', signatures: [ sigToUpdate ] } ] }};\n\t\ttripwire.refresh('refresh', payload);\n\t});\n}","// Handles API updates\ntripwire.API = function() {\n    this.indicator;\n    this.APIrefresh;\n\n    this.API.expire = function() {\n        var options = {since: tripwire.API.APIrefresh, until: null, format: \"MS\", layout: \"-{mnn}{sep}{snn}\"};\n        $(\"#APItimer\").countdown(\"option\", options);\n    }\n\n    this.API.refresh = function() {\n        $.ajax({\n            url: \"api_update.php\",\n            cache: false,\n            dataType: \"JSON\",\n            data: \"indicator=\"+tripwire.API.indicator\n        }).done(function(data) {\n            if (data && data.APIrefresh) {\n                tripwire.API.indicator = data.indicator;\n                tripwire.API.APIrefresh = new Date(data.APIrefresh);\n                activity.refresh(); //Refresh graph\n\n                var options = {until: tripwire.API.APIrefresh, since: null, layout: \"{mnn}{sep}{snn}\"};\n                $(\"#APItimer\").countdown(\"option\", options);\n                setTimeout(\"tripwire.API.refresh();\", $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30);\n            } else if ($(\"#APItimer\").countdown(\"option\", \"layout\") !== \"-{mnn}{sep}{snn}\" && $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) > 120) {\n                setTimeout(\"tripwire.API.refresh();\", ($.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30) * 1000);\n            } else {\n                setTimeout(\"tripwire.API.refresh();\", 15000);\n            }\n        });\n    }\n\n    this.API.init = function() {\n        $.ajax({\n            url: \"api_update.php\",\n            cache: true,\n            dataType: \"JSON\",\n            data: \"init=true\"\n        }).done(function(data) {\n            tripwire.API.indicator = data.indicator;\n            tripwire.API.APIrefresh = new Date(data.APIrefresh);\n\n            $(\"#APItimer\").countdown({until: tripwire.API.APIrefresh, onExpiry: tripwire.API.expire, alwaysExpire: true, compact: true, format: \"MS\", serverSync: tripwire.serverTime.getTime, onTick: function(t) { $(\"#APIclock\").val(t[5] + 1).trigger(\"change\"); }})\n            var timer = $(\"#APItimer\").countdown(\"option\", \"layout\") === \"-{mnn}{sep}{snn}\" ? 15 : $.countdown.periodsToSeconds($(\"#APItimer\").countdown('getTimes')) - 30;\n            setTimeout(\"tripwire.API.refresh();\", timer * 1000);\n        });\n    }\n\n    this.API.init();\n}\n// tripwire.API();\n","const automapState = {\n\tpendingDecision: false\n};\n\ntripwire.autoMapper = function(from, to) {\n    var pods = [33328, 670];\n    var undo = [];\n\t\n    // Convert from & to from system name to system ID for diagnostic testing\n    // from = viewingSystemID;\n    // to = Object.index(tripwire.systems, 'name', to);\n\n    // Make sure the automapper is turned on & not disabled\n    if (!$(\"#toggle-automapper\").hasClass(\"active\") || $(\"#toggle-automapper\").hasClass(\"disabled\"))\n        return false;\n\n\t// Not waiting on a decision for the previous jump\n\tif(automapState.pendingDecision) {\n\t\tconsole.info('Not automapping because there is an automap dialog up');\n\t\treturn false;\n\t}\n\n    // Make sure from and to are valid systems\n    if (!tripwire.systems[from] || !tripwire.systems[to])\n        return false;\n\n    // Make sure from and to are not the same system\n    if (from == to)\n        return false;\n\t\n\t// Not into a special region e.g. abyssal space\n\tif(tripwire.systems[from].regionID > 12000000 || tripwire.systems[to].regionID > 12000000) {\n\t\tconsole.info('Not automapping into abyssal or other special space');\n\t\treturn false;\n\t}\n\t\n    // Is pilot in a station?\n    if (tripwire.client.EVE && tripwire.client.EVE.stationID)\n        return false;\n\n    // Is pilot in a pod?\n    if (tripwire.client.EVE && tripwire.client.EVE.shipTypeID && $.inArray(parseInt(tripwire.client.EVE.shipTypeID), pods) >= 0)\n         return false;\n\n    // Is this a gate?\n    if (typeof(tripwire.map.shortest[from - 30000000]) != \"undefined\" && typeof(tripwire.map.shortest[from - 30000000][to - 30000000]) != \"undefined\")\n        return false;\n\n     // Is this an existing connection?\n     if ($.map(tripwire.client.wormholes,\n               function(wormhole) {\n                 const initial = tripwire.client.signatures[wormhole.initialID];\n                 const secondary = tripwire.client.signatures[wormhole.secondaryID];\n                 return initial && secondary &&\n                   ((initial.systemID == from && secondary.systemID == to) ||\n                    (initial.systemID == to && secondary.systemID == from))  ? wormhole : null;\n               }).length > 0) {\n       return false;\n     }\n\t \n\t // Are both systems already in chain? Loops do happen but it's much more likely ESI missed a jump\n\t function inChain(systemID) { return chain.data.map.rows.filter(r => r.c[0].systemID == systemID).length > 0; }\n\tif(inChain(from) && inChain(to)) {\n\t\tconsole.info('Not automapping because both systems are already in chain');\n\t\treturn false;\n\t}\t \n\n    var payload = {\"signatures\": {\"add\": [], \"update\": []}};\n    var sig, toClass;\n\n    if (tripwire.systems[to].class)\n        toClass = \"Class-\" + tripwire.systems[to].class;\n    else if (tripwire.systems[to].security >= 0.45)\n        toClass = \"High-Sec\";\n    else if (tripwire.systems[to].security > 0)\n        toClass = \"Low-Sec\";\n    else\n        toClass = \"Null-Sec\";\n\n    var wormholes = $.map(tripwire.client.wormholes, function(wormhole) {\n        if ( ( tripwire.client.signatures[wormhole.initialID] !== undefined ) && ( tripwire.client.signatures[wormhole.secondaryID] !== undefined ) ) {\n            // Find wormholes that have no set Leads To system, and their initial system is from the wormhole we just jumped from\n            if (tripwire.client.signatures[wormhole.initialID].systemID == from && !tripwire.systems[tripwire.client.signatures[wormhole.secondaryID].systemID]) {\n                if (tripwire.aSigSystems[tripwire.client.signatures[wormhole.secondaryID].systemID] == toClass) {\n                    // Find wormholes that Leads To is generically set to the class we just jumped into\n                    return wormhole;\n                } else if (wormhole.type && tripwire.wormholes[wormhole.type] && tripwire.wormholes[wormhole.type].leadsTo.replace(' ', '-') == toClass) {\n                    // Find wormholes that Type is known to lead to the class we just jumped into\n                    return wormhole;\n                } else if (tripwire.client.signatures[wormhole.secondaryID].systemID === null && (!wormhole.type || !tripwire.wormholes[wormhole.type])) {\n                    // Find wormholes that don't have a Type or any kind of Leads To entered\n                    return wormhole;\n                }\n            }\n        }\n    });\n\n    if (wormholes.length) {\n        if (wormholes.length > 1) {\n            $(\"#dialog-select-signature\").dialog({\n                autoOpen: true,\n                title: \"Which Signature?\",\n                width: 390,\n                buttons: {\n                    Cancel: function() {\n                        $(this).dialog(\"close\");\n                    },\n                    Ok: function() {\n                        var i = $(\"#dialog-select-signature [name=sig]:checked\").val();\n                        var wormhole = wormholes[i];\n                        var signature = tripwire.client.signatures[wormhole.initialID];\n                        var signature2 = tripwire.client.signatures[wormhole.secondaryID];\n\n                        payload.signatures.update.push({\n                            \"wormhole\": {\n                                \"id\": wormhole.id\n                            },\n                            \"signatures\": [\n                                {\n                                    \"id\": signature.id\n                                },\n                                {\n                                    \"id\": signature2.id,\n                                    \"systemID\": to\n                                }\n                            ]\n                        });\n\n                        var success = function(data) {\n                            if (data.resultSet && data.resultSet[0].result == true) {\n                                undo.push({\"wormhole\": wormhole, \"signatures\": [signature, signature2]});\n                                $(\"#dialog-select-signature\").dialog(\"close\");\n                            }\n                        }\n\n                        tripwire.refresh('refresh', payload, success);\n                    }\n                },\n                open: function() {\n\t\t\t\t\tautomapState.pendingDecision = true;\n                    $(\"#dialog-select-signature .optionsTable tbody\").empty();\n\t\t\t\t\t\n\t\t\t\t\tfunction formatSystem(systemID) {\n\t\t\t\t\t\tconst system = systemAnalysis.analyse(systemID);\n\t\t\t\t\t\treturn '<b>' + system.name + '</b> (<span class=\"' + system.systemTypeClass + '\">' + system.systemTypeName + '</span>)'; \n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tdocument.getElementById('select-sig-from').innerHTML = formatSystem(from);\n\t\t\t\t\tdocument.getElementById('select-sig-to').innerHTML = formatSystem(to);\n\n                    $.each(wormholes, function(i) {\n                        const signature = tripwire.client.signatures[wormholes[i].initialID];\n\t\t\t\t\t\tconst sigInfo = tripwire.makeSigInfo(signature, wormholes[i]);\n\t\t\t\t\t\t\n                        const tr = \"<tr>\"\n                          + \"<td><input type='radio' name='sig' value='\"+i+\"' id='sig\"+i+\"' /></td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + formatSignatureID(signature.signatureID) + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + sigInfo.formattedType + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign'>\" + sigInfo.leadsTo + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign \" + wormholes[i].life + \"'>\" + sigInfo.lifeText + \"</td>\"\n\t\t\t\t\t\t  + \"<td class='centerAlign \" + wormholes[i].mass + \"'>\" + wormholes[i].mass + \"</td>\"\n                          + \"</tr>\";\n\t\t\t\t\t\t  \n\t\t\t\t\t\tconst trElem = $(tr);\n                        $(trElem).find('td').wrapInner(\"<label for='sig\"+i+\"' />\");\n                        $(\"#dialog-select-signature .optionsTable tbody\").append(trElem);\n                    });\n                }, close: function() {\n\t\t\t\t\tautomapState.pendingDecision = false;\n\t\t\t\t}\n            });\n        } else {\n            var wormhole = wormholes[0];\n            var signature = tripwire.client.signatures[wormhole.initialID];\n            var signature2 = tripwire.client.signatures[wormhole.secondaryID];\n\n            payload.signatures.update.push({\n                \"wormhole\": {\n                    \"id\": wormhole.id\n                },\n                \"signatures\": [\n                    {\n                        \"id\": signature.id\n                    },\n                    {\n                        \"id\": signature2.id,\n                        \"systemID\": to\n                    }\n                ]\n            });\n            undo.push({\"wormhole\": wormhole, \"signatures\": [signature, signature2]});\n        }\n    } else {\n        // Nothing matches, create a new wormhole\n        payload.signatures.add.push({\n            \"wormhole\": {\n                \"type\": null,\n                \"parent\": \"initial\",\n                \"life\": \"stable\",\n                \"mass\": \"stable\"\n            },\n            \"signatures\": [\n                {\n                    \"systemID\": from,\n                    \"type\": \"wormhole\"\n                },\n                {\n                    \"systemID\": to,\n                    \"type\": \"wormhole\"\n                }\n            ]\n        });\n    }\n\n    if (payload.signatures.add.length || payload.signatures.update.length) {\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                $(\"#undo\").removeClass(\"disabled\");\n\n                if (data.results) {\n                    if (viewingSystemID in tripwire.signatures.undo) {\n                        tripwire.signatures.undo[viewingSystemID].push({action: \"add\", signatures: data.results});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: \"add\", signatures: data.results}];\n                    }\n                }\n\n                if (undo.length) {\n                    if (viewingSystemID in tripwire.signatures.undo) {\n                        tripwire.signatures.undo[viewingSystemID].push({action: \"update\", signatures: undo});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: \"update\", signatures: undo}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n            }\n        }\n\n        tripwire.refresh('refresh', payload, success);\n    }\n}\n","$(\"body\").on(\"dblclick\", \".comment\", function(e) {\n\te.preventDefault();\n\tdocument.getSelection().removeAllRanges();\n\t$(this).find(\".commentEdit\").click();\n})\n\n$(\"body\").on(\"click\", \".commentEdit\", function(e) {\n\te.preventDefault();\n\n\t// Prevent multiple editors\n\tif ($(\".cke\").length) return false;\n\n\tvar $comment = $(this).closest(\".comment\");\n\n\t$comment.find(\".commentToolbar\").hide();\n\n\tCKEDITOR.replace($comment.find(\".commentBody\").attr(\"id\"), CKConfig).on(\"instanceReady\", function() {\n\t\t$comment.find(\".commentStatus\").html(\"\");\n\t\t$comment.find(\".commentFooter\").show();\n\t\t$comment.find(\".commentFooter .commentControls\").show();\n\t});\n\n\ttripwire.activity.editComment = $comment.data(\"id\");\n\ttripwire.refresh('refresh');\n});\n\n$(\"body\").on(\"click\", \".commentSave, .commentCancel\", function(e) {\n\te.preventDefault();\n\tvar $this = $(this);\n\tif ($this.attr(\"disabled\")) return false;\n\n\tvar $comment = $this.closest(\".comment\");\n\t$this.attr(\"disabled\", \"true\");\n\n\tif ($this.hasClass(\"commentSave\")) {\n\t\tvar data = {\"mode\": \"save\", \"commentID\": $comment.data(\"id\"), \"systemID\": $comment.find(\".commentSticky\").hasClass(\"active\") ? 0 : viewingSystemID, \"comment\": CKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].getData()};\n\n\t\t$.ajax({\n\t\t\turl: \"comments.php\",\n\t\t\ttype: \"POST\",\n\t\t\tdata: data,\n\t\t\tdataType: \"JSON\"\n\t\t}).done(function(data) {\n\t\t\tif (data && data.result == true) {\n\t\t\t\t$comment.find(\".commentModified\").html(\"Edited by \" + data.comment.modifiedByName + \" at \" + data.comment.modifiedDate);\n\t\t\t\t$comment.find(\".commentCreated\").html(\"Posted by \" + data.comment.createdByName + \" at \" + data.comment.createdDate);\n\t\t\t\tTooltips.attach($comment.find(\"[data-tooltip]\"));\n\n\t\t\t\tCKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].destroy(false);\n\t\t\t\t$comment.attr(\"data-id\", data.comment.id);\n\t\t\t\t$comment.find(\".commentToolbar\").show();\n\t\t\t\t$comment.find(\".commentFooter\").hide();\n\t\t\t\t$this.removeAttr(\"disabled\");\n\t\t\t}\n\t\t});\n\t} else {\n\t\tCKEDITOR.instances[$comment.find(\".commentBody\").attr(\"id\")].destroy(true);\n\n\t\tif (!$comment.attr(\"data-id\")) {\n\t\t\t$comment.remove();\n\t\t} else {\n\t\t\t$comment.find(\".commentToolbar\").show();\n\t\t\t$comment.find(\".commentFooter\").hide();\n\t\t\t$this.removeAttr(\"disabled\");\n\t\t}\n\t}\n\n\t$comment.find(\".commentStatus\").html(\"\");\n\n\tdelete tripwire.activity.editComment;\n\ttripwire.refresh('refresh');\n});\n\n$(\"body\").on(\"click\", \".commentDelete\", function(e) {\n\te.preventDefault();\n\tvar $comment = $(this).closest(\".comment\");\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-deleteComment\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-deleteComment\").data(\"comment\", $comment).dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tposition: {my: \"center\", at: \"center\", of: $(\"#notesWidget\")},\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tDelete: function() {\n\t\t\t\t\t// Prevent duplicate submitting\n\t\t\t\t\t$(\"#dialog-deleteComment\").parent().find(\":button:contains('Delete')\").button(\"disable\");\n\n\t\t\t\t\tvar $comment = $(this).data(\"comment\");\n\t\t\t\t\tvar data = {\"mode\": \"delete\", \"commentID\": $comment.data(\"id\")};\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"comments.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t}).done(function(data) {\n\t\t\t\t\t\tif (data && data.result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-deleteComment\").dialog(\"close\");\n\t\t\t\t\t\t\t$comment.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t$(\"#dialog-deleteComment\").parent().find(\":button:contains('Delete')\").button(\"enable\");\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-deleteComment\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-deleteComment\").data(\"comment\", $comment).dialog(\"open\");\n\t}\n});\n\n$(\"body\").on(\"click\", \"#add-comment\", function(e) {\n\te.preventDefault();\n\n\t// Prevent multiple editors\n\tif ($(\".cke\").length) return false;\n\n\tvar $comment = $(\".comment:last\").clone();\n\tvar commentID = $(\".comment:visible:last .commentBody\").attr(\"id\") ? $(\".comment:visible:last .commentBody\").attr(\"id\").replace(\"comment\", \"\") + 1 : 0;\n\t$(\".comment:last\").before($comment);\n\n\t$comment.find(\".commentBody\").attr(\"id\", \"comment\" + commentID);\n\t$comment.removeClass(\"hidden\").find(\".commentEdit\").click();\n});\n\n$(\"body\").on(\"click\", \".commentSticky\", function(e) {\n\te.preventDefault();\n\tvar $comment = $(this).closest(\".comment\");\n\n\tvar data = {\"mode\": \"sticky\", \"commentID\": $comment.data(\"id\"), \"systemID\": $comment.find(\".commentSticky\").hasClass(\"active\") ? viewingSystemID : 0};\n\n\t$.ajax({\n\t\turl: \"comments.php\",\n\t\ttype: \"POST\",\n\t\tdata: data,\n\t\tdataType: \"JSON\"\n\t}).done(function(data) {\n\t\tif (data && data.result == true) {\n\t\t\t$comment.find(\".commentSticky\").hasClass(\"active\") ? $comment.find(\".commentSticky\").removeClass(\"active\") : $comment.find(\".commentSticky\").addClass(\"active\");\n\t\t}\n\t});\n});\n\nfunction commentSortHandler(sortOrder) {\n\tconst sortElem = document.getElementById('comment-sort');\n\tconst containerElem = document.getElementById('comment-container');\n\tsortOrder = sortOrder || sortElem.nextSort || getCookie('commentSort') || 'asc';\n\t\n\tswitch(sortOrder) {\n\t\tcase 'asc':\n\t\t\tsortElem.nextSort = 'desc';\n\t\t\tsortElem.setAttribute('data-icon', 'sort-asc');\n\t\t\tcontainerElem.style.flexDirection = 'column';\n\t\t\tbreak;\n\t\tcase 'desc':\n\t\t\tsortElem.nextSort = 'asc';\n\t\t\tsortElem.setAttribute('data-icon', 'sort-desc');\n\t\t\tcontainerElem.style.flexDirection = 'column-reverse';\n\t\t\tbreak;\n\t\tdefault: throw 'sort order somehow wrong';\n\t}\n\t\n\tsetCookie('commentSort', sortOrder, 3650);\n}\n\n$(\"body\").on(\"click\", \"#comment-sort\", function(e) {\n\tcommentSortHandler(undefined);\n});\n\ncommentSortHandler();","// Handles removing from Signatures section\ntripwire.deleteSig = function(key) {\n    var tr = $(\"#sigTable tr[data-id='\"+key+\"']\");\n\n    //Append empty space to prevent non-coloring\n    $(tr).find('td:empty, a:empty').append(\"&nbsp;\");\n\n    $(tr)\n        .find('td')\n        .wrapInner('<div />')\n        .parent()\n        .find('td > div').animate({backgroundColor: \"#4D0000\"}, 1000).delay(1000).animate({backgroundColor: \"#111\"}, 1000)\n        .slideUp(700, function(){\n            // Remove countdown reference\n            $(tr).find('span[data-age]').countdown(\"destroy\");\n\n            $(this).parent().parent().remove();\n            $(\"#sigTable\").trigger(\"update\");\n        });\n}\n","// Handles changing Signatures section\n// ToDo: Use native JS\ntripwire.editSig = function(edit, disabled) {\n    var disabled = disabled || false;\n    var wormhole = {};\n\n    if (edit.type == \"wormhole\") {\n\t\tconst sigInfo = tripwire.makeSigInfo(edit);\t// see addSignature.js\n\t\tif(!sigInfo) return false;\n\t\t\n\t\twormhole = sigInfo.wormhole;\n\n        var row = \"<tr data-id='\"+edit.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(edit.signatureID)+\"</td>\"\n            + \"<td class='type-tooltip \"+ options.signatures.alignment.sigType +\"' data-tooltip=\\\"\"+this.whTooltip(wormhole)+\"\\\">\"+sigInfo.formattedType+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(edit.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(edit)+\"'><span data-age='\"+edit.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"'>\"+(sigInfo.leadsTo || \"\")+\"</td>\"\n            + \"<td class='\"+wormhole.life+\" \"+ options.signatures.alignment.sigLife +\"'>\"+sigInfo.lifeText+\"</td>\"\n            + \"<td class='\"+wormhole.mass+\" \"+ options.signatures.alignment.sigMass +\"'>\"+wormhole.mass+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    } else {\n        var row = \"<tr data-id='\"+edit.id+\"' data-tooltip='' \"+ (disabled ? 'disabled=\"disabled\"' : '') +\">\"\n            + \"<td class='\"+ options.signatures.alignment.sigID +\"'>\"+formatSignatureID(edit.signatureID)+\"</td>\"\n            + \"<td class='\"+ options.signatures.alignment.sigType +\"'>\"+edit.type+\"</td>\"\n            + \"<td class='age-tooltip \"+ options.signatures.alignment.sigAge + (parseInt(edit.lifeLength) === 0 ? \" disabled\" : \"\") +\"' data-tooltip='\"+this.ageTooltip(edit)+\"'><span data-age='\"+edit.lifeTime+\"'></span></td>\"\n            + \"<td class='\"+ options.signatures.alignment.leadsTo +\"' colspan='3'>\"+(edit.name?linkSig(edit.name):'')+\"</td>\"\n            + \"</tr>\";\n\n        var tr = $(row);\n    }\n\n    Tooltips.attach($(tr).find(\"[data-tooltip]\"));\n\n    // Destroy the pervious countdown to prevent errors on a non-existant DOM element\n    $(\"#sigTable tr[data-id='\"+edit.id+\"']\").find('span[data-age]').countdown(\"destroy\");\n    $(\"#sigTable tr[data-id='\"+edit.id+\"']\").replaceWith(tr);\n\n    $(\"#sigTable\").trigger(\"update\");\n    // Update counter\n    if (wormhole.life == \"critical\") {\n        $(tr).find('span[data-age]').countdown({until: moment.utc(edit.lifeLeft).toDate(), onExpiry: this.pastEOL, alwaysExpire: true, compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime})\n            .addClass('critical');\n    } else {\n        $(tr).find('span[data-age]').countdown({since: moment.utc(edit.lifeTime).toDate(), compact: true, format: this.ageFormat, serverSync: this.serverTime.getTime});\n    }\n\n    $(tr).effect(\"pulsate\");\n}\n","tripwire.esi = function() {\n    var baseUrl = \"https://esi.evetech.net\";\n    var userAgent = \"Tripwire Client \" + tripwire.version + \" (\" + window.location.hostname + \") - \" + window.navigator.userAgent;\n    var locationTimer, shipTimer, onlineTimer;\n    this.esi.connection = true;\n    this.esi.characters = {};\n    this.esi.oauth = { subject: \"\", accessToken: \"\"};\n\n    var scopeError = function(characterID) {\n        $(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").find(\".alert\").show();\n    }\n\n\tvar isExpired = function(tokenExpire) {\n\t\treturn moment.utc(tokenExpire).subtract(5, \"minutes\").isBefore(moment());\n\t}\n\n    this.esi.location = function() {\n        clearTimeout(locationTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            // Check for expiring token\n            if (isExpired(character.tokenExpire)) {\n                tripwire.data.esi = {\"expired\": true};\n                continue;\n            }\n\n            const xhr = $.ajax({\n                url: baseUrl + \"/v1/characters/\"+ characterID +\"/location/?\" + $.param({\"token\": character.accessToken, \"user_agent\": userAgent}),\n                // headers: {\"Authorization\": \"Bearer \"+ character.accessToken, \"X-User-Agent\": userAgent},\n                type: \"GET\",\n                dataType: \"JSON\",\n                characterID: characterID\n            }).done(function(data, status, jqXHR) {\n                var character = tripwire.esi.characters[this.characterID];\n\n                if (character) {\n                    character.locationDate = moment(jqXHR.getResponseHeader(\"last-modified\"), \"ddd, DD MMMM YYYY HH:mm:ss\").format();\n\n                    if (character.systemID != data.solar_system_id) {\n                        character.systemID = data.solar_system_id || null;\n                        character.systemName = tripwire.systems[data.solar_system_id] ? tripwire.systems[data.solar_system_id].name : null;\n\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".system\").html(character.systemName || \"&nbsp;\");\n\n                        // Send to Tripwire server on next refresh call\n                        tripwire.data.tracking[this.characterID] = {\n                            characterID: character.characterID,\n                            characterName: character.characterName,\n                            systemID: character.systemID,\n                            systemName: character.systemName,\n                            stationID: character.stationID,\n                            stationName: character.stationName,\n                            shipID: character.shipID,\n                            shipName: character.shipName,\n                            shipTypeID: character.shipTypeID,\n                            shipTypeName: character.shipTypeName};\n                    }\n\n                    if (character.stationID != data.station_id) {\n                        character.stationID = data.station_id || null;\n\n                        if (data.station_id) {\n                            tripwire.esi.stationLookup(data.station_id, this.characterID)\n                                .always(function(data) {\n                                    var character = tripwire.esi.characters[this.reference];\n\n                                    character.stationName = data.name || null;\n                                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"']\").find(\".station\").html(data.name.substring(0, 17) + \"...\" || \"&nbsp;\").attr(\"data-tooltip\", data.name);\n                                    Tooltips.attach($(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"'] .station[data-tooltip]\"));\n\n                                    // Send to Tripwire server on next refresh call\n                                    tripwire.data.tracking[this.reference] = {\n                                        characterID: character.characterID,\n                                        characterName: character.characterName,\n                                        systemID: character.systemID,\n                                        systemName: character.systemName,\n                                        stationID: character.stationID,\n                                        stationName: character.stationName,\n                                        shipID: character.shipID,\n                                        shipName: character.shipName,\n                                        shipTypeID: character.shipTypeID,\n                                        shipTypeName: character.shipTypeName};\n                                });\n                        } else {\n                            character.stationName = null;\n                            // $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".station\").html(\"&nbsp;\").attr(\"data-tooltip\", \"&nbsp;\");\n                            Tooltips.detach($(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"'] .station[data-tooltip]\"));\n\n                            // Send to Tripwire server on next refresh call\n                            tripwire.data.tracking[this.characterID] = {\n                                characterID: character.characterID,\n                                characterName: character.characterName,\n                                systemID: character.systemID,\n                                systemName: character.systemName,\n                                stationID: character.stationID,\n                                stationName: character.stationName,\n                                shipID: character.shipID,\n                                shipName: character.shipName,\n                                shipTypeID: character.shipTypeID,\n                                shipTypeName: character.shipTypeName};\n                        }\n                    }\n\n                    if (options.tracking.active == this.characterID) {\n                        tripwire.EVE(tripwire.esi.characters[options.tracking.active]);\n                    }\n                }\n            }).fail(function(data) {\n                if (data.status == 403) {\n                    tripwire.refresh(\"refresh\", {\"esi\": {\"expired\": true}});\n                }\n            }).always(function(data, status, jqXHR) {\n                if (status != \"success\" && status != \"abort\" && tripwire.esi.connection == true) {\n                    tripwire.esi.connection = false;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Failed\", \"red\", false, \"esiConnectionError\");\n                } else if (status == \"success\" && tripwire.esi.connection == false) {\n                    tripwire.esi.connection = true;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Resumed\", \"green\", 5000, \"esiConnectionSuccess\");\n                }\n            });\n            xhr.always(function(){\n                const warn = xhr.getResponseHeader('warning');\n                if (warn) console.warn('ESI API Warning: ', warn, this.url);\n            });\n        }\n\n        locationTimer = setTimeout(\"tripwire.esi.location()\", 5000);\n    }\n\n    this.esi.ship = function() {\n        clearTimeout(shipTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            // Check for expiring token\n            if (isExpired(character.tokenExpire)) {\n                tripwire.data.esi = {\"expired\": true};\n                continue;\n            }\n\n            const xhr = $.ajax({\n                url: baseUrl + \"/v1/characters/\"+ characterID +\"/ship/?\" + $.param({\"token\": character.accessToken, \"user_agent\": userAgent}),\n                // headers: {\"Authorization\": \"Bearer \"+ character.accessToken, \"X-User-Agent\": userAgent},\n                type: \"GET\",\n                dataType: \"JSON\",\n                characterID: characterID\n            }).done(function(data, status, jqXHR) {\n                var character = tripwire.esi.characters[this.characterID];\n\n                if (character) {\n                    character.shipDate = moment(jqXHR.getResponseHeader(\"last-modified\"), \"ddd, DD MMMM YYYY HH:mm:ss\").format();\n\n                    if (character.shipID != data.ship_item_id) {\n                        character.shipID = data.ship_item_id || null;\n\n                        // Send to Tripwire server on next refresh call\n                        tripwire.data.tracking[this.characterID] = {\n                            characterID: character.characterID,\n                            characterName: character.characterName,\n                            systemID: character.systemID,\n                            systemName: character.systemName,\n                            stationID: character.stationID,\n                            stationName: character.stationName,\n                            shipID: character.shipID,\n                            shipName: character.shipName,\n                            shipTypeID: character.shipTypeID,\n                            shipTypeName: character.shipTypeName};\n                    }\n\n                    if (character.shipName != data.ship_name) {\n                        character.shipName = data.ship_name || null;\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".shipname\").html(data.ship_name || \"&nbsp;\");\n\n                        // Send to Tripwire server on next refresh call\n                        tripwire.data.tracking[this.characterID] = {\n                            characterID: character.characterID,\n                            characterName: character.characterName,\n                            systemID: character.systemID,\n                            systemName: character.systemName,\n                            stationID: character.stationID,\n                            stationName: character.stationName,\n                            shipID: character.shipID,\n                            shipName: character.shipName,\n                            shipTypeID: character.shipTypeID,\n                            shipTypeName: character.shipTypeName};\n                    }\n\n                    if (character.shipTypeID != data.ship_type_id) {\n                        character.shipTypeID = data.ship_type_id || null;\n\n                        if (data.ship_type_id) {\n                            tripwire.esi.typeLookup(data.ship_type_id, this.characterID)\n                                .always(function(data) {\n                                    var character = tripwire.esi.characters[this.reference];\n\n                                    character.shipTypeName = data.name || null;\n                                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference +\"']\").find(\".ship\").html(data.name || \"&nbsp;\");\n\n                                    // Send to Tripwire server on next refresh call\n                                    tripwire.data.tracking[this.reference] = {\n                                        characterID: character.characterID,\n                                        characterName: character.characterName,\n                                        systemID: character.systemID,\n                                        systemName: character.systemName,\n                                        stationID: character.stationID,\n                                        stationName: character.stationName,\n                                        shipID: character.shipID,\n                                        shipName: character.shipName,\n                                        shipTypeID: character.shipTypeID,\n                                        shipTypeName: character.shipTypeName};\n                                });\n                        } else {\n                            character.shipTypeName = null;\n                            $(\"#tracking .tracking-clone[data-characterid='\"+ this.characterID +\"']\").find(\".ship\").html(\"&nbsp;\");\n\n                            // Send to Tripwire server on next refresh call\n                            tripwire.data.tracking[this.characterID] = {\n                                characterID: character.characterID,\n                                characterName: character.characterName,\n                                systemID: character.systemID,\n                                systemName: character.systemName,\n                                stationID: character.stationID,\n                                stationName: character.stationName,\n                                shipID: character.shipID,\n                                shipName: character.shipName,\n                                shipTypeID: character.shipTypeID,\n                                shipTypeName: character.shipTypeName};\n                        }\n                    }\n                }\n            }).fail(function(data) {\n                if (data.status == 403) {\n                    tripwire.refresh(\"refresh\", {\"esi\": {\"expired\": true}});\n                }\n            }).always(function(data, status, jqXHR) {\n                if (status != \"success\" && status != \"abort\" && tripwire.esi.connection == true) {\n                    tripwire.esi.connection = false;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Failed\", \"red\", false, \"esiConnectionError\");\n                } else if (status == \"success\" && tripwire.esi.connection == false) {\n                    tripwire.esi.connection = true;\n                    $(\"#esiConnectionSuccess, #esiConnectionError\").click();\n                    Notify.trigger(\"ESI Connection Resumed\", \"green\", 5000, \"esiConnectionSuccess\");\n                }\n            });\n            xhr.always(function(){\n                const warn = xhr.getResponseHeader('warning');\n                if (warn) console.warn('ESI API Warning: ', warn, this.url);\n            });\n\n        }\n\n        shipTimer = setTimeout(\"tripwire.esi.ship()\", 5000);\n    }\n\n    this.esi.online = function() {\n        clearTimeout(onlineTimer);\n\n        for (characterID in tripwire.esi.characters) {\n            var character = tripwire.esi.characters[characterID];\n\n            tripwire.esi.characterStatus(character.characterID, character)\n                .done(function(data) {\n                    if (data.online) {\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"critical\").addClass(\"stable\");\n                    } else {\n                        $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"stable\").addClass(\"critical\");\n                    }\n                }).fail(function(data) {\n                    if (data && data.status == 403) {\n                        scopeError(this.reference.characterID);\n                    }\n                    $(\"#tracking .tracking-clone[data-characterid='\"+ this.reference.characterID +\"']\").find(\".online\").removeClass(\"stable\").addClass(\"critical\");\n                });\n        }\n\n        onlineTimer = setTimeout(\"tripwire.esi.online()\", 60000);\n    }\n\n    this.esi.typeLookup = function(typeID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v3/universe/types/\"+ typeID +\"/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.stationLookup = function(stationID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/stations/\"+ stationID +\"/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.setDestination = function(destinationID, characterID, clear_waypoints, beginning) {\n        clear_waypoints = clear_waypoints ? clear_waypoints : false;\n        beginning = beginning ? beginning : false;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/ui/autopilot/waypoint/?\" + $.param({destination_id: destinationID, clear_other_waypoints: clear_waypoints, add_to_beginning: beginning}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"POST\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.showInfo = function(targetID, characterID) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/ui/openwindow/information/?\" + $.param({target_id: targetID}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"POST\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.characterStatus = function(characterID, reference) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/characters/\" + characterID + \"/online/?\" + $.param({\"token\": tripwire.esi.characters[characterID].accessToken, \"user_agent\": userAgent}),\n            // headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.characters[characterID].accessToken, \"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\",\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.eveStatus = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/status/?\" + $.param({\"user_agent\": userAgent}),\n            // headers: {\"X-User-Agent\": userAgent},\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.idLookup = function(eveIDs) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/names/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"POST\",\n            dataType: \"JSON\",\n            contentType: \"application/json\",\n            processData: false,\n            data: JSON.stringify(eveIDs)\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.characterLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/latest/characters/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.corporationLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v4/corporations/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.allianceLookup = function(eveID, reference, async) {\n        var async = typeof(async) !== 'undefined' ? async : true;\n        const xhr = $.ajax({\n            url: baseUrl + \"/v3/alliances/\" + eveID + \"/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\",\n            async: async,\n            eveID: eveID,\n            reference: reference\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.search = function(searchString, categories, strict) {\n        const xhr = $.ajax({\n            url: baseUrl + \"/latest/characters/\" + tripwire.esi.oauth.subject + \"/search/?\" + $.param({\"user_agent\": userAgent}),\n            headers: {\"Authorization\": \"Bearer \"+ tripwire.esi.oauth.accessToken},\n            type: \"GET\",\n            dataType: \"JSON\",\n            contentType: \"application/json\",\n            data: {\"search\": searchString, \"categories\": categories, \"strict\": strict}\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.universeJumps = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v1/universe/system_jumps/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    this.esi.universeKills = function() {\n        const xhr = $.ajax({\n            url: baseUrl + \"/v2/universe/system_kills/?\" + $.param({\"user_agent\": userAgent}),\n            type: \"GET\",\n            dataType: \"JSON\"\n        });\n        return xhr.always(function(){\n            const warn = xhr.getResponseHeader('warning');\n            if (warn) console.warn('ESI API Warning: ', warn, this.url);\n        });\n    }\n\n    // Wrapper to make lookups easier\n    this.esi.fullLookup = function(eveIDs) {\n        var promise = $.Deferred();\n\n        tripwire.esi.idLookup(eveIDs)\n            .done(function(data) {\n                for (item in data) {\n                    if (data[item].category == \"character\") {\n                        tripwire.esi.characterLookup(data[item].id, data[item], false)\n                            .done(function(characterData) {\n                                $.extend(data[item], characterData);\n                                tripwire.esi.corporationLookup(characterData.corporation_id, this.reference, false)\n                                    .done(function(corporationData) {\n                                        data[item].corporation = corporationData;\n                                        if (corporationData.alliance_id) {\n                                            tripwire.esi.allianceLookup(corporationData.alliance_id, this.reference, false)\n                                                .done(function(allianceData) {\n                                                    data[item].alliance = allianceData;\n                                                });\n                                        }\n                                    });\n                            });\n                    } else if (data[item].category == \"corporation\") {\n                        tripwire.esi.corporationLookup(data[item].id, data[item], false)\n                            .done(function(corporationData) {\n                                $.extend(data[item], corporationData);\n                                if (corporationData.alliance_id) {\n                                    tripwire.esi.allianceLookup(corporationData.alliance_id, this.reference, false)\n                                        .done(function(allianceData) {\n                                            data[item].alliance = allianceData;\n                                        });\n                                }\n                            })\n                    }\n                }\n\n                promise.resolve(data);\n            });\n\n        return promise;\n    }\n\n    // Parse main account oauth information out of refresh data. This is used\n    // to make authenticated ESI requests for enpoints that are not specific to\n    // tracking characters, e.g., mask access management.\n    this.esi.parseOauth = function(data) {\n        const _data = data || {}\n        tripwire.esi.oauth = {\n            subject: _data.subject,\n            accessToken: _data.accessToken\n        };\n    }\n\n    this.esi.parse = function(characters) {\n        for (characterID in tripwire.esi.characters) {\n            if (!(characterID in characters)) {\n                delete tripwire.esi.characters[characterID];\n                $(\"#tracking .tracking-clone[data-characterid='\"+ characterID +\"']\").remove();\n                if (options.tracking.active == characterID) {\n                    tripwire.EVE(false, true);\n                    $(\"#removeESI\").attr(\"disabled\", \"disabled\");\n                }\n            }\n        }\n\n        for (characterID in characters) {\n            if (options.tracking.active == \"new\") {\n                options.tracking.active = characterID;\n            }\n\n            if (!(characterID in tripwire.esi.characters)) {\n                var $clone = $(\"#tracking-clone\").clone();\n                $clone.attr(\"data-characterid\", characterID);\n                $clone.find(\".avatar img\").attr(\"src\", \"https://image.eveonline.com/Character/\"+ characterID +\"_32.jpg\");\n                $clone.find(\".name\").html(characters[characterID].characterName);\n                $clone.removeAttr(\"id\");\n                $clone.removeClass(\"hidden\");\n                $clone.addClass(\"tracking-clone\");\n\n                if (options.tracking.active == characterID) {\n                    $clone.addClass(\"active\");\n                    $(\"#removeESI\").removeAttr(\"disabled\");\t\t\t\t}\n\n                $(\"#tracking\").append($clone);\n                // Tooltips.attach($clone.find(\"[data-tooltip]\"));\n            }\n\n            tripwire.esi.characters[characterID] = characters[characterID];\n        }\n\n        tripwire.esi.ship();\n        tripwire.esi.location();\n        tripwire.esi.online();\n    }\n}\ntripwire.esi();\n","// Handles data from EVE in-game data\ntripwire.EVE = function(EVE, characterChange) {\n    var systemChange = this.client.EVE && this.client.EVE.systemChange || false;\n\n    if (EVE) {\n        // Automapper\n        if (!characterChange) {\n            // Did the system change or did it previously and we have yet to try an autoMapper call?\n            if ((this.client.EVE && this.client.EVE.systemID != EVE.systemID) || systemChange == true) {\n                systemChange = true;\n\n                // Check if location was updated after the last ship update\n                // if (moment(EVE.locationDate).isAfter(moment(this.client.EVE.shipDate))) {\n                    systemChange = false;\n                    tripwire.autoMapper(this.client.EVE.systemID, EVE.systemID);\n                // }\n            }\n        }\n\n        // System follower\n        if (!characterChange && options.buttons.follow && (this.client.EVE && this.client.EVE.systemID != EVE.systemID) && $(\".ui-dialog:visible\").length == 0) {\n            tripwire.systemChange(EVE.systemID);\n        }\n\n        if (!$(\"#search\").hasClass(\"active\")) {\n            $(\"#currentSpan\").show();\n        }\n\n        // Enable auto-mapper\n        $(\"#toggle-automapper\").removeClass(\"disabled\");\n\n        // Update current system\n        if (EVE.systemID) {\n            // add system to Leads To dropdown\n            if ($(\"#dialog-signature [data-autocomplete='sigSystems']\").hasClass(\"custom-combobox\")) {\n                $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"removeFromSelect\");\n                $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"addToSelect\", tripwire.systems[EVE.systemID].name);\n            }\n            $(\"#EVEsystem\").html(tripwire.systems[EVE.systemID].name).attr(\"href\", \".?system=\"+ tripwire.systems[EVE.systemID].name);\n        }\n    } else {\n        // Update current system\n        $(\"#EVEsystem\").html(\"\");\n        $(\"#currentSpan\").hide();\n        // Disable automapper\n        $(\"#toggle-automapper\").addClass(\"disabled\");\n        // remove system from Leads To dropdown\n        if ($(\"#dialog-signature [data-autocomplete='sigSystems']\").hasClass(\"custom-combobox\")) {\n            $(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete(\"removeFromSelect\");\n        }\n    }\n\n    this.client.EVE = {\n        characterID: EVE.characterID,\n        characterName: EVE.characterName,\n        systemID: EVE.systemID,\n        systemName: EVE.systemName,\n        shipTypeID: EVE.shipTypeID,\n        shipTypeName: EVE.shipTypeName,\n        stationID: EVE.stationID,\n        stationName: EVE.stationName,\n        locationDate: EVE.locationDate,\n        shipDate: EVE.shipDate,\n        systemChange: systemChange\n    };\n}\n","tripwire.parse = function(server, mode) {\n    var data = $.extend(true, {}, server);\n\n    var updateSignatureTable = false;\n\tconst newSigsInSystem = { };\n\n    if (options.chain.active == null || (options.chain.tabs[options.chain.active] && options.chain.tabs[options.chain.active].evescout != true)) {\n        if (options.masks.active != \"273.0\") {\n            for (var key in data.signatures) {\n                if (data.signatures[key].mask == \"273.0\") {\n                    delete data.signatures[key];\n                }\n            }\n        }\n    }\n\n    if (mode == 'refresh') {\n        // preserve client.EVE across refresh otherwise tracking/automapper will be confused\n        var EVE = this.client.EVE;\n        this.client = server;\n        this.client.EVE = EVE;\n\n        for (var key in data.signatures) {\n            if (data.signatures[key].systemID != viewingSystemID) {\n                continue;\n            }\n\t\t\tnewSigsInSystem[key] = data.signatures[key];\n            var disabled = data.signatures[key].mask == \"273.0\" && options.masks.active != \"273.0\" ? true : false;\n\n            // Check for differences\n            if (!tripwire.signatures.list[key]) {\n\t\t\t\ttripwire.signatures.list[key] = data.signatures[key];\t// To reduce race condition chance\n                this.addSig(data.signatures[key], {animate: true}, disabled);\n                updateSignatureTable = true;\n            } else if (tripwire.signatures.list[key].modifiedTime !== data.signatures[key].modifiedTime) {\n                var edit = false;\n                for (column in data.signatures[key]) {\n                    if (data.signatures[key][column] != tripwire.signatures.list[key][column] && column != \"editing\") {\n                        edit = true;\n                    }\n                }\n\n                if (edit) {\n                    this.editSig(data.signatures[key], disabled);\n                } else {\n                    // this.sigEditing(data.signatures[key]);\n                }\n            }\n        }\n\n        // Sigs needing removal\n        for (var key in tripwire.signatures.list) {\n            if (!data.signatures[key]) {\n                this.deleteSig(key);\n            }\n        }\n    } else if (mode == 'init' || mode == 'change') {\n        this.client = server;\n\n        for (var key in data.signatures) {\n            if (data.signatures[key].systemID != viewingSystemID) {\n                continue;\n            }\n\t\t\tnewSigsInSystem[key] = data.signatures[key];\n            var disabled = data.signatures[key].mask == \"273.0\" && options.masks.active != \"273.0\" ? true : false;\n\t\t\t\n\t\t\tif(!tripwire.signatures.list[key]) {\n\t\t\t\tthis.addSig(data.signatures[key], {animate: false}, disabled);\n\t\t\t\tupdateSignatureTable = true;\n\t\t\t}\n            if (data.signatures[key].editing) {\n                this.sigEditing(data.signatures[key]);\n            }\n        }\n    } else { return; }\t// unknown type of parse request so do nothing\n\n    if (updateSignatureTable) {\n        $(\"#sigTable\").trigger(\"update\");\n    }\n    tripwire.signatures.list = data.signatures;\n\ttripwire.signatures.currentSystem = newSigsInSystem;\n\t\t\n    // set the sig count in the UI\n    var signatureCount = 0;\n    $.map(data.signatures, function(signature) {signature.systemID == viewingSystemID ? signatureCount++ : null;});\n    $(\"#signature-count\").html(signatureCount);\n}\n\n/** Find if there is an unknown return sig. The markup is always generated (in addSignature.js) */\ntripwire.updateReturnStatus = function() {\n\tconst inSigId = $(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']:not(.calc)\").attr('data-insigid');\n\tconst wormholeId = $(\"#chainMap [data-nodeid='\"+viewingSystemID+\"']:not(.calc)\").attr('data-sigid');\n\tconst wormhole = tripwire.client.wormholes[wormholeId] || {};\n\t// One of the two ends should be in this system, In sig will be the wrong end, so find the other end\n\tconst returnSigId = wormhole.initialID == inSigId ? wormhole.secondaryID : wormhole.initialID;\n\ttripwire.signatures.returnSig = tripwire.signatures.list[returnSigId];\n\tconst needReturn = tripwire.signatures.returnSig && (tripwire.signatures.returnSig.signatureID == '???' || tripwire.signatures.returnSig.signatureID == '' || tripwire.signatures.returnSig.signatureID === null || tripwire.signatures.returnSig.signatureID === undefined);\n\tdocument.getElementById('sigTableWrapper').className = needReturn ? 'return-visible' : 'return-invisible';\t\n}","// Handles pasting sigs from EVE\ntripwire.pasteSignatures = function() {\n    var processing = false;\n\n    var rowParse = function(row) {\n        var scanner = {};\n        var columns = row.split(\"\t\"); // Split by tab\n        var validScanGroups = [\n            // English (en-us)\n            \"Cosmic Signature\",\n            \"Cosmic Anomaly\",\n\n            // French (fr)\n            \"Signature cosmique\",\n            \"Anomalie cosmique\",\n\n            // German (de)\n            \"Kosmische Anomalie\",\n            \"Kosmische Signatur\",\n\n            // Japanese (ja)\n            \"宇宙の特異点\",\n            \"宇宙のシグネチャ\",\n\n            // Korean (ko)\n            \"코즈믹 시그니처\",\n            \"코즈믹 어노말리\",\n\n            // Russian (ru)\n            \"Скрытый сигнал\",\n            \"Космическая аномалия\",\n        ];\n\n        var validTypes = {\n            // English (en-us)\n            \"Combat Site\": \"Combat\",\n            \"Data Site\": \"Data\",\n            \"Gas Site\": \"Gas\",\n            \"Ore Site\": \"Ore\",\n            \"Relic Site\": \"Relic\",\n            \"Wormhole\": \"Wormhole\",\n\n            // French (fr)\n            \"Site de combat\": \"Combat\",\n            \"Site de données\": \"Data\",\n            \"Site de collecte de gaz\": \"Gas\",\n            \"Site de minerai\": \"Ore\",\n            \"Site de reliques\": \"Relic\",\n            \"Trou de ver\": \"Wormhole\",\n\n            // German (de)\n            \"Kampfgebiet\": \"Combat\",\n            \"Datengebiet\": \"Data\",\n            \"Gasgebiet\": \"Gas\",\n            \"Mineraliengebiet\": \"Ore\",\n            \"Reliktgebiet\": \"Relic\",\n            \"Wurmloch\": \"Wormhole\",\n\n            // Japanese (ja)\n            \"戦闘サイト\": \"Combat\",\n            \"データサイト\": \"Data\",\n            \"ガスサイト\": \"Gas\",\n            \"鉱石サイト\": \"Ore\",\n            \"遺物サイト\": \"Relic\",\n            \"ワームホール\": \"Wormhole\",\n\n            // Korean (ko)\n            \"전투 사이트\": \"Combat\",\n            \"데이터 사이트\": \"Data\",\n            \"가스 사이트\": \"Gas\",\n            \"채광 사이트\": \"Ore\",\n            \"유물 사이트\": \"Relic\",\n            \"웜홀\": \"Wormhole\",\n\n            // Russian (ru)\n            \"Боевой район\": \"Combat\",\n            \"Информационный район\": \"Data\",\n            \"Газовый район\": \"Gas\",\n            \"Астероидный район\": \"Ore\",\n            \"Археологический район\": \"Relic\",\n            \"Червоточина\": \"Wormhole\",\n        };\n\n        for (var x in columns) {\n            if (columns[x].match(/^([A-Z]{3}[-]\\d{3})$/)) {\n                scanner.id = columns[x].split(\"-\");\n                continue;\n            }\n\n            if (columns[x].match(/(\\d([.|,]\\d)?[ ]?(%))/) || columns[x].match(/(\\d[.|,]?\\d+\\s?(UA|AU|AE|km|m|а.е.|км|м))/i)) { // Exclude scan % || AU\n                continue;\n            }\n\n            if ($.inArray(columns[x], validScanGroups) != -1) {\n                scanner.scanGroup = columns[x];\n                continue;\n            }\n\n            if (validTypes[columns[x]]) {\n                scanner.type = validTypes[columns[x]];\n                continue;\n            }\n\n            if (columns[x] != \"\") {\n                scanner.name = columns[x].trim();\n            }\n        }\n\n        if (!scanner.id || scanner.id.length !== 2) {\n            return false;\n        }\n\n        return scanner;\n    }\n\n    this.pasteSignatures.parsePaste = function(paste) {\n        var paste = paste.split(\"\\n\");\n        var payload = {\"signatures\": {\"add\": [], \"update\": []}, \"systemID\": viewingSystemID};\n        var undo = [];\n        processing = true;\n\n        for (var i in paste) {\n            var scanner = rowParse(paste[i]);\n\n            if (scanner.id) {\n                var signature = $.map(tripwire.client.signatures, function(signature) { if (signature.signatureID && signature.signatureID.toUpperCase() == scanner.id[0] + scanner.id[1]) return signature; })[0];\n                if (signature) {\n                    // Update signature (only non-wormholes can be updated to a wormhole)\n                    if (scanner.type == \"Wormhole\" && signature.type != \"wormhole\") {\n                        var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0] || {};\n                        var otherSignature = wormhole.id ? (signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID]) : {};\n                        payload.signatures.update.push({\n                            \"wormhole\": {\n                                \"id\": wormhole.id || null,\n                                \"type\": wormhole.type || null,\n                                \"life\": wormhole.life || \"stable\",\n                                \"mass\": wormhole.mass || \"stable\"\n                            },\n                            \"signatures\": [\n                                {\n                                    \"id\": signature.id,\n                                    \"signatureID\": signature.signatureID,\n                                    \"systemID\": viewingSystemID,\n                                    \"type\": \"wormhole\",\n                                    \"name\": signature.name\n                                },\n                                {\n                                    \"id\": otherSignature.id || null,\n                                    \"signatureID\": otherSignature.signatureID || null,\n                                    \"systemID\": otherSignature.systemID || null,\n                                    \"type\": \"wormhole\",\n                                    \"name\": otherSignature.name\n                                }\n                            ]\n                        });\n\n                        if (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[otherSignature.id]]});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t}\n                    // Make sure we are only updating when we have new info (we never turn wormholes into regular signatures)\n                    } else if (signature.type != \"wormhole\" && ((scanner.type && scanner.type.toLowerCase() != signature.type) || (scanner.name && scanner.name != signature.name))) {\n                        payload.signatures.update.push({\n                            \"id\": signature.id,\n                            \"systemID\": viewingSystemID,\n                            \"type\": scanner.type || 'unknown',\n                            \"name\": scanner.name,\n                            \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                        });\n                        undo.push(tripwire.client.signatures[signature.id]);\n                    }\n                } else {\n                    // Add signature\n                    if (scanner.type == \"Wormhole\") {\n                        payload.signatures.add.push({\n                            \"wormhole\": {\n                                \"type\": null,\n                                \"parent\": \"initial\",\n                                \"life\": \"stable\",\n                                \"mass\": \"stable\"\n                            },\n                            \"signatures\": [\n                                {\n                                    \"signatureID\": scanner.id[0] + scanner.id[1],\n                                    \"systemID\": viewingSystemID,\n                                    \"type\": \"wormhole\",\n                                    \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                                },\n                                {\n                                    \"signatureID\": null,\n                                    \"systemID\": null,\n                                    \"type\": \"wormhole\",\n                                    \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                                }\n                            ]\n                        });\n                    } else {\n                        payload.signatures.add.push({\n                            \"signatureID\": scanner.id[0] + scanner.id[1],\n                            \"systemID\": viewingSystemID,\n                            \"type\": scanner.type || 'unknown',\n                            \"name\": scanner.name,\n                            \"lifeLength\": options.signatures.pasteLife * 60 * 60\n                        });\n                    }\n                }\n            }\n        }\n\n        if (payload.signatures.add.length || payload.signatures.update.length) {\n            var success = function(data) {\n                if (data.resultSet && data.resultSet[0].result == true) {\n                    $(\"#undo\").removeClass(\"disabled\");\n\n                    if (data.results) {\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"add\", signatures: data.results});\n                        } else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"add\", signatures: data.results}];\n                        }\n                    }\n\n                    if (undo.length) {\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"update\", signatures: undo});\n\t\t\t\t\t\t} else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"update\", signatures: undo}];\n\t\t\t\t\t\t}\n                    }\n\n                    sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                }\n            }\n\n            var always = function(data) {\n                processing = false;\n            }\n\n            tripwire.refresh('refresh', payload, success, always);\n        } else {\n            processing = false;\n        }\n    }\n\n    this.pasteSignatures.init = function() {\n        $(document).keydown(function(e)\t{\n            if ((e.metaKey || e.ctrlKey) && (e.keyCode == 86 || e.keyCode == 91) && !processing) {\n                //Abort - user is in input or textarea\n                if ($(document.activeElement).is(\"textarea, input\")) return;\n\n                $(\"#clipboard\").focus();\n            }\n        });\n\n        $(\"body\").on(\"click\", \"#fullPaste\", function(e) {\n            e.preventDefault();\n\n            var paste = $(this).data(\"paste\").split(\"\\n\");\n            var pasteIDs = [];\n            var removes = [];\n            var undo = [];\n\n            for (var i in paste) {\n                if (scan = rowParse(paste[i])) {\n                    pasteIDs.push((scan.id[0] + scan.id[1]).toLowerCase());\n                }\n            }\n\n            for (var i in tripwire.client.signatures) {\n                var signature = tripwire.client.signatures[i];\n\n                if (signature.systemID == viewingSystemID && signature.signatureID && $.inArray(signature.signatureID.toLowerCase(), pasteIDs) === -1 && signature.signatureID !== \"???\") {\n                    if (signature.type == \"wormhole\") {\n                        var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0] || {};\n                        var otherSignature = wormhole.id ? (signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID]) : {};\n                        if (wormhole.type !== \"GATE\") {\n                            removes.push(wormhole);\n                            undo.push({\"wormhole\": wormhole, \"signatures\": [signature, otherSignature]});\n                        }\n                    } else {\n                        removes.push(signature.id);\n                        undo.push(signature);\n                    }\n                }\n            }\n\n            if (removes.length > 0) {\n                var payload = {\"signatures\": {\"remove\": removes}};\n\n                var success = function(data) {\n                    if (data.resultSet && data.resultSet[0].result == true) {\n                        $(\"#undo\").removeClass(\"disabled\");\n                        if (viewingSystemID in tripwire.signatures.undo) {\n                            tripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n                        } else {\n                            tripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n                        }\n\n                        sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                    }\n                }\n\n                tripwire.refresh('refresh', payload, success);\n            }\n        });\n\n        $(\"#clipboard\").on(\"paste\", function(e) {\n            e.preventDefault();\n            var paste = window.clipboardData ? window.clipboardData.getData(\"Text\") : (e.originalEvent || e).clipboardData.getData('text/plain');\n\n            $(\"#clipboard\").blur();\n            Notify.trigger(\"Paste detected<br/>(<a id='fullPaste' href=''>Click to delete missing sigs</a>)\");\n            $(\"#fullPaste\").data(\"paste\", paste);\n            tripwire.pasteSignatures.parsePaste(paste);\n        });\n    }\n\n    this.pasteSignatures.init();\n}\ntripwire.pasteSignatures();\n","tripwire.redo = function() {\n    if (tripwire.signatures.redo[viewingSystemID].length > 0) {\n        $(\"#redo\").addClass(\"disabled\");\n        var lastIndex = tripwire.signatures.redo[viewingSystemID].length -1;\n        var data = {\"systemID\": viewingSystemID, \"signatures\": {\"add\": [], \"remove\": [], \"update\": []}};\n\n        var redoItem = tripwire.signatures.redo[viewingSystemID][lastIndex];\n        var undo = $.map(redoItem.signatures, function(signature) {\n            // grab the current signature so we can restore the way it is now\n            if (signature.wormhole && tripwire.client.wormholes[signature.wormhole.id]) {\n                // it was a wormhole and still is\n                return {\"wormhole\": tripwire.client.wormholes[signature.wormhole.id], \"signatures\": [tripwire.client.signatures[signature.signatures[0].id], tripwire.client.signatures[signature.signatures[1].id]]};\n            } else if (tripwire.client.signatures[signature.id] && tripwire.client.signatures[signature.id].type == \"wormhole\") {\n                // it was a regular signature but is now a wormhole\n                var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n                return {\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]};\n            } else if (signature.wormhole && tripwire.client.signatures[signature.signatures[0].id]) {\n                // it was a wormhole but is now a regular signature\n                return tripwire.client.signatures[signature.signatures[0].id];\n            } else {\n                // it was a regular signature and still is\n                return tripwire.client.signatures[signature.id];\n            }\n        });\n\n        switch(redoItem.action) {\n            case \"add\":\n                data.signatures.add = data.signatures.add.concat(redoItem.signatures);\n                break;\n            case \"remove\":\n                data.signatures.remove = data.signatures.remove.concat($.map(redoItem.signatures, function(signature) { return signature.wormhole ? signature.wormhole : signature.id }));\n                break;\n            case \"update\":\n                data.signatures.update = data.signatures.update.concat(redoItem.signatures);\n                break;\n        }\n\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                tripwire.signatures.redo[viewingSystemID].pop();\n\n                $(\"#undo\").removeClass(\"disabled\");\n                if (viewingSystemID in tripwire.signatures.undo) {\n                    if (redoItem.action == \"add\") {\n                        // we are adding new signatures we removed so we need the new ids\n                        tripwire.signatures.undo[viewingSystemID].push({\"action\": redoItem.action, \"signatures\": data.results});\n                    } else if (redoItem.action == \"update\") {\n                        tripwire.signatures.undo[viewingSystemID].push({\"action\": redoItem.action, \"signatures\": undo});\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID].push({action: redoItem.action, signatures: redoItem.signatures});\n                    }\n                } else {\n                    if (redoItem.action == \"add\") {\n                        tripwire.signatures.undo[viewingSystemID] = [{\"action\": redoItem.action, \"signatures\": data.results}];\n                    } else if (redoItem.action == \"update\") {\n                        tripwire.signatures.undo[viewingSystemID] = [{\"action\": redoItem.action, \"signatures\": undo}];\n                    } else {\n                        tripwire.signatures.undo[viewingSystemID] = [{action: redoItem.action, signatures: redoItem.signatures}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_redo\", JSON.stringify(tripwire.signatures.redo));\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n            }\n        }\n\n        var always = function(data) {\n            if (tripwire.signatures.redo[viewingSystemID].length > 0) {\n                $(\"#redo\").removeClass(\"disabled\");\n            }\n        }\n\n        tripwire.refresh('refresh', data, success, always);\n    }\n}\n","// Handles pulling TQ status & player count\ntripwire.serverStatus = function() {\n    this.data;\n    this.timer;\n\n    clearTimeout(tripwire.serverStatus.timer);\n\n    tripwire.esi.eveStatus()\n        .always(function(data) {\n            if (data && data.players && data.players > 0) {\n                if (!tripwire.serverStatus.data || tripwire.serverStatus.data.players !== data.players) {\n                    $('#serverStatus').html(\"<span class='\"+(data.players > 0 ? 'stable' : 'critical')+\"'>TQ</span>: \"+Intl.NumberFormat().format(data.players));\n\n                    if (tripwire.serverStatus.data) {\n                        $(\"#serverStatus\").effect('pulsate', {times: 5});\n                    }\n                }\n\n                tripwire.serverStatus.data = data;\n            } else {\n                $('#serverStatus').html(\"<span class='critical'>TQ</span>\");\n            }\n\n            tripwire.serverStatus.timer = setTimeout(\"tripwire.serverStatus();\", 15000);\n        });\n}\ntripwire.serverStatus();\n\ntripwire.updateServerTime = function() {\n\tdocument.getElementById('serverTime').innerText = moment.utc().format('HH:mm')\n};\nsetInterval(tripwire.updateServerTime, 5000);\ntripwire.updateServerTime();","tripwire.sync = function(mode, data, successCallback, alwaysCallback) {\n    var data = typeof(data) === \"object\" ? $.extend(true, {}, data) : {};\n\n    // Grab any pending changes\n    $.extend(true, data, tripwire.data);\n\n    // Remove old timer to prevent multiple\n    if (this.timer) clearTimeout(this.timer);\n    if (this.xhr) {\n\t\tconsole.log('Awaiting existing XHR ' + this.xhr.data.mode + ': ', this.xhr);\n\t\ttripwire.data = data;\n\t\tthis.timer = setTimeout(function() { tripwire.sync(mode, data, successCallback, alwaysCallback); }, 50);\n\t\treturn false;\n\t}\n\n    if (mode == 'refresh' || mode == 'change') {\n        data.signatureCount = tripwire.serverSignatureCount;\n        data.signatureTime = Object.maxTime(this.client.signatures, \"modifiedTime\");\n\n        data.flareCount = chain.data.flares ? chain.data.flares.flares.length : 0;\n        data.flareTime = chain.data.flares ? chain.data.flares.last_modified : 0;\n\n        data.commentCount = Object.keys(this.comments.data||{}).length;\n        data.commentTime = Object.maxTime(this.comments.data, \"modified\");\n\n        data.activity = this.activity;\n    } else {\n        // Expand Tripwire with JSON data from EVE Data Dump and other static data\n        $.extend(this, appData);\n\n        this.aSystems = $.map(this.systems, function(system) { return system.name; });\n        this.aSigSystems = [\"Null-Sec\", \"Low-Sec\", \"High-Sec\", \"Class-1\", \"Class-2\", \"Class-3\", \"Class-4\", \"Class-5\", \"Class-6\", \"Class-13\", \"Triglavian\"];\n        $.merge(this.aSigSystems, this.aSystems.slice());\n\n        $(\".systemsAutocomplete\").inlinecomplete({source: this.aSystems, maxSize: 10, delay: 0});\n    }\n\n    data.mode = mode != \"init\" ? \"refresh\" : \"init\";\n    data.systemID = viewingSystemID;\n    data.systemName = viewingSystem;\n    data.instance = tripwire.instance;\n    data.version = tripwire.version;\n\n    this.xhr = $.ajax({\n        url: \"refresh.php\",\n        data: data,\n        type: \"POST\",\n        dataType: \"JSON\",\n        cache: false\n    }).done(function(data) {\n        if (data) {\n            tripwire.server = data;\n            if(data.signatures) { // Save this count before we delete entries\n                tripwire.serverSignatureCount = Object.keys(data.signatures||{}).length;\n            }\n\n            if (data.wormholes) {\n                // Purge bad wormhole signatures\n                var wormholeInitialIDs = {};\n                var wormholeSecondaryIDs = {};\n                Object.values(data.wormholes).forEach(function (wh) {\n                    wormholeInitialIDs[parseInt(wh.initialID)] = wh.id;\n                    wormholeSecondaryIDs[parseInt(wh.secondaryID)] = wh.id;\n                })\n                for (var i in data.signatures) {\n                  if (data.signatures[i].type == \"wormhole\") {\n                    var id = data.signatures[i].id;\n                    if (wormholeInitialIDs[id] === undefined && wormholeSecondaryIDs[id] === undefined) {\n                      delete data.signatures[i];\n                    }\n                  }\n                }\n            }\n\n            if (data.esi) {\n                tripwire.esi.parse(data.esi);\n            }\n\n            if (data.oauth) {\n                tripwire.esi.parseOauth(data.oauth);\n            }\n\n            if (data.sync) {\n                tripwire.serverTime.time = new Date(data.sync);\n            }\n\n            if (data.signatures) {\n                tripwire.parse(data, mode);\n            }\n\n            if (data.comments) {\n                tripwire.comments.parse(data.comments);\n            }\n\n            if (data.wormholes || data.occupied || data.flares) {\n                tripwire.chainMap.parse({\"map\": data.wormholes || null, \"occupied\": data.occupied || null, \"flares\": data.flares || null});\n            } else if (chain.data.occupied && chain.data.occupied.length && !data.occupied) {\n                // send update to remove all occupied system indicators\n                tripwire.chainMap.parse({\"occupied\": []});\n            }\n\n\t\t\ttripwire.updateReturnStatus();\n\n            tripwire.active(data.activity);\n\n            if (data.notify && !$(\"#serverNotification\")[0]) Notify.trigger(data.notify, \"yellow\", false, \"serverNotification\");\n\t\t\t\n\t\t\t$('[data-command=ping]')[data.discord_integration ? 'show' : 'hide']();\n        }\n\n        tripwire.data = {tracking: {}, esi: {}};\n        successCallback ? successCallback(data) : null;\n    }).always(function(data, status) {\n        tripwire.timer = setTimeout(\"tripwire.refresh();\", tripwire.refreshRate);\n\n        alwaysCallback ? alwaysCallback(data) : null;\n\n        if (data.status == 403) {\n            window.location.href = \".\";\n        } else if (status != \"success\" && status != \"abort\" && tripwire.connected == true) {\n            tripwire.connected = false;\n            $(\"#ConnectionSuccess\").click();\n            Notify.trigger(\"Error syncing with server\", \"red\", false, \"connectionError\");\n        } else if (status == \"success\" && tripwire.connected == false) {\n            tripwire.connected = true;\n            $(\"#connectionError\").click();\n            Notify.trigger(\"Successfully reconnected with server\", \"green\", 5000, \"connectionSuccess\");\n        }\n\t\t\n\t\ttripwire.xhr = null;\n    });\n\tthis.xhr.data = data;\n\t\n    return true;\n}\ntripwire.sync(\"init\");\n","// Change the currently viewed system\ntripwire.systemChange = function(systemID, mode) {\n\tconst system = systemAnalysis.analyse(systemID);\n\tif(!system) { return; }\n\t\t\n    if (mode != \"init\") {\n        $(\"#infoSecurity\").removeClass();\n        $(\"#infoStatics\").empty();\n\n        viewingSystem = system.name;\n        viewingSystemID = systemID;\n\n        // Reset activity\n        activity.refresh(true);\n\n        // Reset signatures\n        $(\"#sigTable span[data-age]\").countdown(\"destroy\");\n        $(\"#sigTable tbody\").empty();\n        $(\"#signature-count\").html(0);\n        tripwire.signatures.list = {};\n        tripwire.client.signatures = null;\n\n        // Reset chain map\n        chain.redraw();\n\n        // Reset comments\n        $(\"#notesWidget .content .comment:visible\").remove();\n        tripwire.comments.data = null;\n\n        // Change the URL & history\n        history.replaceState(null, null, \"?system=\"+viewingSystem);\n\n        tripwire.refresh(\"change\");\n    }\n\n    // Change the title\n    document.title = system.name + \" - \" + app_name;\n\n    $(\"#infoSystem\").text(system.name);\n\n    // Current system favorite\n    $.inArray(parseInt(viewingSystemID), options.favorites) != -1 ? $(\"#system-favorite\").attr(\"data-icon\", \"star\").addClass(\"active\") : $(\"#system-favorite\").attr(\"data-icon\", \"star-empty\").removeClass(\"active\");\n\t\n    if (system.class) {\n        // Security\n        $(\"#infoSecurity\").html(\"<span class='wh pointer'>Class \" + system.class + \"</span>\");\n\n        // Effects\n        if (system.effect) {\n            var tooltip = \"<table cellpadding=\\\"0\\\" cellspacing=\\\"1\\\">\";\n            for (var x in tripwire.effects[system.effect]) {\n                var effect = tripwire.effects[system.effect][x].name;\n                var base = tripwire.effects[system.effect][x].base;\n                var bad = tripwire.effects[system.effect][x].bad;\n                var whClass = system.class > 6 ? 6 : system.class;\n                var modifier = 0;\n\n                switch (Math.abs(base)) {\n                    case 15:\n                        modifier = base > 0 ? 7 : -7;\n                        break;\n                    case 30:\n                        modifier = base > 0 ? 14 : -14;\n                        break;\n                    case 60:\n                        modifier = base > 0 ? 28 : -28;\n                        break;\n                }\n\n                tooltip += \"<tr><td>\" + effect + \"</td><td style=\\\"padding-left: 25px; text-align: right;\\\" class=\\\"\" + (bad ? \"critical\" : \"stable\") + \"\\\">\";\n                tooltip += base + (modifier * (whClass -1)) + \"%</td></tr>\";\n            }\n            tooltip += \"</table>\";\n            $(\"#infoSecurity\").append(\"&nbsp;<span class='pointer' data-tooltip='\" + tooltip + \"'>\" + system.effect + \"</span>\");\n        }\n\n        // Statics\n        for (var x in system.statics) {\n            var type = system.statics[x];\n            var wormhole = tripwire.wormholes[type];\n            var color = \"wh\";\n\n            switch (wormhole.leadsTo) {\n                case \"High-Sec\":\n                    color = \"hisec\";\n                    break;\n                case \"Low-Sec\":\n                    color = \"lowsec\";\n                    break;\n                case \"Null-Sec\":\n                    color = \"nullsec\";\n                    break;\n            }\n\n            $(\"#infoStatics\").append(\"<div><span class='\"+ color +\"'>&#9679;</span> <b>\"+ wormhole.leadsTo +\"</b> via <span class='\"+ color +\"'>\"+ type +\"</span></div>\");\n        }\n\n        // Faction\n        $(\"#infoFaction\").html(\"&nbsp;\");\n    } else {\n        // Security\n\t\tconst securityText = {HS: 'High-Sec', LS: 'Low-Sec', NS: 'Null-Sec', 'Trig': 'Triglavian' }[system.systemTypeName];\n       $(\"#infoSecurity\").addClass(system.systemTypeClass).html(securityText + \" \" + system.baseSecurity.toFixed(2) + system.systemTypeModifiers.join(' '));\n\n        // Faction\n        $(\"#infoFaction\").html(system.factionID ? tripwire.factions[system.factionID].name : \"&nbsp;\");\n\t\t\n\t\t// Route to favourites\n\t\tfor (var fi in options.favorites) {\n\t\t\tconst f = options.favorites[fi];\n\t\t\tconst path = guidance.findShortestPath(tripwire.map.shortest, f - 30000000, viewingSystemID - 30000000);\n\t\t\tif(path) { $('#infoStatics').append('<p><b><a href=\".?system=' + tripwire.systems[f].name + '\">' +tripwire.systems[f].name + '</a></b>: ' + systemRendering.renderPath(path) + '</p>'); }\n\t\t}\n    }\n\n\tTooltips.attach($(\"#infoStatics [data-tooltip]\"));\n    Tooltips.attach($(\"#infoSecurity [data-tooltip]\"));\n\n    // Region\n    $(\"#infoRegion\").text(tripwire.regions[system.regionID].name);\n\n    // Info Links\n    $(\"#infoWidget .infoLink\").each(function() {\n        this.href = $(this).data(\"href\").replace(/\\$systemName/gi, system.name).replace(/\\$systemID/gi, systemID);\n    });\n\n    // Reset undo/redo\n    tripwire.signatures.undo[systemID] && tripwire.signatures.undo[systemID].length > 0 ? $(\"#undo\").removeClass(\"disabled\") : $(\"#undo\").addClass(\"disabled\");\n    tripwire.signatures.redo[systemID] && tripwire.signatures.redo[systemID].length > 0 ? $(\"#redo\").removeClass(\"disabled\") : $(\"#redo\").addClass(\"disabled\");\n\n    // Reset delete signature icon\n    $(\"#sigTable tr.selected\").length == 0 ? $(\"#signaturesWidget #delete-signature\").addClass(\"disabled\") : $(\"#signaturesWidget #delete-signature\").removeClass(\"disabled\");\n}\ntripwire.systemChange(viewingSystemID, \"init\");\n","var tutorial;\n\n// infoWidget\n$(\"#infoWidget .tutorial\").click(function() {\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        steps: [\n            {\n                element: document.querySelector(\"#infoWidget\"),\n                intro: \"<h4>System information widget</h4><br/><p>Displays information on the currently <b>selected</b> Tripwire system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoGeneral\"),\n                intro: \"<p>This section includes:<br/>System Name<br/>Security Rating<br/>Region<br/>Owning Faction Name</p><br/><p>If the selected system is a wormhole with a system effect, that will also be shown - hover over it to view the effect breakdown.</p>\"\n            },\n            {\n                element: document.querySelector(\"#activityGraph\"),\n                intro: \"<p>For K space systems, a graph is shown here containing hourly ship jump and kill information from the EVE API.</p><br/><p>Each category can be toggled by clicking the keys above the graph, and the time period selected with the links below.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoStatics\"),\n                intro: \"<p>If a wormhole system is selected, its static wormhole types will appear here. (A static is a wormhole which is always present; when it is closed or expires, a new one will spawn.)</p><br/><p>In K space, the route to each of your favorite systems is shown here.</p>\"\n            },\n            {\n                element: document.querySelector(\"#favorite-control-wrapper\"),\n                intro: \"<p>Use the star to toggle whether this is a 'favorite' system. It shows orange when the current system is a favorite. The other button shows the Favorites panel which will show you all your favorite systems.</p><br/><p>'Favorite' systems in K space can be shown in the chain map, and in the routing panel to the lower left.</p>\"\n            },\n            {\n                element: document.querySelector(\"#show-favorite\"),\n                intro: \"<p>Use this toggle to show favorite systems and their routes on the chain map.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoExtra\"),\n                intro: \"<p>For K space systems, the shortest route to the currently visible chain will be shown here, along with the route within the chain.</p>\"\n            },\n            {\n                element: document.querySelector(\"#infoLinks\"),\n                intro: \"<p>These are some quick links to various sites for this specific system.</p>\"\n            },\t\t\t\n        ]\n    }).start();\n});\n\n// signaturesWidget\n$(\"#signaturesWidget .tutorial\").click(function() {\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        steps: [\n            {\n                element: document.querySelector(\"#signaturesWidget\"),\n                intro: \"<h4>System signatures widget</h4><br/><p>Displays all signatures and wormholes in the currently <b>selected</b> Tripwire system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#add-signature\"),\n                intro: \"<p>Add new signatures and wormholes manually by clicking the + icon.</p><br/><p>Copy & Paste EVE scanner results anywhere once Tripwire has focus to add or update signatures, repeated pastes will only update with new information.</p>\"\n            },\n            {\n                element: document.querySelector(\"#delete-signature\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>DELETE</b> to delete <b>selected</b> signatures from this system.</p><br/><p>Click on a row to select it, click multiple rows to delete multiple signatures at once, click a selected row again to unselect it.</p>\"\n            },\n            {\n                element: document.querySelector(\"#signature-count\"),\n                intro: \"<p>This shows the current count of signatures, including wormholes, in the selected system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#undo\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>CTRL-Z</b> to undo the last changes you made in this sytem (this includes clipboard pasted changes).</p><br/><p>You can undo multiple times as history is kept in the browser.</p>\"\n            },\n            {\n                element: document.querySelector(\"#redo\"),\n                intro: \"<p>Click here or use the keyboard shortcut <b>CTRL-Y</b> to redo the last changes you made in this system (this includes clipboard pasted changes).</p><br/><p>You can redo multiple times as history is kept in the browser.</p>\"\n            },\n            {\n                element: document.querySelector(\"#toggle-automapper\"),\n                intro: \"<p>Click here to toggle the Auto-mapper feature on (orange) or off.</p><br/><p>This feature only works when an in-game character is being actively tracked, otherwise this icon appears disabled.</p><br/><p>The automapper will watch for a change in your in-game system not via a star gate and try to automatically add or update wormholes.</p><br/><p>First it tries to seach for wormholes already added but missing a leads to system, this includes via wormhole type (B274) or with a leads to of 'High-Sec' for example.</p><br/><p>Next it searches for wormholes without any type or leads to at all.</p><br/><p>Finally if there are no wormholes or they all have a leads to system already, it will add a new wormhole.</p><br/><p>If at any time if finds multiple wormholes it can update, a dialog window will appear asking which wormhole you want to update.</p>\"\n            },\n            {\n                element: document.querySelector(\"#sigTable\"),\n                intro: \"<p>Each column can be sorted by clicking the column label, sort by multiple columns by holding the shift key.</p><br/><p>Right-click a column to change the text-alignment.</p>\"\n            }\n        ]\n    }).start();\n});\n\n// notesWidget\n$(\"#notesWidget .tutorial\").click(function(e) {\n    e.preventDefault();\n\n    tutorial = introJs().setOptions({\n        showStepNumbers: false,\n        exitOnEsc: false,\n        exitOnOverlayClick: false,\n        skipLabel: \"Abort\",\n        steps: [\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<h4>System notes widget</h4><br/><p>Displays comments based on the currently <b>selected</b> Tripwire system.</p><br/><p>The rest of this tutorial will guide you through actually adding a comment, but don't worry we will switch you to your private Tripwire mask so we don't disturb anyone else.</p><br/><p>When you finish or leave this tutorial we will switch you back to your previous Tripwire mask.</p>\"\n            },\n            {\n                element: document.querySelector(\"#add-comment\"),\n                intro: \"<p>Now click the + icon to begin adding a new comment in this system (\" + viewingSystem + \").</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Type some basic text now and click save.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>This is our newly created comment. Hover over the comment with your mouse to see additional information and controls.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>You can click the 'pin' or 'sticky' button to toggle showing this comment for every system, not just this system.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Use the <b>Edit</b> to modify a comment and <b>Delete</b> to remove a comment.</p><br/><p>You can also quickly edit any comment by simply doubling clicking anywhere on it.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>Click on the <b>Edit</b> now on our comment.</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>The toolbar at the top allows you to customize your notes.</p><br/><p>You can also click on the <b>Maximize/Minimize</b> button (the far right toolbar icon) to edit this comment in full screen mode.</p><br/><p>In full screen mode you will see 1 new button added to the toolbar to view the source code of the comment where you can write HTML, CSS, and even Javascript in your notes!</p>\"\n            },\n            {\n                element: document.querySelector(\"#notesWidget\"),\n                intro: \"<p>This concludes the tutorial, we will now switch you back to your previous Tripwire mask and delete the comment we created.</p>\"\n            }\n        ]\n    }).start();\n\n    tutorial.onchange(function(element) {\n        switch(tutorial._currentStep) {\n            case 1:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n\n                console.log(\"switch mask to private\");\n                tutorial.previousMask = options.masks.active;\n                options.masks.active = options.character.id + \".1\";\n                options.save();\n\n                tutorial.stepFunc = function() {\n                    setTimeout(function() {\n                        tutorial._options.steps[2].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(3);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget #add-comment\").on(\"click\", tutorial.stepFunc);\n                break;\n            case 2:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n                $(\"#notesWidget #add-comment\").off(\"click\", tutorial.stepFunc);\n\n                tutorial.stepFunc = function() {\n                    tutorial.comment = $(this).closest(\".comment\");\n                    setTimeout(function() {\n                        tutorial._options.steps[3].element = tutorial.comment[0];\n                        tutorial._options.steps[4].element = tutorial.comment.find(\".commentSticky\")[0];\n                        tutorial._options.steps[5].element = tutorial.comment.find(\".commentControls\")[0];\n                        tutorial._options.steps[6].element = tutorial.comment.find(\".commentControls\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(4);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget\").on(\"click\", \".commentSave\", tutorial.stepFunc);\n                break;\n            case 6:\n                $(\".introjs-prevbutton, .introjs-nextbutton\").hide();\n                $(\"#notesWidget\").off(\"click\", \".commentSave\", tutorial.stepFunc);\n\n                tutorial.stepFunc = function() {\n                    setTimeout(function() {\n                        tutorial._options.steps[7].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial._options.steps[8].element = $(\"#notesWidget\").find(\".comment:has(.cke_toolbar)\")[0];\n                        tutorial.setOption(\"steps\", tutorial._options.steps);\n\n                        tutorial.exiting = false;\n                        tutorial.exit().start().goToStep(8);\n                        tutorial.exiting = true;\n                    }, 200);\n                }\n\n                $(\"#notesWidget\").on(\"click\", \".commentEdit\", tutorial.stepFunc);\n                break;\n        }\n    });\n\n    tutorial.onexit(function() {\n        if (tutorial.exiting) {\n            $(\".commentCancel:visible\").click();\n            // delete the tutorial comment that was created\n            if (tutorial.comment) {\n                var data = {\"mode\": \"delete\", \"commentID\": tutorial.comment.data(\"id\")};\n\n                $.ajax({\n                    url: \"comments.php\",\n                    type: \"POST\",\n                    data: data,\n                    dataType: \"JSON\"\n                }).done(function(data) {\n                    if (data && data.result == true) {\n                        tutorial.comment.remove();\n                    }\n                });\n            }\n\n            if (tutorial.previousMask) {\n                setTimeout(function() {\n                    console.log(\"change mask back, delete comment\", tutorial.previousMask);\n                    options.masks.active = tutorial.previousMask;\n                    options.save();\n                }, 200);\n            }\n\n            // remove event listeners\n            $(\"#notesWidget #add-comment\").off(\"click\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".commentSave\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".commentEdit\", tutorial.stepFunc);\n            $(\"#notesWidget\").off(\"click\", \".cke_toolgroup:has(.cke_button__toolbarswitch)\", tutorial.stepFunc);\n        }\n    });\n\n    tutorial.previousMask;\n    tutorial.comment;\n    tutorial.stepFunc;\n    tutorial.exiting = true;\n});\n","tripwire.undo = function() {\n    if (tripwire.signatures.undo[viewingSystemID].length > 0) {\n        $(\"#undo\").addClass(\"disabled\");\n        var lastIndex = tripwire.signatures.undo[viewingSystemID].length -1;\n        var data = {\"systemID\": viewingSystemID, \"signatures\": {\"add\": [], \"remove\": [], \"update\": []}};\n\n        var undoItem = tripwire.signatures.undo[viewingSystemID][lastIndex];\n        var redo = $.map(undoItem.signatures, function(signature) {\n            // grab the current signature so we can restore the way it is now\n            if (signature.wormhole && tripwire.client.wormholes[signature.wormhole.id]) {\n                // it was a wormhole and still is\n                return {\"wormhole\": tripwire.client.wormholes[signature.wormhole.id], \"signatures\": [tripwire.client.signatures[signature.signatures[0].id], tripwire.client.signatures[signature.signatures[1].id]]};\n            } else if (tripwire.client.signatures[signature.id] && tripwire.client.signatures[signature.id].type == \"wormhole\") {\n                // it was a regular signature but is now a wormhole\n                var wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n                return {\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]};\n            } else if (signature.wormhole && tripwire.client.signatures[signature.signatures[0].id]) {\n                // it was a wormhole but is now a regular signature\n                return tripwire.client.signatures[signature.signatures[0].id];\n            } else {\n                // it was a regular signature and still is\n                return tripwire.client.signatures[signature.id];\n            }\n        });\n\n        switch(undoItem.action) {\n            case \"add\":\n                data.signatures.remove = data.signatures.remove.concat($.map(undoItem.signatures, function(signature) { return signature.wormhole ? signature.wormhole : signature.id }));\n                break;\n            case \"remove\":\n                data.signatures.add = data.signatures.add.concat(undoItem.signatures);\n                break;\n            case \"update\":\n                data.signatures.update = data.signatures.update.concat(undoItem.signatures);\n                break;\n        }\n\n        var success = function(data) {\n            if (data.resultSet && data.resultSet[0].result == true) {\n                tripwire.signatures.undo[viewingSystemID].pop();\n\n                $(\"#redo\").removeClass(\"disabled\");\n                if (viewingSystemID in tripwire.signatures.redo) {\n                    if (undoItem.action == \"remove\") {\n                        // we are adding new signatures we removed so we need the new ids\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": data.results});\n                    } else if (undoItem.action == \"update\") {\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": redo});\n                    } else {\n                        tripwire.signatures.redo[viewingSystemID].push({\"action\": undoItem.action, \"signatures\": undoItem.signatures});\n                    }\n                } else {\n                    if (undoItem.action == \"remove\") {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": data.results}];\n                    } else if (undoItem.action == \"update\") {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": redo}];\n                    } else {\n                        tripwire.signatures.redo[viewingSystemID] = [{\"action\": undoItem.action, \"signatures\": undoItem.signatures}];\n                    }\n                }\n\n                sessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n                sessionStorage.setItem(\"tripwire_redo\", JSON.stringify(tripwire.signatures.redo));\n            }\n        }\n\n        var always = function(data) {\n            if (tripwire.signatures.undo[viewingSystemID].length > 0) {\n                $(\"#undo\").removeClass(\"disabled\");\n            }\n        }\n\n        tripwire.refresh('refresh', data, success, always);\n    }\n}\n","var activity = new function() {\n\tthis.graph;\n\tthis.options;\n\tthis.view;\n\tthis.span = 24;\n\tthis.columns = [\n\t\t{id: \"time\", label: \"Time\", role: \"domain\", type: \"string\", calc: function(d, r) { return d.getValue(r, 0) + \"h\"; }},\n\t\t{id: \"jumps\", label: \"Jumps\", role: \"data\", type: \"number\", sourceColumn: 1, column: 1, title: \"Jumps\"},\n\t\t{id: \"podkills\", label: \"Pod Kills\", role: \"data\", type: \"number\", sourceColumn: 2, column: 2, title: \"Pod Kills\"},\n\t\t{id: \"shipkills\", label: \"Ship Kills\", role: \"data\", type: \"number\", sourceColumn: 3, column: 3, title: \"Ship Kills\"},\n\t\t{id: \"npckills\", label: \"NPC Kills.\", role: \"data\", type: \"number\", sourceColumn: 4, column: 4, title: \"NPC Kills\"},\n\t\t//{id: \"annotationLabel\", label: \"Test\", role: \"annotation\", type: \"string\", sourceColumn: 5, title: \"Test\"},\n\t\t//{id: \"annotationText\", label: \"Test\", role: \"annotationText\", type: \"string\", sourceColumn: 6, title: \"Test\"}\n\t];\n\n\tthis.getData = function(span, cache) {\n\t\tvar span = typeof(span) !== \"undefined\" ? span : this.span;\n\t\tvar cache = typeof(cache) !== \"undefined\" ? cache : true;\n\n\t\t// Google hasn't finished loading yet\n\t\tif (!activity.graph) {\n\t\t\t\tsetTimeout(function() {activity.getData(span, cache)}, 500);\n\t\t\t\treturn false;\n\t\t}\n\n\t\treturn $.ajax({\n\t\t\turl: \"activity_graph.php\",\n\t\t\tdata: {systemID: viewingSystemID, time: span},\n\t\t\ttype: \"GET\",\n\t\t\tdataType: \"JSON\",\n\t\t\tcache: cache\n\t\t}).done(function(json) {\n\t\t\tif (json) {\n\t\t\t\tjson.rows.reverse();\n\t\t\t\tactivity.view = new google.visualization.DataView(new google.visualization.DataTable(json));\n\t\t\t\tactivity.view.setColumns(activity.columns);\n\t\t\t\tactivity.graph.draw(activity.view, activity.options);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.selectHandler = function() {\n\t\tvar selections = activity.graph.getSelection();\n\n\t\tif (selections[0] && selections[0].row == null) {\n\t\t\tvar c = selections[0].column;\n\n\t\t\tif (activity.columns[c].sourceColumn) {\n\t\t\t\t//activity.columns[c].calc = function() { return null };\n\t\t\t\tactivity.columns[c].label = activity.columns[c].title + \" (off)\";\n\t\t\t\tdelete activity.columns[c].sourceColumn;\n\t\t\t} else {\n\t\t\t\tactivity.columns[c].sourceColumn = activity.columns[c].column;\n\t\t\t\tactivity.columns[c].label = activity.columns[c].title;\n\t\t\t\t//delete activity.columns[c].calc;\n\t\t\t}\n\n\t\t\tactivity.view.setColumns(activity.columns);\n\t\t\tactivity.options.animation.duration = 0;\n\t\t\tactivity.graph.draw(activity.view, activity.options);\n\t\t\tactivity.options.animation.duration = 500;\n\t\t}\n\t}\n\n\tthis.init = function() {\n\t\tactivity.graph = new google.visualization.AreaChart(document.getElementById(\"activityGraph\"));\n\t\tactivity.options = {\n\t\t\tisStacked: false,\n\t\t\tbackgroundColor: \"transparent\",\n\t\t\thAxis: {textStyle: {color: \"#999\", fontName: \"Verdana\", fontSize: 10}, showTextEvery: 3},\n\t\t\tvAxis: {textStyle: {color: \"#666\", fontName: \"Verdana\", fontSize: 10}, viewWindowMode: \"maximized\", viewWindow: {min: 0}, maxValue: 5},\n\t\t\tgridlineColor: \"#454545\",\n\t\t\tpointSize: 2,\n\t\t\tlineWidth: 1,\n\t\t\tchartArea: {left: \"10%\", top: \"5%\", width: \"88%\", height: \"85%\"},\n\t\t\tlegend: {position: \"in\", textStyle: {color: \"#CCC\", fontName: \"Verdana\", fontSize: 8.5}},\n\t\t\tanimation: {duration: 500, easing: \"inAndout\"},\n\t\t\ttooltip: {showColorCode: true},\n\t\t\tannotations: {style: \"line\", textStyle: {fontSize: 12, color: \"#ccc\"}, domain: 0},\n\t\t\tfocusTarget: \"category\"\n\t\t}\n\n\t\tgoogle.visualization.events.addListener(activity.graph, \"select\", activity.selectHandler);\n\n\t\tactivity.getData(activity.span);\n\t}\n\n\tthis.time = function(span) {\n\t\tswitch(span) {\n\t\t\tcase 24:\n\t\t\t\tthis.options.hAxis.showTextEvery = 3;\n\t\t\t\tbreak;\n\t\t\tcase 48:\n\t\t\t\tthis.options.hAxis.showTextEvery = 6;\n\t\t\t\tbreak;\n\t\t\tcase 168:\n\t\t\t\tthis.options.hAxis.showTextEvery = 24;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.span = span;\n\t\tthis.getData(span);\n\t}\n\n\tthis.redraw = function() {\n\t\tthis.graph.draw(this.view, this.options);\n\t}\n\n\tthis.refresh = function(cache) {\n\t\tthis.getData(this.span, cache);\n\t}\n\n\tgoogle.charts.setOnLoadCallback(this.init);\n}\n","var CKConfig = {\n\tskin: \"custom\",\n\theight: 100,\n\tallowedContent: true,\n\textraPlugins: \"toolbarswitch,autogrow,autolink\",\n\tenterMode: CKEDITOR.ENTER_BR,\n\tremoveDialogTabs: 'link:advanced',\n\tautoGrow_onStartup: true,\n\tautoGrow_minHeight: 100,\n\ttoolbar_minToolbar: [\n\t\t{name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"Underline\", \"Strike\"]},\n\t\t{name: \"paragraph\", items: [\"BulletedList\", \"Outdent\", \"Indent\"]},\n\t\t{name: \"links\", items: [\"Link\"]},\n\t\t{name: \"colors\", items: [\"TextColor\", \"BGColor\"]},\n\t\t{name: \"styles\", items: [\"FontSize\"]},\n\t\t{name: \"tools\", items: [\"Toolbarswitch\"]}\n\t],\n\ttoolbar_maxToolbar: [\n\t\t{name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"Underline\", \"Strike\", \"Subscript\", \"Superscript\"]},\n\t\t{name: \"paragraph\", items: [\"NumberedList\", \"BulletedList\", \"Outdent\", \"Indent\"]},\n\t\t{name: \"links\", items: [\"Link\"]},\n\t\t{name: \"colors\", items: [\"TextColor\", \"BGColor\"]},\n\t\t{name: \"styles\", items: [\"FontSize\", \"Font\"]},\n\t\t{name: \"tools\", items: [\"Source\", \"Toolbarswitch\"]}\n\t],\n\ttoolbar: \"minToolbar\",\n\tsmallToolbar: \"minToolbar\",\n\tmaximizedToolbar: \"maxToolbar\",\n\tfontSize_style: {\n\t    element:        'span',\n\t    styles:         { 'font-size': '#(size)' },\n\t    overrides:      [ { element :'font', attributes: { 'size': null } } ]\n\t}\n}\n\nCKEDITOR.on(\"instanceLoaded\", function(cke) {\n\tcke.editor.on(\"contentDom\", function() {\n\t\tcke.editor.on(\"key\", function(e) {\n\t\t\tif (e.data.keyCode == 27) {\n\t\t\t\t// escape key cancels\n\t\t\t\t$(cke.editor.element.$).closest(\".comment\").find(\".commentCancel\").click();\n\t\t\t\treturn false;\n\t\t\t} else if (e.data.domEvent.$.altKey && e.data.domEvent.$.keyCode == 83) {\n\t\t\t\t// alt+s saves\n\t\t\t\t$(cke.editor.element.$).closest(\".comment\").find(\".commentSave\").click();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t});\n\n\t$(\".cke_combo__font a\")\n\t\t.removeClass(\"cke_combo_button\")\n\t\t.addClass(\"cke_button cke_button_off\")\n\t\t.html('<span class=\"cke_button_icon\">&nbsp;</span>')\n\n\t$(\".cke_combo__fontsize a\")\n\t\t.removeClass(\"cke_combo_button\")\n\t\t.addClass(\"cke_button cke_button_off\")\n\t\t.html('<span class=\"cke_button_icon\">&nbsp;</span>')\n});\n\nCKEDITOR.on(\"instanceReady\", function(cke) {\n\t// ensure focus on init\n\tcke.editor.focus();\n\n\tvar s = cke.editor.getSelection(); // getting selection\n\tvar selected_ranges = s.getRanges(); // getting ranges\n\tvar node = selected_ranges[0].startContainer; // selecting the starting node\n\tvar parents = node.getParents(true);\n\n\tnode = parents[parents.length - 2].getFirst();\n\n\tif (!node) return false;\n\n\twhile (true) {\n\t\tvar x = node.getNext();\n\t\tif (x == null) {\n\t\t\tbreak;\n\t\t}\n\t\tnode = x;\n\t}\n\n\ts.selectElement(node);\n\tselected_ranges = s.getRanges();\n\tselected_ranges[0].collapse(false);  //  false collapses the range to the end of the selected node, true before the node.\n\ts.selectRanges(selected_ranges);  // putting the current selection there\n});\n\nCKEDITOR.on(\"dialogDefinition\", function(ev) {\n\tif (ev.data.name == 'link') {\n\t\tev.data.definition.getContents('target').get('linkTargetType')['default'] = '_blank';\n\t}\n});\n","$(\"#admin\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"disabled\")) {\n\t\treturn false;\n\t}\n\n\tif (!$(\"#dialog-admin\").hasClass(\"ui-dialog-content\")) {\n\t\tvar refreshTimer = null;\n\t\tvar $total = null;\n\t\tvar $ajax = null;\n\n\t\tfunction refreshWindow() {\n\t\t\tif ($ajax) $ajax.abort();\n\t\t\t$total.html(\"Total: \" + $(\"#dialog-admin .window .hasFocus table tr[data-id]\").length);\n\n\t\t\t$ajax = $.ajax({\n\t\t\t\turl: \"admin.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: {mode: $(\"#dialog-admin .menu .active\").attr(\"data-window\")},\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data && data.results) {\n\t\t\t\t\tvar rows = data.results;\n\t\t\t\t\tvar ids = [];\n\n\t\t\t\t\tfor (var i = 0, l = rows.length; i < l; i++) {\n\t\t\t\t\t\tvar $row = $(\"#dialog-admin .window .hasFocus tbody tr[data-id='\"+ rows[i].id +\"']\");\n\t\t\t\t\t\tids.push(rows[i].id);\n\n\t\t\t\t\t\tif ($row.length) {\n\t\t\t\t\t\t\tfor (col in rows[i]) {\n\t\t\t\t\t\t\t\tvar $col = $row.find(\"[data-col='\"+col+\"']\");\n\t\t\t\t\t\t\t\t$col.html(($col.attr(\"data-format\") == \"number\" ? Intl.NumberFormat().format(rows[i][col]) : rows[i][col]) || \"&nbsp;\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$row = $(\"#dialog-admin .window .hasFocus table tr.hidden\").clone();\n\t\t\t\t\t\t\t$row.attr(\"data-id\", rows[i].id);\n\n\t\t\t\t\t\t\tfor (col in rows[i]) {\n\t\t\t\t\t\t\t\tvar $col = $row.find(\"[data-col='\"+col+\"']\");\n\t\t\t\t\t\t\t\t$col.html(($col.attr(\"data-format\") == \"number\" ? Intl.NumberFormat().format(rows[i][col]) : rows[i][col]) || \"&nbsp;\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$row.removeClass(\"hidden\");\n\n\t\t\t\t\t\t\t$(\"#dialog-admin .window .hasFocus tbody\").append($row);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table tr[data-id]\").each(function() {\n\t\t\t\t\t\tif ($.inArray($(this).data(\"id\").toString(), ids) == -1) {\n\t\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table\").trigger(\"update\", [true]);\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#dialog-admin .window .hasFocus table tr[data-id]\").remove();\n\t\t\t\t}\n\n\t\t\t\t$total.html(\"Total: \" + $(\"#dialog-admin .window .hasFocus table tr[data-id]\").length);\n\t\t\t});\n\n\t\t\tif ($(\"#dialog-admin\").dialog(\"isOpen\") && $(\"#dialog-admin .menu .active\").attr(\"data-refresh\")) {\n\t\t\t\trefreshTimer = setTimeout(refreshWindow, $(\"#dialog-admin .menu .active\").attr(\"data-refresh\"));\n\t\t\t}\n\t\t}\n\n\t\t$(\"#dialog-admin\").dialog({\n\t\t\tautoOpen: true,\n\t\t\tmodal: true,\n\t\t\theight: 350,\n\t\t\twidth: 800,\n\t\t\tbuttons: {\n\t\t\t\tClose: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\t// menu toggle\n\t\t\t\t$(\"#dialog-admin\").on(\"click\", \".menu li\", function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$menuItem = $(this);\n\t\t\t\t\tclearTimeout(refreshTimer);\n\n\t\t\t\t\t$(\"#dialog-admin .menu .active\").removeClass(\"active\");\n\t\t\t\t\t$menuItem.addClass(\"active\");\n\t\t\t\t\t$(\"div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane\").html(\"\");\n\n\t\t\t\t\t$(\"#dialog-admin .window [data-window]\").removeClass(\"hasFocus\").hide();\n\t\t\t\t\t$(\"#dialog-admin .window [data-window='\"+ $menuItem.data(\"window\") +\"']\").addClass(\"hasFocus\").show();\n\n\t\t\t\t\trefreshWindow();\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-admin [data-sortable='true']\").tablesorter({\n\t\t\t\t\tsortReset: true,\n\t\t\t\t\twidgets: ['saveSort'],\n\t\t\t\t\tsortList: [[0,0]]\n\t\t\t\t});\n\n\t\t\t\t// dialog bottom tray\n\t\t\t\t$($(this)[0].parentElement).find(\".ui-dialog-buttonpane\").append(\"<div class='ui-dialog-traypane'></div>\");\n\t\t\t\t$total = $(\"div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane\");\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$menuItem = $(\"#dialog-admin .menu li.active\");\n\t\t\t\trefreshWindow();\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tclearTimeout(refreshTimer);\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-admin\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-admin\").dialog(\"open\");\n\t}\n});\n","// Dialog effects\n$(\"#wrapper\").addClass(\"transition\");\n\n$(document).on(\"dialogopen\", \".ui-dialog\", function (event, ui) {\n\t// Add additional full screen overlay for 2nd level dialog\n\tif ($(\".ui-dialog:visible\").length == 2 && $(this).hasClass(\"dialog-modal\"))\n\t\t$(\"body\").append($(\"<div id='overlay' class='overlay' />\").css(\"z-index\", $(this).css(\"z-index\") - 1));\n\telse if ($(\"#overlay\"))\n\t\t$(\"#overlay\").css(\"z-index\", $(this).css(\"z-index\") - 1);\n\n\tif (!$(this).hasClass(\"dialog-noeffect\"))\n\t\t$(\"#wrapper\").addClass(\"blur\");\n});\n\n$(document).on(\"dialogclose\", \".ui-dialog\", function (event, ui) {\n\tif (!$(\".ui-dialog\").is(\":visible\"))\n\t\t$(\"#wrapper\").removeClass(\"blur\");\n\n\tif ($(\".ui-dialog:visible\").length == 1)\n\t\t$(\"#overlay\").remove();\n\telse if ($(\"#overlay\"))\n\t\t$(\"#overlay\").css(\"z-index\", $(this).css(\"z-index\") - 2);\n\n\t//if ($(\".ui-dialog:visible\").length == 0 && options.buttons.follow && viewingSystemID != tripwire.client.EVE.systemID)\n\t//\twindow.location = \"?system=\"+tripwire.client.EVE.systemName;\n});\n\n","$(\".options\").click(function(e) {\n\te.preventDefault();\n\n\tif ($(this).hasClass(\"disabled\"))\n\t\treturn false;\n\n\t$(\"#dialog-options\").dialog({\n\t\tautoOpen: false,\n\t\twidth: 450,\n\t\tminHeight: 400,\n\t\tmodal: true,\n\t\tbuttons: {\n\t\t\tSave: function() {\n\t\t\t\t// Options\n\t\t\t\tvar data = {mode: \"set\", options: JSON.stringify(options)};\n\t\t\t\tvar maskChange = false;\n\n\t\t\t\t$(\"#dialog-options\").parent().find(\".ui-dialog-buttonpane button:contains('Save')\").attr(\"disabled\", true).addClass(\"ui-state-disabled\");\n\n\t\t\t\toptions.chain.typeFormat = $(\"#dialog-options #typeFormat\").val();\n\t\t\t\toptions.chain.classFormat = $(\"#dialog-options #classFormat\").val();\n\t\t\t\t\n\t\t\t\toptions.chain.sigNameLocation = $(\"#dialog-options #chainSigNameLocation\").val();\n\t\t\t\toptions.chain.routingLimit = 1 * $(\"#dialog-options #chainRoutingLimit\").val();\n\t\t\t\toptions.chain.routeSecurity = $(\"#dialog-options #chainRouteSecurity\").val();\n\t\t\t\toptions.chain.routeIgnore.enabled = $(\"#dialog-options #route-ignore-enabled\").prop('checked');\n\t\t\t\toptions.chain.routeIgnore.systems = $(\"#dialog-options #route-ignore\").val().split(\",\").map(x => x.trim());\n\n\t\t\t\toptions.chain.gridlines = JSON.parse($(\"#dialog-options input[name=gridlines]:checked\").val());\n\n\t\t\t\toptions.chain[\"node-reference\"] = $(\"#dialog-options input[name=node-reference]:checked\").val();\n\t\t\t\t\n\t\t\t\toptions.chain.renderer = $(\"#dialog-options #renderer\").val();\n\n\t\t\t\toptions.signatures.editType = $(\"#dialog-options #editType\").val();\n\n\t\t\t\toptions.signatures.pasteLife = $(\"#dialog-options #pasteLife\").val();\n\n\t\t\t\toptions.signatures.copySeparator = $(\"#dialog-options #copySeparator\").val();\n\n\t\t\t\toptions.background = $(\"#dialog-options #background-image\").val();\n\n\t\t\t\toptions.uiscale = $(\"#dialog-options #uiscale-slider\").slider(\"value\");\n\n\t\t\t\tif (options.masks.active != $(\"#dialog-options input[name='mask']:checked\").val()) {\n\t\t\t\t\tmaskChange = true;\n\t\t\t\t}\n\n\t\t\t\toptions.masks.active = $(\"#dialog-options input[name='mask']:checked\").val();\n\n\t\t\t\toptions.apply();\n\t\t\t\toptions.save() // Performs AJAX\n\t\t\t\t\t.done(function() {\n\t\t\t\t\t\tif (maskChange) {\n\t\t\t\t\t\t\t// Reset signatures\n\t\t\t\t\t\t\t$(\"#sigTable span[data-age]\").countdown(\"destroy\");\n\t\t\t\t\t\t\t$(\"#sigTable tbody\").empty()\n\t\t\t\t\t\t\t$(\"#signature-count\").html(0);\n\t\t\t\t\t\t\ttripwire.signatures.list = {};\n\t\t\t\t\t\t\ttripwire.client.signatures = [];\n\n\t\t\t\t\t\t\ttripwire.refresh('change');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\n\t\t\t\t$(\"#dialog-options\").dialog(\"close\");\n\t\t\t\t$(\"#dialog-options\").parent().find(\".ui-dialog-buttonpane button:contains('Save')\").attr(\"disabled\", false).removeClass(\"ui-state-disabled\");\n\n\t\t\t\t// toggle mask admin icon\n\t\t\t\t$(\"#dialog-options input[name='mask']:checked\").data(\"admin\") ? $(\"#admin\").removeClass(\"disabled\") : $(\"#admin\").addClass(\"disabled\");\n\t\t\t},\n\t\t\tReset: function() {\n\t\t\t\t$(\"#dialog-confirm #msg\").html(\"Settings will be reset to defaults temporarily.<br/><br/><p><em>Save settings to make changes permanent.</em></p>\");\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tReset: function() {\n\t\t\t\t\t\t\toptions.reset();\n\t\t\t\t\t\t\toptions.apply();\n\n\t\t\t\t\t\t\t$(\"#dialog-options\").dialog(\"close\");\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\n\t\t\t},\n\t\t\tClose: function() {\n\t\t\t\t$(this).dialog(\"close\");\n\t\t\t}\n\t\t},\n\t\topen: function() {\n\t\t\t// Get user stats data\n\t\t\t$.ajax({\n\t\t\t\turl: \"user_stats.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(data) {\n\t\t\t\tfor (i in data.stats) {\n\t\t\t\t\tfor (x in data.stats[i]) {\n\t\t\t\t\t\t$(\"#optionsAccordion #\"+ x).text(data.stats[i][x]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(\"#optionsAccordion #systems_visited\").text(data.system_visits);\n\t\t\t\t$(\"#optionsAccordion #logins\").text(data.account.logins);\n\t\t\t\t$(\"#optionsAccordion #lastLogin\").text(data.account.lastLogin);\n\t\t\t\t$(\"#optionsAccordion #username\").text(data.username);\n\t\t\t});\n\n\t\t\t// Get masks\n\t\t\t$.ajax({\n\t\t\t\turl: \"masks.php\",\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdataType: \"JSON\"\n\t\t\t}).done(function(response) {\n\t\t\t\tif (response && response.masks) {\n\t\t\t\t\t$(\"#dialog-options #masks #default\").html(\"\");\n\t\t\t\t\t$(\"#dialog-options #masks #personal\").html(\"\");\n\t\t\t\t\t$(\"#dialog-options #masks #corporate\").html(\"\");\n\n\t\t\t\t\tfor (var x in response.masks) {\n\t\t\t\t\t\tvar mask = response.masks[x];\n\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t+ '<input type=\"radio\" name=\"mask\" id=\"mask'+x+'\" value=\"'+mask.mask+'\" class=\"selector\" data-owner=\"'+mask.owner+'\" data-admin=\"'+mask.admin+'\" />'\n\t\t\t\t\t\t\t+ '<label for=\"mask'+x+'\"><img src=\"'+mask.img+'\" />'\n\t\t\t\t\t\t\t+  (mask.optional ? '<i class=\"closeIcon\" onclick=\"return false;\" data-icon=\"red-giant\"><i data-icon=\"times\"></i></i>' : '')\n\t\t\t\t\t\t\t+ '<span class=\"selector_label\">'+mask.label+'</span></label>');\n\n\t\t\t\t\t\t$(\"#dialog-options #masks #\"+mask.type).append(node);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t+ '<input type=\"checkbox\" name=\"find\" id=\"findp\" value=\"personal\" class=\"selector\" disabled=\"disabled\" />'\n\t\t\t\t\t\t+ '<label for=\"findp\"><i data-icon=\"search\" style=\"font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;\"></i></label>');\n\t\t\t\t\t$(\"#dialog-options #masks #personal\").append(node);\n\n\t\t\t\t\tif (init.admin == \"1\") {\n\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t+ '<input type=\"checkbox\" name=\"find\" id=\"findc\" value=\"corporate\" class=\"selector\" disabled=\"disabled\" />'\n\t\t\t\t\t\t\t+ '<label for=\"findc\"><i data-icon=\"search\" style=\"font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;\"></i></label>');\n\t\t\t\t\t\t$(\"#dialog-options #masks #corporate\").append(node);\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\"#dialog-options input[name='mask']\").filter(\"[value='\"+response.masks[response.active].mask+\"']\").attr(\"checked\", true).trigger(\"change\");\n\n\t\t\t\t\t// toggle mask admin icon\n\t\t\t\t\tresponse.masks[response.active].admin ? $(\"#admin\").removeClass(\"disabled\") : $(\"#admin\").addClass(\"disabled\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#dialog-options #editType\").val(options.signatures.editType);\n\t\t\t$(\"#dialog-options #pasteLife\").val(options.signatures.pasteLife);\n\t\t\t$(\"#dialog-options #copySeparator\").val(options.signatures.copySeparator);\n\t\t\t$(\"#dialog-options #typeFormat\").val(options.chain.typeFormat);\n\t\t\t$(\"#dialog-options #chainRoutingLimit\").val(options.chain.routingLimit);\n\t\t\t$(\"#dialog-options #chainSigNameLocation\").val(options.chain.sigNameLocation);\n\t\t\t$(\"#dialog-options #chainRouteSecurity\").val(options.chain.routeSecurity);\n\t\t\t$(\"#dialog-options #route-ignore-enabled\").prop('checked', options.chain.routeIgnore.enabled);\n\t\t\t$(\"#dialog-options #route-ignore\").val(options.chain.routeIgnore.systems.join(','));\n\t\t\t$(\"#dialog-options #renderer\").val(options.chain.renderer);\n\t\t\t$(\"#dialog-options #classFormat\").val(options.chain.classFormat);\n\t\t\t$(\"#dialog-options input[name='node-reference'][value='\"+options.chain[\"node-reference\"]+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options input[name='gridlines'][value='\"+options.chain.gridlines+\"']\").prop(\"checked\", true);\n\t\t\t$(\"#dialog-options #background-image\").val(options.background);\n\t\t},\n\t\tcreate: function() {\n\t\t\t$(\"#optionsAccordion\").accordion({heightStyle: \"content\", collapsible: true, active: false});\n\n\t\t\t$(\"#uiscale-slider\").slider({\n\t\t\t\tmin: 0.7,\n\t\t\t\tmax: 1.4,\n\t\t\t\tstep: 0.05,\n\t\t\t\tvalue: options.uiscale || 1.0,\n\t\t\t\tchange: function(e, ui) {\n\t\t\t\t\t$(\"body\").css(\"zoom\", ui.value);\n\t\t\t\t},\n\t\t\t\tslide: function(e, ui) {\n\t\t\t\t\t$(\"label[for='uiscale-slider']\").html(ui.value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"label[for='uiscale-slider']\").html($(\"#uiscale-slider\").slider(\"value\"));\n\n\t\t\t$(\"#dialog-pwChange\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tresizable: false,\n\t\t\t\tminHeight: 0,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#pwForm\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#pwForm input[name='password'], #pwForm input[name='confirm']\").val(\"\");\n\t\t\t\t\t$(\"#pwError\").text(\"\").hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#pwChange\").click(function() {\n\t\t\t\t$(\"#dialog-pwChange\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t$(\"#pwForm\").submit(function(e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$(\"#pwError\").text(\"\").hide();\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"options.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(response) {\n\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t$(\"#dialog-msg #msg\").text(\"Password changed\");\n\t\t\t\t\t\t$(\"#dialog-msg\").dialog(\"open\");\n\n\t\t\t\t\t\t$(\"#dialog-pwChange\").dialog(\"close\");\n\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t$(\"#pwError\").text(response.error).show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#pwError\").text(\"Unknown error\").show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$(\"#dialog-usernameChange\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tresizable: false,\n\t\t\t\tminHeight: 0,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#usernameForm\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\t$(\"#usernameForm #username\").html($(\"#dialog-options #username\").html());\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#usernameForm [name='username']\").val(\"\");\n\t\t\t\t\t$(\"#usernameError\").text(\"\").hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#usernameChange\").click(function() {\n\t\t\t\t$(\"#dialog-usernameChange\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t$(\"#usernameForm\").submit(function(e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$(\"#usernameError\").text(\"\").hide();\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"options.php\",\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t}).done(function(response) {\n\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t$(\"#dialog-msg #msg\").text(\"Username changed\");\n\t\t\t\t\t\t$(\"#dialog-msg\").dialog(\"open\");\n\n\t\t\t\t\t\t$(\"#dialog-options #username\").html(response.result);\n\n\t\t\t\t\t\t$(\"#dialog-usernameChange\").dialog(\"close\");\n\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t$(\"#usernameError\").text(response.error).show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#usernameError\").text(\"Unknown error\").show(\"slide\", {direction: \"up\"});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Mask selections\n\t\t\t$(\"#masks\").on(\"change\", \"input.selector:checked\", function() {\n\t\t\t\tif ($(this).data(\"owner\")) {\n\t\t\t\t\t$(\"#maskControls #edit\").removeAttr(\"disabled\");\n\t\t\t\t\t$(\"#maskControls #delete\").removeAttr(\"disabled\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#maskControls #edit\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t$(\"#maskControls #delete\").attr(\"disabled\", \"disabled\");\n\t\t\t\t}\n\n\t\t\t\tif ($(this).val() != 0.0 && $(this).val().split(\".\")[1] == 0) {\n\t\t\t\t\t$(\"#dialog-options #leave\").removeAttr(\"disabled\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"#dialog-options #leave\").attr(\"disabled\", \"disabled\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Mask join\n\t\t\t$(\"#dialog-joinMask\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tresizable: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tAdd: function() {\n\t\t\t\t\t\tvar mask = $(\"#dialog-joinMask #results input:checked\");\n\t\t\t\t\t\tvar label = $(\"#dialog-joinMask #results input:checked+label\");\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: {mask: mask.val(), mode: \"join\"},\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\tlabel.css(\"width\", \"\");\n\t\t\t\t\t\t\t\tlabel.find(\".info\").remove();\n\t\t\t\t\t\t\t\tlabel.append('<i class=\"closeIcon\" onclick=\"return false;\" data-icon=\"red-giant\"><i data-icon=\"times\"></i></i>');\n\n\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #\"+response.type+\" input.selector:last\").before(mask).before(label);\n\t\t\t\t\t\t\t\t$(\"#dialog-joinMask\").dialog(\"close\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#dialog-joinMask form\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t$(\"#dialog-joinMask #results\").html(\"\");\n\t\t\t\t\t\t$(\"#dialog-joinMask #loading\").show();\n\t\t\t\t\t\t$(\"#dialog-joinMask input[type='submit']\").attr(\"disabled\", \"disabled\");\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\t\tif (response && response.results && response.results.length) {\n\t\t\t\t\t\t\t\treturn tripwire.esi.fullLookup(response.eveIDs)\n\t\t\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\t\t\tif (results) {\n\t\t\t\t\t\t\t\t\t\t\tfor (var x in results) {\n\t\t\t\t\t\t\t\t\t\t\t\tvar mask = response.results[x];\n\t\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"radio\" name=\"mask\" id=\"mask'+mask.mask+'\" value=\"'+mask.mask+'\" class=\"selector\" data-owner=\"false\" data-admin=\"'+mask.admin+'\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"mask'+mask.mask+'\" style=\"width: 100%; margin-left: -5px;\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<img src=\"'+mask.img+'\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<span class=\"selector_label\">'+mask.label+'</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].name + '<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].category == \"character\" ? results[x].corporation.name +'<br/>' : null)\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].alliance ? results[x].alliance.name : '')+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</label>');\n\n\t\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-joinMask #results\").append(node);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(response.error);\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unknown error\");\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).then(function() {\n\t\t\t\t\t\t\t$(\"#dialog-joinMask #loading\").hide();\n\t\t\t\t\t\t\t$(\"#dialog-joinMask input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#dialog-joinMask #results\").html(\"\");\n\t\t\t\t\t$(\"#dialog-joinMask input[name='name']\").val(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#dialog-options #masks\").on(\"click\", \"input[name='find']+label\", function() {\n\t\t\t\t$(\"#dialog-joinMask input[name='find']\").val($(this).prev().val());\n\t\t\t\t$(\"#dialog-joinMask\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t// Mask leave\n\t\t\t$(\"#dialog-options #masks\").on(\"click\", \".closeIcon\", function() {\n\t\t\t\tvar mask = $(this).closest(\"input.selector+label\").prev();\n\n\t\t\t\t$(\"#dialog-confirm #msg\").text(\"Are you sure you want to remove this mask?\");\n\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tRemove: function() {\n\t\t\t\t\t\t\tvar send = {mode: \"leave\", mask: mask.val()};\n\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\t\tdata: send,\n\t\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t\tmask.next().remove();\n\t\t\t\t\t\t\t\t\tmask.remove();\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unable to delete\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\n\t\t\t});\n\n\t\t\t// Mask delete\n\t\t\t$(\"#maskControls #delete\").click(function() {\n\t\t\t\tvar mask = $(\"#masks input.selector:checked\");\n\n\t\t\t\t$(\"#dialog-confirm #msg\").text(\"Are you sure you want to delete this mask?\");\n\t\t\t\t$(\"#dialog-confirm\").dialog(\"option\", {\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tDelete: function() {\n\t\t\t\t\t\t\tvar send = {mode: \"delete\", mask: mask.val()};\n\n\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\t\tdata: send,\n\t\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t\tmask.next().remove();\n\t\t\t\t\t\t\t\t\tmask.remove();\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-confirm\").dialog(\"close\");\n\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unable to delete\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).dialog(\"open\");\n\t\t\t});\n\n\t\t\t// User Create mask\n\t\t\t$(\"#dialog-createMask\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tCreate: function() {\n\t\t\t\t\t\t$(\"#dialog-createMask form\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#dialog-createMask #accessList\").on(\"click\", \"#create_add+label\", function() {\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").dialog(\"open\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-createMask form\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t// Get masks\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\t\t\tif (response && response.masks) {\n\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #default\").html(\"\");\n\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #personal\").html(\"\");\n\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #corporate\").html(\"\");\n\n\t\t\t\t\t\t\t\t\t\tfor (var x in response.masks) {\n\t\t\t\t\t\t\t\t\t\t\tvar mask = response.masks[x];\n\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"radio\" name=\"mask\" id=\"mask'+x+'\" value=\"'+mask.mask+'\" class=\"selector\" data-owner=\"'+mask.owner+'\" data-admin=\"'+mask.admin+'\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"mask'+x+'\"><img src=\"'+mask.img+'\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t+  (mask.optional ? '<i class=\"closeIcon\" onclick=\"return false;\" data-icon=\"red-giant\"><i data-icon=\"times\"></i></i>' : '')\n\t\t\t\t\t\t\t\t\t\t\t\t+ '<span class=\"selector_label\">'+mask.label+'</span></label>');\n\n\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #\"+mask.type).append(node);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"checkbox\" name=\"find\" id=\"findp\" value=\"personal\" class=\"selector\" disabled=\"disabled\" />'\n\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"findp\"><i data-icon=\"search\" style=\"font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;\"></i></label>');\n\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #personal\").append(node);\n\n\t\t\t\t\t\t\t\t\t\tif (init.admin == \"1\") {\n\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"checkbox\" name=\"find\" id=\"findc\" value=\"corporate\" class=\"selector\" disabled=\"disabled\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"findc\"><i data-icon=\"search\" style=\"font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;\"></i></label>');\n\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options #masks #corporate\").append(node);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t$(\"#dialog-options input[name='mask']\").filter(\"[value='\"+response.masks[response.active].mask+\"']\").attr(\"checked\", true).trigger(\"change\");\n\n\t\t\t\t\t\t\t\t\t\t// toggle mask admin icon\n\t\t\t\t\t\t\t\t\t\tresponse.masks[response.active].admin ? $(\"#admin\").removeClass(\"disabled\") : $(\"#admin\").addClass(\"disabled\");\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t$(\"#dialog-createMask\").dialog(\"close\");\n\t\t\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(response.error);\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unknown error\");\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-createMask select\").selectmenu({width: 100});\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\t$(\"#dialog-createMask input[name='name']\").val(\"\");\n\t\t\t\t\t$(\"#dialog-createMask #accessList :not(.static)\").remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#maskControls #create\").click(function() {\n\t\t\t\t$(\"#dialog-createMask\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t$(\"#dialog-createMask #accessList\").on(\"click\", \".maskRemove\", function() {\n\t\t\t\t$(this).closest(\"input.selector+label\").prev().remove();\n\t\t\t\t$(this).closest(\"label\").remove();\n\t\t\t});\n\n\t\t\t$(\"#dialog-editMask\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tSave: function() {\n\t\t\t\t\t\t$(\"#dialog-editMask form\").submit();\n\t\t\t\t\t},\n\t\t\t\t\tCancel: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#dialog-editMask #accessList\").on(\"click\", \".maskRemove\", function() {\n\t\t\t\t\t\t$(this).closest(\"input.selector+label\").prev().attr(\"name\", \"deletes[]\").hide();\n\t\t\t\t\t\t$(this).closest(\"label\").hide();\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-editMask #accessList\").on(\"click\", \"#edit_add+label\", function() {\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").dialog(\"open\");\n\t\t\t\t\t});\n\n\t\t\t\t\t$(\"#dialog-editMask form\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tdata: $(this).serialize(),\n\t\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t\t}).done(function(response) {\n\t\t\t\t\t\t\tif (response && response.result) {\n\t\t\t\t\t\t\t\t$(\"#dialog-editMask\").dialog(\"close\");\n\t\t\t\t\t\t\t} else if (response && response.error) {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(response.error);\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Unknown error\");\n\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\topen: function() {\n\t\t\t\t\tvar mask = $(\"#dialog-options input[name='mask']:checked\").val();\n\t\t\t\t\t$(\"#dialog-editMask input[name='mask']\").val(mask);\n\t\t\t\t\t$(\"#dialog-editMask #accessList label.static\").hide();\n\t\t\t\t\t$(\"#dialog-editMask #loading\").show();\n\t\t\t\t\t$(\"#dialog-editMask #name\").text($(\"#dialog-options input[name='mask']:checked+label .selector_label\").text());\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"masks.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: {mode: \"edit\", mask: mask},\n\t\t\t\t\t\tdataType: \"JSON\"\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\tif (response && response.results && response.results.length) {\n\t\t\t\t\t\t\treturn tripwire.esi.fullLookup(response.results)\n\t\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\t\tif (results) {\n\t\t\t\t\t\t\t\t\t\tfor (var x in results) {\n\t\t\t\t\t\t\t\t\t\t\tif (results[x].category == \"character\") {\n\t\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"checkbox\" checked=\"checked\" onclick=\"return false\" name=\"\" id=\"edit_'+results[x].id+'_1373\" value=\"'+results[x].id+'_1373\" class=\"selector\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"edit_'+results[x].id+'_1373\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Character/'+results[x].id+'_64.jpg\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Character</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].name + '<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].corporation.name+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].alliance ? results[x].alliance.name : '')+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t<input type=\"button\" class=\"maskRemove\" value=\"Remove\" style=\"position: absolute; bottom: 3px; right: 3px;\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</label>');\n\n\t\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-editMask #accessList .static:first\").before(node);\n\t\t\t\t\t\t\t\t\t\t\t} else if (results[x].category == \"corporation\") {\n\t\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<input type=\"checkbox\" checked=\"checked\" onclick=\"return false\" name=\"\" id=\"edit_'+results[x].id+'_2\" value=\"'+results[x].id+'_2\" class=\"selector\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"edit_'+results[x].id+'_2\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Corporation/'+results[x].id+'_64.png\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Corporation</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].name+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].alliance ? results[x].alliance.name : '')+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t<input type=\"button\" class=\"maskRemove\" value=\"Remove\" style=\"position: absolute; bottom: 3px; right: 3px;\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</label>');\n\n\t\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-editMask #accessList .static:first\").before(node);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(function(response) {\n\t\t\t\t\t\t$(\"#dialog-editMask #accessList label.static\").show();\n\t\t\t\t\t\t$(\"#dialog-editMask #loading\").hide();\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#dialog-editMask #accessList :not(.static)\").remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(\"#maskControls #edit\").click(function() {\n\t\t\t\t$(\"#dialog-editMask\").dialog(\"open\");\n\t\t\t});\n\n\t\t\t// EVE search dialog\n\t\t\t$(\"#dialog-EVEsearch\").dialog({\n\t\t\t\tautoOpen: false,\n\t\t\t\tdialogClass: \"ui-dialog-shadow dialog-noeffect dialog-modal\",\n\t\t\t\tbuttons: {\n\t\t\t\t\tAdd: function() {\n\t\t\t\t\t\tif ($(\"#accessList input[value='\"+$(\"#EVESearchResults input\").val()+\"']\").length) {\n\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"Already has access\");\n\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(\"#EVESearchResults .info\").append('<input type=\"button\" class=\"maskRemove\" value=\"Remove\" style=\"position: absolute; bottom: 3px; right: 3px;\" />');\n\t\t\t\t\t\t$(\"#EVESearchResults input:checked\").attr(\"checked\", \"checked\");\n\t\t\t\t\t\t$(\"#EVESearchResults input:checked\").attr(\"onclick\", \"return false\");\n\n\t\t\t\t\t\tvar nodes = $(\"#EVESearchResults .maskNode:has(input:checked)\");\n\n\t\t\t\t\t\tif ($(\"#dialog-createMask\").dialog(\"isOpen\"))\n\t\t\t\t\t\t\t$(\"#dialog-createMask #accessList .static:first\").before(nodes);\n\t\t\t\t\t\telse if ($(\"#dialog-editMask\").dialog(\"isOpen\"))\n\t\t\t\t\t\t\t$(\"#dialog-editMask #accessList .static:first\").before(nodes);\n\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t},\n\t\t\t\t\tClose: function() {\n\t\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreate: function() {\n\t\t\t\t\t$(\"#EVEsearch\").submit(function(e) {\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tif ($(\"#EVEsearch input[name='name']\").val() == \"\") {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$(\"#EVESearchResults, #searchCount\").html(\"\");\n\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").show();\n\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").attr(\"disabled\", \"disabled\");\n\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").attr(\"disabled\", true).addClass(\"ui-state-disabled\");\n\n\t\t\t\t\t\ttripwire.esi.search($(\"#EVEsearch input[name='name']\").val(), $(\"#EVEsearch input[name='category']:checked\").val(), $(\"#EVEsearch input[name='exact']\")[0].checked)\n\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\tif (results && (results.character || results.corporation)) {\n\t\t\t\t\t\t\t\t\t// limit results\n\t\t\t\t\t\t\t\t\tresults = $.merge(results.character || [], results.corporation || []);\n\t\t\t\t\t\t\t\t\ttotal = results.length;\n\t\t\t\t\t\t\t\t\tresults = results.slice(0, 10);\n\t\t\t\t\t\t\t\t\treturn tripwire.esi.fullLookup(results)\n\t\t\t\t\t\t\t\t\t\t.done(function(results) {\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchCount\").html(\"Found: \"+total+\"<br/>Showing: \"+(total<10?total:10));\n\t\t\t\t\t\t\t\t\t\t\tif (results) {\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var x in results) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (results[x].category == \"character\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<div class=\"maskNode\"><input type=\"checkbox\" name=\"adds[]\" id=\"find_'+results[x].id+'_1373\" value=\"'+results[x].id+'_1373\" class=\"selector\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"find_'+results[x].id+'_1373\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Character/'+results[x].id+'_64.jpg\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Character</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].name + '<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].corporation.name+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].alliance ? results[x].alliance.name : '')+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</label></div>');\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#EVESearchResults\").append(node);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (results[x].category == \"corporation\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar node = $(''\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<div class=\"maskNode\"><input type=\"checkbox\" name=\"adds[]\" id=\"find_'+results[x].id+'_2\" value=\"'+results[x].id+'_2\" class=\"selector\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '<label for=\"find_'+results[x].id+'_2\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<img src=\"https://image.eveonline.com/Corporation/'+results[x].id+'_64.png\" />'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<span class=\"selector_label\">Corporation</span>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t<div class=\"info\">'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+results[x].name+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t\t'+(results[x].alliance ? results[x].alliance.name : '')+'<br/>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '\t</div>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ '</label></div>');\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#EVESearchResults\").append(node);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}).always(function() {\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").hide();\n\t\t\t\t\t\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").removeAttr(\"disabled\").removeClass(\"ui-state-disabled\");\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error #msg\").text(\"No Results\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-error\").dialog(\"open\");\n\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch #searchSpinner\").hide();\n\t\t\t\t\t\t\t\t\t$(\"#EVEsearch input[type='submit']\").removeAttr(\"disabled\");\n\t\t\t\t\t\t\t\t\t$(\"#dialog-EVEsearch\").parent().find(\".ui-dialog-buttonpane button:contains('Add')\").removeAttr(\"disabled\").removeClass(\"ui-state-disabled\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tclose: function() {\n\t\t\t\t\t$(\"#EVEsearch input[name='name']\").val(\"\");\n\t\t\t\t\t$(\"#EVESearchResults, #searchCount\").html(\"\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\t$(\"#dialog-options\").dialog(\"open\");\n});\n","\t\t$(\"#dialog-ping\").dialog({\n\t\t\tautoOpen: false,\n\t\t\theight: \"auto\",\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tSend: function() {\n\t\t\t\t\tvar payload = {systemName: this.systemName, systemText: this.systemText, message: $('#ping-text').val() };\n\t\t\t\t\tconst _this = this;\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"ping.php\",\n\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\tdata: payload,\n\t\t\t\t\t\tdataType: \"text\"\n\t\t\t\t\t}).done(function(data) {\t$(_this).dialog(\"close\"); })\n\t\t\t\t\t.fail(function(xhr, status, error) { console.log(status, error); });\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t},\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\tconst wormholeID = $(this).data(\"id\");\n\t\t\t\tconst systemID = $(this).data(\"systemID\");\n\t\t\t\tconst wormhole = tripwire.client.wormholes[wormholeID];\n\t\t\t\tconst fromSignature = wormhole ? tripwire.client.signatures[wormhole.initialID] : { name: null};\n\t\t\t\t\n\t\t\t\tthis.systemName = tripwire.systems[systemID].name;\n\t\t\t\tthis.systemText = this.systemName + (fromSignature.name !== null && fromSignature.name.length ? ' (' + fromSignature.name + ')' : '');\n\t\t\t\t\n\t\t\t\t$(\"#dialog-ping\").dialog(\"option\", \"title\", \"Ping about \"+this.systemText);\n\t\t\t\t$('#ping-text').val('');\n\t\t\t\t$('#ping-text').focus();\n\t\t\t}\n\t\t});","$(\"#signaturesWidget\").on(\"click\", \"#delete-signature\", function(e) {\n\te.preventDefault();\n\n\tif ($(this).closest(\"tr\").attr(\"disabled\")) {\n\t\treturn false;\n\t} else if ($(\"#sigTable tr.selected\").length == 0) {\n\t\treturn false;\n\t} else if ($(\"#dialog-sigEdit\").hasClass(\"ui-dialog-content\") && $(\"#dialog-sigEdit\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-sigEdit\").parent().effect(\"shake\", 300);\n\t\treturn false;\n\t}\n\n\t// check if dialog is open\n\tif (!$(\"#dialog-deleteSig\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-deleteSig\").dialog({\n\t\t\tresizable: false,\n\t\t\tminHeight: 0,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tbuttons: {\n\t\t\t\tDelete: function() {\n\t\t\t\t\t// Prevent duplicate submitting\n\t\t\t\t\t$(\"#dialog-deleteSig\").parent().find(\":button:contains('Delete')\").button(\"disable\");\n\t\t\t\t\tvar payload = {\"signatures\": {\"remove\": []}, \"systemID\": viewingSystemID};\n\t\t\t\t\tvar undo = [];\n\n\t\t\t\t\tvar signatures = $.map($(\"#sigTable tr.selected\"), function(n) {\n\t\t\t\t\t\tvar signature = tripwire.client.signatures[$(n).data(\"id\")];\n\t\t\t\t\t\tif (signature.type != \"wormhole\") {\n\t\t\t\t\t\t\tundo.push(signature);\n\t\t\t\t\t\t\treturn signature.id;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\t\tundo.push({\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]});\n\t\t\t\t\t\t\treturn wormhole;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tpayload.signatures.remove = signatures;\n\n\t\t\t\t\tvar success = function(data) {\n\t\t\t\t\t\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-deleteSig\").dialog(\"close\");\n\n\t\t\t\t\t\t\t$(\"#undo\").removeClass(\"disabled\");\n\t\t\t\t\t\t\tif (viewingSystemID in tripwire.signatures.undo) {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar always = function(data) {\n\t\t\t\t\t\t$(\"#dialog-deleteSig\").parent().find(\":button:contains('Delete')\").button(\"enable\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttripwire.refresh('refresh', payload, success, always);\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t//$(\"#sigTable .sigDelete\").removeClass(\"invisible\");\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-deleteSig\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-deleteSig\").dialog(\"open\");\n\t}\n});\n","const sigDialog = {};\nconst sigDialogVM = {};\n\nsigDialog.openSignatureDialog = function(e) {\n\tif(e.preventDefault) { e.preventDefault(); }\t// Allow calls with fake event-like objects too\n\tsigDialogVM.mode = e.data.mode;\n\t\n\tswitch(sigDialogVM.mode) {\n\t\tcase 'update':\n\t\t\tif (e.data.source == \"sig-row\") {\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t$(this).closest(\"tr\").addClass(\"selected\");\n\t\t\t\tsigDialogVM.sigId = $(this).data('id');\n\t\t\t} else if (e.data.source == \"edit-sig\") {\n\t\t\t\tvar elements = $(\"#sigTable tbody tr.selected\");\n\t\t\t\tif (elements.length !== 1) {\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\tsigDialogVM.sigId = $(elements[0]).data('id');\n\t\t\t\t}\n\t\t\t} else { sigDialogVM.sigId = e.data.signature; }\n\t\t\tbreak;\n\t\tdefault: delete sigDialogVM.sigId;\n\t}\n\t\n\tsigDialogVM.viewingSystemID = ( sigDialogVM.sigId ) ? tripwire.client.signatures[sigDialogVM.sigId].systemID : viewingSystemID;\n\tsigDialogVM.viewingSystem = tripwire.systems[sigDialogVM.viewingSystemID];\n\t\n\tif (!$(\"#dialog-signature\").hasClass(\"ui-dialog-content\")) {\n\t\t$(\"#dialog-signature\").dialog({\n\t\t\tautoOpen: true,\n\t\t\tresizable: false,\n\t\t\tdialogClass: \"dialog-noeffect ui-dialog-shadow\",\n\t\t\tposition: {my: \"center\", at: \"center\", of: $(\"#signaturesWidget\")},\n\t\t\tbuttons: {\n\t\t\t\tSave: function() {\n\t\t\t\t\t$(\"#form-signature\").submit();\n\t\t\t\t},\n\t\t\t\tAdd: function() {\n\t\t\t\t\t$(\"#form-signature\").submit();\n\t\t\t\t},\n\t\t\t\tCancel: function() {\n\t\t\t\t\t$(this).dialog(\"close\");\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreate: function() {\n\t\t\t\tvar aSigWormholes = $.map(tripwire.wormholes, function(item, index) { return index;});\n\t\t\t\taSigWormholes.splice(26, 0, \"K162\");\n\t\t\t\taSigWormholes.push(\"GATE\");\n\t\t\t\taSigWormholes.push(\"SML\");\n\t\t\t\taSigWormholes.push(\"MED\");\n\t\t\t\taSigWormholes.push(\"LRG\");\n\t\t\t\taSigWormholes.push(\"XLG\");\n\n\t\t\t\t$(\"#dialog-signature [name='signatureType'], #dialog-signature [name='signatureLife']\").selectmenu({width: 100});\n\t\t\t\t$(\"#dialog-signature [name='wormholeLife'], #dialog-signature [name='wormholeMass']\").selectmenu({width: 80});\n\t\t\t\t$(\"#dialog-signature [data-autocomplete='sigSystems']\").inlinecomplete({source: tripwire.aSigSystems, maxSize: 10, delay: 0});\n\t\t\t\t$(\"#dialog-signature [data-autocomplete='sigType']\").inlinecomplete({source: aSigWormholes, maxSize: 10, delay: 0});\n\n\t\t\t\t$(\"#dialog-signature #durationPicker\").durationPicker();\n\t\t\t\t$(\"#dialog-signature #durationPicker\").on(\"change\", function() {\n\t\t\t\t\t// prevent negative values\n\t\t\t\t\tif (this.value < 0) {\n\t\t\t\t\t\tthis.value = 0;\n\t\t\t\t\t\t$(this).change();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Ensure first signature ID field only accepts letters\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Alpha'], #dialog-signature [name='signatureID2_Alpha']\").on(\"input\", function() {\n\t\t\t\t\twhile (!/^[a-zA-Z?]*$/g.test(this.value)) {\n\t\t\t\t\t\tthis.value = this.value.substring(0, this.value.length -1);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Move to the numeric ID after filling out alpha ID\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Alpha']\").on(\"input\", function() {\n\t\t\t\t\tif (this.value.length === 3) {\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureID_Numeric']\").select();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(\"#dialog-signature [name='signatureID2_Alpha']\").on(\"input\", function() {\n\t\t\t\t\tif (this.value.length === 3) {\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureID2_Numeric']\").select();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Ensure second signature ID field only accepts numbers\n\t\t\t\t$(\"#dialog-signature [name='signatureID_Numeric'], #dialog-signature [name='signatureID2_Numeric']\").on(\"input\", function() {\n\t\t\t\t\twhile (!/^[0-9?]*$/g.test(this.value)) {\n\t\t\t\t\t\tthis.value = this.value.substring(0, this.value.length -1);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Select value on click\n\t\t\t\t$(\"#dialog-signature .signatureID, #dialog-signature .wormholeType\").on(\"click\", function() {\n\t\t\t\t\t$(this).select();\n\t\t\t\t});\n\n\t\t\t\t// Auto fill opposite side wormhole w/ K162\n\t\t\t\t$(\"#dialog-signature .wormholeType\").on(\"input, change\", function() {\n\t\t\t\t\tif (this.value.length > 0 && $.inArray(this.value.toUpperCase(), aSigWormholes) != -1 && this.value.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"K162\");\n\n\t\t\t\t\t\t// Also auto calculate duration\n\t\t\t\t\t\tif (tripwire.wormholes[this.value.toUpperCase()]) {\n\t\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(tripwire.wormholes[this.value.toUpperCase()].life.substring(0, 2) * 60 * 60).change();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.value.toUpperCase() === \"K162\") {\n\t\t\t\t\t\tif ($.inArray($(\"#dialog-signature .wormholeType\").not(this).val().toUpperCase(), aSigWormholes) === -1 || $(\"#dialog-signature .wormholeType\").not(this).val().toUpperCase() === \"K162\") {\n\t\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"????\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (this.value == \"????\") {\n\t\t\t\t\t\t$(\"#dialog-signature .wormholeType\").not(this).val(\"K162\");\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Toggle between wormhole and regular signatures\n\t\t\t\t$(\"#dialog-signature\").on(\"selectmenuchange\", \"[name='signatureType']\", function() {\n\t\t\t\t\tif (this.value == \"wormhole\") {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").slideUp(200, function() { $(this).hide(0); });\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").slideDown(200, function() { $(this).show(200); });\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").slideDown(200, function() { $(this).show(200); });\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").slideUp(200, function() { $(this).hide(0); });\n\t\t\t\t\t}\n\n\t\t\t\t\tValidationTooltips.close();\n\t\t\t\t});\n\n\t\t\t\t$(\"#form-signature\").submit(function(e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar form = $(this).serializeObject();\n\t\t\t\t\tvar valid = true;\n\t\t\t\t\tValidationTooltips.close();\n\n\t\t\t\t\t// Validate full signature ID fields (blank | 3 characters)\n\t\t\t\t\t$.each($(\"#dialog-signature .signatureID:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && this.value.length < 3) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be 3 characters in length!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate full signature ID doesn't already exist in current system\n\t\t\t\t\tif (form.signatureID_Alpha.length === 3 && form.signatureID_Numeric.length === 3) {\n\t\t\t\t\t\tfor(var sigKey in tripwire.client.signatures) {\n\t\t\t\t\t\t\tconst existing = tripwire.client.signatures[sigKey];\n\t\t\t\t\t\t\tif((existing.id != sigDialogVM.sigId) && // not the sig we are editing\n\t\t\t\t\t\t\t\t(existing.signatureID == form.signatureID_Alpha.toLowerCase() + form.signatureID_Numeric) && // same name\n\t\t\t\t\t\t\t\t(existing.systemID == sigDialogVM.viewingSystemID) // in current system\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tValidationTooltips.open({target: $(\"#dialog-signature .signatureID:first\")}).setContent(\"Signature ID already exists! <input type='button' autofocus='true' id='overwrite' value='Overwrite' style='margin-bottom: -4px; margin-top: -4px; font-size: 0.8em;' data-id='\"+ sigKey +\"' />\");\n\t\t\t\t\t\t\t\t$(\"#overwrite\").focus();\n\t\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate wormhole types (blank | wormhole)\n\t\t\t\t\t$.each($(\"#dialog-signature .wormholeType:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && $.inArray(this.value.toUpperCase(), aSigWormholes) == -1 && this.value != \"????\") {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be a valid wormhole type!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate leads to system (blank | system)\n\t\t\t\t\t$.each($(\"#dialog-signature .leadsTo:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && tripwire.aSigSystems.findIndex((item) => this.value.toLowerCase() === item.toLowerCase()) == -1) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Must be a valid leads to system!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\t// Validate leads to isn't the viewing system which causes a inner loop\n\t\t\t\t\t$.each($(\"#dialog-signature .leadsTo:visible\"), function() {\n\t\t\t\t\t\tif (this.value.length > 0 && this.value.toLowerCase() === sigDialogVM.viewingSystem.name.toLowerCase()) {\n\t\t\t\t\t\t\tValidationTooltips.open({target: $(this)}).setContent(\"Wormhole cannot lead to the same system it comes from!\");\n\t\t\t\t\t\t\t$(this).select();\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!valid) return false;\n\n\t\t\t\t\tvar payload = {};\n\t\t\t\t\tvar undo = [];\n\t\t\t\t\tif (form.signatureType === \"wormhole\") {\n\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\"type\": \"wormhole\",\n\t\t\t\t\t\t\t\"name\": form.wormholeName,\n\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar leadsTo = null;\n\t\t\t\t\t\tif (Object.index(tripwire.systems, \"name\", form.leadsTo, true)) {\n\t\t\t\t\t\t\t// Leads To is a normal EVE system, so use the sytem ID\n\t\t\t\t\t\t\tleadsTo = Object.index(tripwire.systems, \"name\", form.leadsTo, true)\n\t\t\t\t\t\t} else if (tripwire.wormholes[form.wormholeType.toUpperCase()]) {\n\t\t\t\t\t\t\t// Leads To can be determined by the wormhole type, so lets use what we know it leads to\n\t\t\t\t\t\t\tif (tripwire.aSigSystems.findIndex((item) => tripwire.wormholes[form.wormholeType.toUpperCase()].leadsTo.replace(' ', '-').toLowerCase() === item.toLowerCase()) > -1) {\n\t\t\t\t\t\t\t\tleadsTo = tripwire.aSigSystems.findIndex((item) => tripwire.wormholes[form.wormholeType.toUpperCase()].leadsTo.replace(' ', '-').toLowerCase() === item.toLowerCase());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (tripwire.aSigSystems.findIndex((item) => form.leadsTo.toLowerCase() === item.toLowerCase()) !== -1) {\n\t\t\t\t\t\t\t// Leads To is one of the valid types we allow, so use of of those indexes as reference\n\t\t\t\t\t\t\tleadsTo = tripwire.aSigSystems.findIndex((item) => form.leadsTo.toLowerCase() === item.toLowerCase());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar signature2 = {\n\t\t\t\t\t\t\t\"signatureID\": form.signatureID2_Alpha + form.signatureID2_Numeric,\n\t\t\t\t\t\t\t\"systemID\": leadsTo,\n\t\t\t\t\t\t\t\"type\": \"wormhole\",\n\t\t\t\t\t\t\t\"name\": form.wormholeName2,\n\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar type = null;\n\t\t\t\t\t\tvar parent = null;\n\t\t\t\t\t\tif (form.wormholeType.length > 0 && $.inArray(form.wormholeType.toUpperCase(), aSigWormholes) != -1 && form.wormholeType.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\tparent = \"initial\";\n\t\t\t\t\t\t\ttype = form.wormholeType.toUpperCase();\n\t\t\t\t\t\t} else if (form.wormholeType2.length > 0 && $.inArray(form.wormholeType2.toUpperCase(), aSigWormholes) != -1 && form.wormholeType2.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\tparent = \"secondary\";\n\t\t\t\t\t\t\ttype = form.wormholeType2.toUpperCase();\n\t\t\t\t\t\t} else if (form.wormholeType.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\tparent = \"secondary\";\n\t\t\t\t\t\t\ttype = \"????\";\n\t\t\t\t\t\t} else if (form.wormholeType2.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\tparent = \"initial\";\n\t\t\t\t\t\t\ttype = \"????\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar wormhole = {\n\t\t\t\t\t\t\t\"type\": type,\n\t\t\t\t\t\t\t\"parent\": parent,\n\t\t\t\t\t\t\t\"life\": form.wormholeLife,\n\t\t\t\t\t\t\t\"mass\": form.wormholeMass\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (sigDialogVM.mode == \"update\") {\n\t\t\t\t\t\t\tsignature.id = $(\"#dialog-signature\").data(\"signatureid\");\n\t\t\t\t\t\t\tsignature2.id = $(\"#dialog-signature\").data(\"signature2id\");\n\t\t\t\t\t\t\twormhole.id = $(\"#dialog-signature\").data(\"wormholeid\");\n\n\t\t\t\t\t\t\t// Update the initial and type based on which side of the wormhole we are editing\n\t\t\t\t\t\t\tif (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\t\tif (form.wormholeType.length > 0 && $.inArray(form.wormholeType.toUpperCase(), aSigWormholes) != -1 && form.wormholeType.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"initial\" : \"secondary\";\n\t\t\t\t\t\t\t\t\twormhole.type = form.wormholeType.toUpperCase();\n\t\t\t\t\t\t\t\t} else if (form.wormholeType2.length > 0 && $.inArray(form.wormholeType2.toUpperCase(), aSigWormholes) != -1 && form.wormholeType2.toUpperCase() != \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"secondary\" : \"initial\";\n\t\t\t\t\t\t\t\t\twormhole.type = form.wormholeType2.toUpperCase();\n\t\t\t\t\t\t\t\t} else if (form.wormholeType.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"secondary\" : \"initial\";\n\t\t\t\t\t\t\t\t\twormhole.type = \"????\";\n\t\t\t\t\t\t\t\t} else if (form.wormholeType2.toUpperCase() == \"K162\") {\n\t\t\t\t\t\t\t\t\twormhole.parent = tripwire.client.wormholes[wormhole.id].initialID == signature.id ? \"initial\" : \"secondary\";\n\t\t\t\t\t\t\t\t\twormhole.type = \"????\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"update\": [{\"wormhole\": wormhole, \"signatures\": [signature, signature2]}]}};\n\n\t\t\t\t\t\t\tif (tripwire.client.wormholes[wormhole.id]) {\n\t\t\t\t\t\t\t\t\t//used to be a wormhole\n\t\t\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[signature2.id]]});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"add\": [{\"wormhole\": wormhole, \"signatures\": [signature, signature2]}]}};\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (sigDialogVM.mode == \"update\") {\n\t\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\t\"id\": $(\"#dialog-signature\").data(\"signatureid\"),\n\t\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\t\"type\": form.signatureType,\n\t\t\t\t\t\t\t\t\"name\": form.signatureName,\n\t\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"update\": [signature]}};\n\n\t\t\t\t\t\t\tif (tripwire.client.signatures[signature.id].type == \"wormhole\") {\n\t\t\t\t\t\t\t\t//used to be a wormhole\n\t\t\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\t\t\t\t\t\t\tvar signature2 = signature.id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\t\t\tundo.push({\"wormhole\": tripwire.client.wormholes[wormhole.id], \"signatures\": [tripwire.client.signatures[signature.id], tripwire.client.signatures[signature2.id]]});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// used to be just a regular signature\n\t\t\t\t\t\t\t\tundo.push(tripwire.client.signatures[signature.id]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar signature = {\n\t\t\t\t\t\t\t\t\"signatureID\": form.signatureID_Alpha + form.signatureID_Numeric,\n\t\t\t\t\t\t\t\t\"systemID\": sigDialogVM.viewingSystemID,\n\t\t\t\t\t\t\t\t\"type\": form.signatureType,\n\t\t\t\t\t\t\t\t\"name\": form.signatureName,\n\t\t\t\t\t\t\t\t\"lifeLength\": form.signatureLength\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpayload = {\"signatures\": {\"add\": [signature]}};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").button(\"disable\");\n\n\t\t\t\t\tvar success = function(data) {\n\t\t\t\t\t\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\t\t\t\t\t\t$(\"#dialog-signature\").dialog(\"close\");\n\n\t\t\t\t\t\t\t$(\"#undo\").removeClass(\"disabled\");\n\n\t\t\t\t\t\t\tif (sigDialogVM.mode == \"add\") {\n\t\t\t\t\t\t\t\tundo = data.results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (sigDialogVM.viewingSystemID in tripwire.signatures.undo) {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[sigDialogVM.viewingSystemID].push({action: sigDialogVM.mode, signatures: undo});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttripwire.signatures.undo[sigDialogVM.viewingSystemID] = [{action: sigDialogVM.mode, signatures: undo}];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar always = function() {\n\t\t\t\t\t\t$(\"#sigEditForm input[type=submit]\").removeAttr(\"disabled\");\n\t\t\t\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").button(\"enable\");\n\t\t\t\t\t}\n\n\t\t\t\t\ttripwire.refresh('refresh', payload, success, always);\n\t\t\t\t});\n\t\t\t},\n\t\t\topen: function() {\n\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", \"\");\n\n\t\t\t\t$(\"#dialog-signature input\").val(\"\");\n\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(\"unknown\").selectmenu(\"refresh\");\n\n\t\t\t\t$(\"#dialog-signature [name='wormholeLife']\").val(\"stable\").selectmenu(\"refresh\");\n\t\t\t\t$(\"#dialog-signature [name='wormholeMass']\").val(\"stable\").selectmenu(\"refresh\");\n\n\t\t\t\t$(\"#dialog-signature #site\").show();\n\t\t\t\t$(\"#dialog-signature #wormhole\").hide();\n\n\t\t\t\t// Side labels\n\t\t\t\t$(\"#dialog-signature .sideLabel:first\").html(sigDialogVM.viewingSystem.name + \" Side\");\n\t\t\t\t$(\"#dialog-signature .sideLabel:last\").html(\"Other Side\");\n\n\t\t\t\t// Default signature life\n\t\t\t\t$(\"#dialog-signature #durationPicker\").val(options.signatures.pasteLife * 60 * 60).change();\n\n\t\t\t\tvar id = sigDialogVM.sigId;\n\t\t\t\tif (sigDialogVM.mode == \"update\" && id && tripwire.client.signatures[id]) {\n\t\t\t\t\tvar signature = tripwire.client.signatures[id];\n\t\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", id);\n\n\t\t\t\t\t// Change the dialog buttons\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Add')\").hide();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Save')\").show();\n\n\t\t\t\t\t// Change the dialog title\n\t\t\t\t\t$(\"#dialog-signature\").dialog(\"option\", \"title\", \"Edit Signature\");\n\n\t\t\t\t\tif (signature.type == \"wormhole\") {\n\t\t\t\t\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == id || wormhole.secondaryID == id) return wormhole; })[0];\n\t\t\t\t\t\tvar otherSignature = id == wormhole.initialID ? tripwire.client.signatures[wormhole.secondaryID] : tripwire.client.signatures[wormhole.initialID];\n\t\t\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", otherSignature.id);\n\t\t\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", wormhole.id);\n\t\t\t\t\t\t\n\t\t\t\t\t\tconst sigAlpha = signature.signatureID ? signature.signatureID.substr(0, 3) : \"???\";\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").val(sigAlpha);\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Numeric']\").val(signature.signatureID ? signature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(signature.type).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeName']\").val(signature.name);\n\t\t\t\t\t\t$(\"#dialog-signature [name='leadsTo']\").val(tripwire.systems[otherSignature.systemID] ? tripwire.systems[otherSignature.systemID].name : (tripwire.aSigSystems[otherSignature.systemID] ? tripwire.aSigSystems[otherSignature.systemID] : \"\"));\n\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID2_Alpha']\").val(otherSignature.signatureID ? otherSignature.signatureID.substr(0, 3) : \"???\");\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID2_Numeric']\").val(otherSignature.signatureID ? otherSignature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeName2']\").val(otherSignature.name);\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeLife']\").val(wormhole.life).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='wormholeMass']\").val(wormhole.mass).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\n\t\t\t\t\t\tif (wormhole[wormhole.parent+\"ID\"] == signature.id) {\n\t\t\t\t\t\t\t$(\"#dialog-signature input[name='wormholeType']\").val(wormhole.type).change();\n\t\t\t\t\t\t} else if (wormhole[wormhole.parent+\"ID\"] == otherSignature.id) {\n\t\t\t\t\t\t\t$(\"#dialog-signature input[name='wormholeType2']\").val(wormhole.type).change();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(signature.lifeLength).change();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Focus the sig ID, if it isn't set, otherwise the sig name\n\t\t\t\t\t\tif(sigAlpha != '???') { $(\"#dialog-signature input[name='wormholeName']\").select(); }\n\t\t\t\t\t\telse { $(\"#dialog-signature input[name='signatureID_Alpha']\").select(); }\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").val(signature.signatureID ? signature.signatureID.substr(0, 3) : \"???\");\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Numeric']\").val(signature.signatureID ? signature.signatureID.substr(3, 5) : \"\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(signature.type).selectmenu(\"refresh\").trigger(\"selectmenuchange\");\n\t\t\t\t\t\t$(\"#dialog-signature [name='signatureName']\").val(signature.name);\n\t\t\t\t\t\t$(\"#dialog-signature #durationPicker\").val(signature.lifeLength).change();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Not a wormhole - always focus the sig ID\n\t\t\t\t\t\t$(\"#dialog-signature input[name='signatureID_Alpha']\").select();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Hightlight first ID section, if not set, otherwise the name\n\t\t\t\t} else {\n\t\t\t\t\t// Change the dialog buttons\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Add')\").show();\n\t\t\t\t\t$(\"#dialog-signature\").parent().find(\"button:contains('Save')\").hide();\n\n\t\t\t\t\t// Change the dialog title\n\t\t\t\t\t$(\"#dialog-signature\").dialog(\"option\", \"title\", \"Add Signature\");\n\n\t\t\t\t\t$(\"#dialog-signature [name='signatureType']\").val(options.signatures.editType || \"unknown\").selectmenu(\"refresh\")\n\t\t\t\t\tif ($(\"#dialog-signature [name='signatureType']\").val() === \"wormhole\") {\n\t\t\t\t\t\t$(\"#dialog-signature #site\").hide();\n\t\t\t\t\t\t$(\"#dialog-signature #wormhole\").show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclose: function() {\n\t\t\t\tValidationTooltips.close();\n\t\t\t\t$(\"#sigTable tr.selected\").removeClass(\"selected\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signatureid\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"signature2id\", \"\");\n\t\t\t\t$(\"#dialog-signature\").data(\"wormholeid\", \"\");\n\t\t\t}\n\t\t});\n\t} else if (!$(\"#dialog-signature\").dialog(\"isOpen\")) {\n\t\t$(\"#dialog-signature\").dialog(\"open\");\n\t}\n};\n\n$(\"#sigTable tbody\").on(\"dblclick\", \"tr\", {mode: \"update\", source:\"sig-row\"}, sigDialog.openSignatureDialog);\n$(\"#edit-signature\").on(\"click\", {mode: \"update\", source:\"edit-sig\"}, sigDialog.openSignatureDialog);\n$(\"#add-signature\").click({mode: \"add\"}, sigDialog.openSignatureDialog);\n\n// Signature overwrite. Attached to document because the element gets recreated each time\nsigDialog.overwriteSignature = function(sigToRemove, completeFunction, always) {\n\tvar payload = {\"signatures\": {\"remove\": []}, \"systemID\": viewingSystemID};\n\tvar undo = [];\n\n\tvar signature = tripwire.client.signatures[sigToRemove];\n\tif (signature.type != \"wormhole\") {\n\t\tundo.push(signature);\n\t\tpayload.signatures.remove.push(signature.id);\n\t} else {\n\t\tvar wormhole = $.map(tripwire.client.wormholes, function(wormhole) { if (wormhole.initialID == signature.id || wormhole.secondaryID == signature.id) return wormhole; })[0];\n\t\tundo.push({\"wormhole\": wormhole, \"signatures\": [tripwire.client.signatures[wormhole.initialID], tripwire.client.signatures[wormhole.secondaryID]]});\n\t\tpayload.signatures.remove.push(wormhole);\n\t}\n\n\tvar success = function(data) {\n\t\t$(\"#undo\").removeClass(\"disabled\");\n\t\tif (viewingSystemID in tripwire.signatures.undo) {\n\t\t\ttripwire.signatures.undo[viewingSystemID].push({action: \"remove\", signatures: undo});\n\t\t} else {\n\t\t\ttripwire.signatures.undo[viewingSystemID] = [{action: \"remove\", signatures: undo}];\n\t\t}\n\n\t\tsessionStorage.setItem(\"tripwire_undo\", JSON.stringify(tripwire.signatures.undo));\n\t\t\n\t\tcompleteFunction(data);\n\t}\n\n\ttripwire.refresh('refresh', payload, success, always);\n}\n\n/** Delegate the next action after sig overwrite to the save dialog */\nsigDialog.delegateSave = function(data) {\n\tif (data.resultSet && data.resultSet[0].result == true) {\n\t\tValidationTooltips.close();\n\n\t\tif ($(\"#dialog-signature\").parent().find(\":button:contains('Save')\")) {\n\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Save')\").click();\n\t\t} else {\n\t\t\t$(\"#dialog-signature\").parent().find(\":button:contains('Add')\").click();\n\t\t}\n\t}\n}\n\n$(document).on(\"click\", \"#overwrite\", function() { \n\t$(\"#overwrite\").attr(\"disable\", true);\n\tsigDialog.overwriteSignature($(this).data(\"id\"), sigDialog.delegateSave, function() {\n\t\t$(\"#overwrite\").removeAttr(\"disable\");\n\t}); \n});\n"]}