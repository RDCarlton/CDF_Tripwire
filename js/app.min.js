var activity=new function(){this.graph,this.options,this.view,this.span=24,this.columns=[{id:"time",label:"Time",role:"domain",type:"string",calc:function(t,i){return t.getValue(i,0)+"h"}},{id:"jumps",label:"Jumps",role:"data",type:"number",sourceColumn:1,column:1,title:"Jumps"},{id:"podkills",label:"Pod Kills",role:"data",type:"number",sourceColumn:2,column:2,title:"Pod Kills"},{id:"shipkills",label:"Ship Kills",role:"data",type:"number",sourceColumn:3,column:3,title:"Ship Kills"},{id:"npckills",label:"NPC Kills",role:"data",type:"number",sourceColumn:4,column:4,title:"NPC Kills"}],this.getData=function(t,i){var t=void 0!==t?t:this.span,i=void 0===i||i,e=$.ajax({url:"activity_graph.php",data:{systemID:viewingSystemID,time:t},type:"GET",dataType:"JSON",async:!1,cache:i}).responseJSON;return e.rows.reverse(),this.view=new google.visualization.DataView(new google.visualization.DataTable(e)),this.view.setColumns(this.columns),this.view},this.selectHandler=function(){var t=activity.graph.getSelection();if(t[0]&&null==t[0].row){var i=t[0].column;activity.columns[i].sourceColumn?(activity.columns[i].label=activity.columns[i].title+" (off)",delete activity.columns[i].sourceColumn):(activity.columns[i].sourceColumn=activity.columns[i].column,activity.columns[i].label=activity.columns[i].title),activity.view.setColumns(activity.columns),activity.options.animation.duration=0,activity.graph.draw(activity.view,activity.options),activity.options.animation.duration=500}},this.init=function(){this.graph=new google.visualization.AreaChart(document.getElementById("activityGraph")),this.options={isStacked:!1,backgroundColor:"transparent",hAxis:{textStyle:{color:"#999",fontName:"Verdana",fontSize:10},showTextEvery:3},vAxis:{textStyle:{color:"#666",fontName:"Verdana",fontSize:10},viewWindowMode:"maximized",viewWindow:{min:0},maxValue:5},gridlineColor:"#454545",pointSize:2,lineWidth:1,chartArea:{left:"10%",top:"5%",width:"88%",height:"85%"},legend:{position:"in",textStyle:{color:"#CCC",fontName:"Verdana",fontSize:8.5}},animation:{duration:500,easing:"inAndout"},tooltip:{showColorCode:!0},annotations:{style:"line",textStyle:{fontSize:12,color:"#ccc"},domain:0},focusTarget:"category"},google.visualization.events.addListener(this.graph,"select",this.selectHandler),this.graph.draw(this.getData(this.span),this.options)},this.time=function(t){switch(t){case 24:this.options.hAxis.showTextEvery=3;break;case 48:this.options.hAxis.showTextEvery=6;break;case 168:this.options.hAxis.showTextEvery=24}this.span=t,this.graph.draw(this.getData(t),this.options)},this.redraw=function(){this.graph.draw(this.view,this.options)},this.refresh=function(t){this.graph.draw(this.getData(this.span,t),this.options)},google.setOnLoadCallback(this.init())};
var chain=new function(){this.map,this.view,this.options,this.drawing,this.data={},this.newView=function(i){return this.view=new google.visualization.DataView(new google.visualization.DataTable(i)),this.view},this.activity=function(i){$("#chainMap .nodeActivity > span:not(.invisible)").addClass("invisible");for(var s in i){var e=i[s].systemID,t=i[s].shipJumps,a=i[s].podKills,n=i[s].shipKills,l=i[s].npcKills,r=$("#chainMap [data-nodeid="+e+"] > .nodeActivity");t>0&&r.find(".jumps").removeClass("invisible").attr("title",t+" Jumps"),a>0&&r.find(".pods").removeClass("invisible").attr("title",a+" Pod Kills"),n>0&&r.find(".ships").removeClass("invisible").attr("title",n+" Ship Kills"),l>0&&r.find(".npcs").removeClass("invisible").attr("title",l+" NPC Kills")}return $("#chainMap .nodeActivity > span[title]").jBox("Tooltip",{position:{y:"bottom"}}),i},this.occupied=function(i){$("#chainMap [data-icon='user'], #chainMap [data-icon='user'] + .badge").addClass("invisible");for(var s in i)$("#chainMap [data-nodeid='"+i[s].systemID+"'] [data-icon='user']").removeClass("invisible"),$("#chainMap [data-nodeid='"+i[s].systemID+"'] [data-icon='user'] + .badge").removeClass("invisible").html(i[s].count);return OccupiedToolTips.attach($("#chainMap [data-icon='user']:not(.invisible)")),i},this.flares=function(i){if($("#chainMap td.node").removeClass("redNode yellowNode greenNode"),$("#chainGrid tr").removeClass("red yellow green"),i)for(var s in i.flares){var e=i.flares[s].systemID,t=i.flares[s].flare,a=($("#chainMap [data-nodeid="+e+"]").parent().addClass(t+"Node").parent().index()-1)/3*2;a>0&&$("#chainGrid tr:eq("+a+")").addClass(t).next().addClass(t)}return i},this.grid=function(){if(0==options.chain.gridlines)return $("#chainGrid tr").addClass("hidden"),!1;$("#chainGrid tr").removeClass("hidden");var i=2*$(".google-visualization-orgchart-table tr:has(.node)").length-1;$("#chainGrid tr:gt("+i+")").addClass("hidden")},this.lines=function(i){for(var s in i.lines)!function(s,e,t,a){var n=$("#chainMap #node"+s).parent();if(0==n.length)return!1;var l=Math.ceil((n[0].cellIndex+1)/2-1),r=$(n.parent().prev().children("td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright")[l]).addClass("left-"+t+" right-"+t),c=$("#chainMap #node"+e).parent();if(0==c.length||0==r.length)return!1;var d=0,o=r[0].cellIndex;n.parent().prev().find("td").each(function(i){if(d+=this.colSpan,i==o)return!1});for(var h=Math.ceil((c[0].cellIndex+1)/2-1),p=h,m=0;m<=h;m++){var y=0;n.parent().prev().prev().prev().find("td > [data-nodeid]").each(function(i){if(i==m)return y=$(this).attr("id").replace("node",""),!1}),$.map(i.map.rows,function(i){return i.c[1].v==y?i:null}).length<=0&&p--}h=p;var v=$(n.parent().prev().prev().children("td.google-visualization-orgchart-lineleft, td.google-visualization-orgchart-lineright")[h]).addClass("left-"+t+" right-"+t),f=0,e=!1,u=!1;n.parent().prev().prev().find("td").each(function(i,s){if(f+=this.colSpan,u&&e)return!1;if(void 0!==v[0]&&v[0].cellIndex==i){if(e=!0,$(this).addClass("left-"+t),u||f==d||$(this).addClass("bottom-"+t),d==f)return!1}else if(f==d)u=!0,$(this).addClass("bottom-"+t);else if(u||e){var a=0,l=!1,r=!1;if(n.parent().prev().find("td").each(function(i){if((a+=this.colSpan)==f&&($(this).hasClass("google-visualization-orgchart-lineleft")||$(this).hasClass("google-visualization-orgchart-lineright"))){if(0==e)return l=!0,v.removeClass("left-"+t+" right-"+t),!1;1==e&&(v.removeClass("left-"+t+" right-"+t),n.parent().prev().prev().find("td").each(function(i){i>=v[0].cellIndex&&$(this).removeClass("bottom-"+t)}),r=!0)}}),l)return!1;r||$(this).addClass("bottom-"+t)}})}(i.lines[s][0],i.lines[s][1],i.lines[s][2],i.lines[s][3])},this.nodes=function(i){function s(i,s){if(!i||!tripwire.systems[i])return!1;var e;tripwire.systems[i].class?e="<span class='wh'>C"+tripwire.systems[i].class+"</span>":tripwire.systems[i].security>=.45?e="<span class='hisec'>HS</span>":tripwire.systems[i].security>0?e="<span class='lowsec'>LS</span>":tripwire.systems[i].security<=0&&(e="<span class='nullsec'>NS</span>");var t=null,a=null;if(tripwire.systems[i].class){switch(tripwire.systems[i].effect){case"Black Hole":t="blackhole";break;case"Cataclysmic Variable":t="cataclysmic-variable";break;case"Magnetar":t="magnetar";break;case"Pulsar":t="pulsar";break;case"Red Giant":t="red-giant";break;case"Wolf-Rayet Star":t="wolf-rayet"}a=tripwire.systems[i].effect}var n={v:s},l="<div id='node"+s+"' data-nodeid='"+i+"'><div class='nodeIcons'><div style='float: left;'><i class='whEffect' "+(t?"data-icon='"+t+"' data-tooltip='"+a+"'":null)+"></i></div><div style='float: right;'><i data-icon='user' class='invisible'></i><span class='badge' class='invisible'></span></div></div><h4 class='nodeClass'>"+e+"</h4><h4 class='nodeSystem'><a href='.?system="+tripwire.systems[i].name+"'>"+(options.chain.tabs[options.chain.active]&&0!=options.chain.tabs[options.chain.active].systemID?options.chain.tabs[options.chain.active].name:tripwire.systems[i].name)+"</a></h4><h4 class='nodeType'>&nbsp;</h4><div class='nodeActivity'><span class='jumps invisible'>&#9679;</span>&nbsp;<span class='pods invisible'>&#9679;</span>&nbsp;&nbsp;<span class='ships invisible'>&#9679;</span>&nbsp;<span class='npcs invisible'>&#9679;</span></div></div>";return n.f=l,n}function e(i){if(i[0]<=0)return!1;var s=parseInt(i[1]),e=r.length;for(var t in c){var a=c[t];if(-1==$.inArray(a.id,o))if(a.systemID==i[0]){if((n={}).id=a.id,n.life=a.life,n.mass=a.mass,n.time=a.time,n.parent={},n.parent.id=s,n.parent.systemID=a.systemID,n.parent.name=a.system,n.parent.type=a.sig2Type,n.parent.typeBM=a.type2BM,n.parent.classBM=a.class2BM,n.parent.nth=a.nth2,n.parent.signatureID=a.sig2ID,n.child={},n.child.id=++e,n.child.systemID=a.connectionID,n.child.name=a.connection,n.child.type=a.type,n.child.typeBM=a.typeBM,n.child.classBM=a.classBM,n.child.nth=a.nth,n.child.signatureID=a.signatureID,d.push(n),r.push([n.child.systemID,n.child.id,i[2]]),o.push(n.id),$("#show-viewing").hasClass("active")&&tripwire.systems[n.child.systemID]&&!tripwire.systems[viewingSystemID].class&&!tripwire.systems[n.child.systemID].class){l=guidance.findShortestPath(tripwire.map.shortest,[viewingSystemID-3e7,n.child.systemID-3e7]).length-1;(h={}).life="Gate",h.parent={},h.parent.id=n.child.id,h.parent.systemID=n.child.systemID,h.parent.name=n.child.name,h.parent.type=n.child.type,h.parent.nth=n.child.nth,h.child={},h.child.id=++e,h.child.systemID=viewingSystemID,h.child.name=tripwire.systems[viewingSystemID].name,h.child.type=l,h.child.nth=null,h.child.signatureID=l,d.push(h),r.push([0,e])}if($("#show-favorite").hasClass("active")&&tripwire.systems[n.child.systemID])for(t in options.favorites)if(!(tripwire.systems[options.favorites[t]].regionID>=11e6||tripwire.systems[n.child.systemID].regionID>=11e6)){l=guidance.findShortestPath(tripwire.map.shortest,[options.favorites[t]-3e7,n.child.systemID-3e7]).length-1;(h={}).life="Gate",h.parent={},h.parent.id=n.child.id,h.parent.systemID=n.child.systemID,h.parent.name=n.child.name,h.parent.type=n.child.type,h.parent.nth=n.child.nth,h.child={},h.child.id=++e,h.child.systemID=options.favorites[t],h.child.name=tripwire.systems[options.favorites[t]].name,h.child.type=l,h.child.nth=null,h.child.signatureID=l,d.push(h),r.push([0,e])}}else if(a.connectionID==i[0]){var n={};if(n.id=a.id,n.life=a.life,n.mass=a.mass,n.time=a.time,n.parent={},n.parent.id=s,n.parent.systemID=a.connectionID,n.parent.name=a.connection,n.parent.type=a.type,n.parent.typeBM=a.typeBM,n.parent.classBM=a.classBM,n.parent.nth=a.nth,n.parent.signatureID=a.signatureID,n.child={},n.child.id=++e,n.child.systemID=a.systemID,n.child.name=a.system,n.child.type=a.sig2Type,n.child.typeBM=a.type2BM,n.child.classBM=a.class2BM,n.child.nth=a.nth2,n.child.signatureID=a.sig2ID,d.push(n),r.push([n.child.systemID,n.child.id,i[2]]),o.push(n.id),$("#show-viewing").hasClass("active")&&tripwire.systems[n.child.systemID]&&!tripwire.systems[viewingSystemID].class&&!tripwire.systems[n.child.systemID].class){l=guidance.findShortestPath(tripwire.map.shortest,[viewingSystemID-3e7,n.child.systemID-3e7]).length-1;(h={}).life="Gate",h.parent={},h.parent.id=n.child.id,h.parent.systemID=n.child.systemID,h.parent.name=n.child.name,h.parent.type=n.child.type,h.parent.nth=n.child.nth,h.child={},h.child.id=++e,h.child.systemID=viewingSystemID,h.child.name=tripwire.systems[viewingSystemID].name,h.child.type=l,h.child.nth=null,h.child.signatureID=l,d.push(h),r.push([0,e])}if($("#show-favorite").hasClass("active")&&tripwire.systems[n.child.systemID])for(t in options.favorites)if(!(tripwire.systems[options.favorites[t]].regionID>=11e6||tripwire.systems[n.child.systemID].regionID>=11e6)){var l=guidance.findShortestPath(tripwire.map.shortest,[options.favorites[t]-3e7,n.child.systemID-3e7]).length-1,h={};h.life="Gate",h.parent={},h.parent.id=n.child.id,h.parent.systemID=n.child.systemID,h.parent.name=n.child.name,h.parent.type=n.child.type,h.parent.nth=n.child.nth,h.child={},h.child.id=++e,h.child.systemID=options.favorites[t],h.child.name=tripwire.systems[options.favorites[t]].name,h.child.type=l,h.child.nth=null,h.child.signatureID=l,d.push(h),r.push([0,e])}}}}var t={cols:[{label:"System",type:"string"},{label:"Parent",type:"string"}],rows:[]},a=["Q003","E004","L005","Z006","M001","C008","G008","A009"],n=[];if($("#chainTabs .current").length>0){var l=$("#chainTabs .current .name").data("tab").toString().split(","),r=[],c=i,d=[],o=[];if(0==l){y=0;for(var h in i)void 0===tripwire.systems[i[h].systemID].class?(y++,t.rows.push({c:[s(i[h].systemID,y),{v:null}]}),r.push([i[h].systemID,y,i[h].systemID])):tripwire.systems[i[h].connectionID]&&void 0===tripwire.systems[i[h].connectionID].class&&(y++,t.rows.push({c:[s(i[h].connectionID,y),{v:null}]}),r.push([i[h].connectionID,y,i[h].connectionID]))}else for(var h in l)t.rows.push({c:[s(l[h],parseInt(h)+1),{v:null}]}),r.push([l[h],parseInt(h)+1,l[h]]);for(y=0;y<r.length;y++)e(r[y])}else{$("#chainError").hide();var p={c:[]},m=viewingSystemID;p.c.push(s(m,1),{v:null}),t.rows.push(p);for(var r=[[m,1]],c=i,d=[],o=[],y=0;y<r.length;++y)e(r[y])}for(var h in d){var v,f=d[h],p={c:[]},u=tripwire.systems[f.child.systemID]?tripwire.systems[f.child.systemID].class:null,w=tripwire.systems[f.child.systemID]?tripwire.systems[f.child.systemID].security:null;v=6==u||"Class-6"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 6"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C6</span>":5==u||"Class-5"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 5"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C5</span>":4==u||"Class-4"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 4"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C4</span>":3==u||"Class-3"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 3"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C3</span>":2==u||"Class-2"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 2"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C2</span>":1==u||"Class-1"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Class 1"==tripwire.wormholes[f.child.type].leadsTo?"<span class='wh'>C1</span>":u>6?"<span class='wh'>C"+u+"</span>":void 0!==tripwire.wormholes[f.child.type]&&tripwire.wormholes[f.child.type].leadsTo.split(" ").length>1?"<span class='wh'>C"+tripwire.wormholes[f.child.type].leadsTo.split(" ")[1]+"</span>":w>=.45||"High-Sec"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"High-Sec"==tripwire.wormholes[f.child.type].leadsTo&&!w?"<span class='hisec'>HS</span>":w>0||"Low-Sec"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Low-Sec"==tripwire.wormholes[f.child.type].leadsTo&&!w?"<span class='lowsec'>LS</span>":w<=0&&null!=w||"Null-Sec"==f.child.name||void 0!==tripwire.wormholes[f.child.type]&&"Null-Sec"==tripwire.wormholes[f.child.type].leadsTo?"<span class='nullsec'>NS</span>":"<span>&nbsp;</span>";var g=null,I=null;if(void 0!==tripwire.systems[f.child.systemID]){switch(tripwire.systems[f.child.systemID].effect){case"Black Hole":g="blackhole";break;case"Cataclysmic Variable":g="cataclysmic-variable";break;case"Magnetar":g="magnetar";break;case"Pulsar":g="pulsar";break;case"Red Giant":g="red-giant";break;case"Wolf-Rayet Star":g="wolf-rayet";break;default:g=null}I=tripwire.systems[f.child.systemID].effect}var D={v:f.child.id},b="<div id='node"+f.child.id+"' data-nodeid='"+f.child.systemID+"' data-sigid='"+f.id+"'><div class='nodeIcons'><div style='float: left;'><i class='whEffect' "+(g?"data-icon='"+g+"' data-tooltip='"+I+"'":null)+"></i></div><div style='float: right;'><i data-icon='user' class='invisible'></i><span class='badge' class='invisible'></span></div></div><h4 class='nodeClass'>"+(v+sigFormat(f.child.classBM,"class"))+"</h4><h4 class='nodeSystem'>"+(tripwire.systems[f.child.systemID]?"<a href='.?system="+tripwire.systems[f.child.systemID].name+"'>"+(f.child.name?f.child.name:tripwire.systems[f.child.systemID].name)+"</a>":"<a class='invisible'>system</a>")+"</h4><h4 class='nodeType'>"+("id"==options.chain["node-reference"]?f.child.signatureID:f.child.type+sigFormat(f.child.typeBM,"type")||"&nbsp;")+"</h4><div class='nodeActivity'><span class='jumps invisible'>&#9679;</span>&nbsp;<span class='pods invisible'>&#9679;</span>&nbsp;&nbsp;<span class='ships invisible'>&#9679;</span>&nbsp;<span class='npcs invisible'>&#9679;</span></div></div>";D.f=b;var C={v:f.parent.id};p.c.push(D,C),t.rows.push(p),"Critical"!=f.life||-1==$.inArray(f.parent.type,a)&&-1==$.inArray(f.child.type,a)?"Critical"==f.life&&"Critical"==f.mass?n.push(Array(D.v,C.v,"eol-critical",f.id)):"Critical"==f.life&&"Destab"==f.mass?n.push(Array(D.v,C.v,"eol-destab",f.id)):-1!=$.inArray(f.parent.type,a)||-1!=$.inArray(f.child.type,a)?n.push(Array(D.v,C.v,"frig",f.id)):"Critical"==f.life?n.push(Array(D.v,C.v,"eol",f.id)):"Critical"==f.mass?n.push(Array(D.v,C.v,"critical",f.id)):"Destab"==f.mass?n.push(Array(D.v,C.v,"destab",f.id)):"Gate"!=f.life&&"GATE"!=f.parent.type&&"GATE"!=f.child.type||n.push(Array(D.v,C.v,"gate",f.id)):n.push(Array(D.v,C.v,"eol-frig",f.id))}return n.reverse(),{map:t,lines:n}},this.redraw=function(){var i=$.extend(!0,{},this.data);i.map=$.extend(!0,{},i.rawMap),this.draw(i)},this.draw=function(i){if((i=void 0!==i?i:{}).map){if(this.drawing=!0,this.data.rawMap=$.extend(!0,{},i.map),(null==options.chain.active||options.chain.tabs[options.chain.active]&&0==options.chain.tabs[options.chain.active].evescout)&&"273.0"!=options.masks.active)for(var s in i.map)"273.0"==i.map[s].mask&&delete i.map[s];if(Object.sort(i.map,"id"),$.extend(i,this.nodes(i.map)),$.extend(this.data,i),this.map.draw(this.newView(i.map),this.options),options.chain.tabs[options.chain.active])for(var e in options.chain.tabs[options.chain.active].collapsed){var t=$("#chainMap [data-nodeid='"+options.chain.tabs[options.chain.active].collapsed[e]+"']").attr("id");t&&(t=t.split("node")[1],this.map.collapse(t-1,!0))}this.lines(i),this.grid(),$("#chainMap [data-nodeid='"+viewingSystemID+"']").parent().addClass("currentNode"),WormholeTypeToolTips.attach($("#chainMap .whEffect")),this.drawing=!1}i.activity&&(this.data.activity=this.activity(i.activity)),i.occupied&&(this.data.occupied=this.occupied(i.occupied)),i.flares&&(this.data.flares=this.flares(i.flares)),i.last_modified&&(this.data.last_modified=i.last_modified)},this.collapse=function(i){if(chain.drawing)return!1;var s=chain.map.getCollapsedNodes();options.chain.tabs[options.chain.active].collapsed=[];for(x in s){var e=$("#chainMap #node"+(s[x]+1)).data("nodeid");options.chain.tabs[options.chain.active].collapsed.push(e)}chain.lines(chain.data),$("#chainMap [data-nodeid='"+viewingSystemID+"']").parent().addClass("currentNode"),WormholeTypeToolTips.attach($("#chainMap .whEffect")),chain.activity(chain.data.activity),chain.occupied(chain.data.occupied),chain.flares(chain.data.flares),chain.grid(),options.save()},this.init=function(){this.map=new google.visualization.OrgChart(document.getElementById("chainMap")),this.options={allowHtml:!0,allowCollapse:!0,size:"medium",nodeClass:"node"},google.visualization.events.addListener(this.map,"collapse",this.collapse),this.map.draw(new google.visualization.DataView(new google.visualization.DataTable({cols:[{label:"System",type:"string"},{label:"Parent",type:"string"}]})),this.options)},this.init()};
var CKConfig={skin:"custom",height:100,allowedContent:!0,extraPlugins:"toolbarswitch,autogrow,autolink",enterMode:CKEDITOR.ENTER_BR,removeDialogTabs:"link:advanced",autoGrow_onStartup:!0,autoGrow_minHeight:100,toolbar_minToolbar:[{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"paragraph",items:["BulletedList","Outdent","Indent"]},{name:"links",items:["Link"]},{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["FontSize"]},{name:"tools",items:["Toolbarswitch"]}],toolbar_maxToolbar:[{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript"]},{name:"paragraph",items:["NumberedList","BulletedList","Outdent","Indent"]},{name:"links",items:["Link"]},{name:"colors",items:["TextColor","BGColor"]},{name:"styles",items:["FontSize","Font"]},{name:"tools",items:["Source","Toolbarswitch"]}],toolbar:"minToolbar",smallToolbar:"minToolbar",maximizedToolbar:"maxToolbar",fontSize_style:{element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]}};CKEDITOR.on("instanceLoaded",function(e){e.editor.on("contentDom",function(){e.editor.on("key",function(t){return 27==t.data.keyCode?($(e.editor.element.$).closest(".comment").find(".commentCancel").click(),!1):t.data.domEvent.$.altKey&&83==t.data.domEvent.$.keyCode?($(e.editor.element.$).closest(".comment").find(".commentSave").click(),!1):void 0})}),$(".cke_combo__font a").removeClass("cke_combo_button").addClass("cke_button cke_button_off").html('<span class="cke_button_icon">&nbsp;</span>'),$(".cke_combo__fontsize a").removeClass("cke_combo_button").addClass("cke_button cke_button_off").html('<span class="cke_button_icon">&nbsp;</span>')}),CKEDITOR.on("instanceReady",function(e){e.editor.focus();var t=e.editor.getSelection(),o=t.getRanges(),n=o[0].startContainer,a=n.getParents(!0);if(!(n=a[a.length-2].getFirst()))return!1;for(;;){var i=n.getNext();if(null==i)break;n=i}t.selectElement(n),(o=t.getRanges())[0].collapse(!1),t.selectRanges(o)}),CKEDITOR.on("dialogDefinition",function(e){"link"==e.data.name&&(e.data.definition.getContents("target").get("linkTargetType").default="_blank")});
$("body").on("dblclick",".comment",function(e){e.preventDefault(),document.getSelection().removeAllRanges(),$(this).find(".commentEdit").click()}),$("body").on("click",".commentEdit",function(e){if(e.preventDefault(),$(".cke").length)return!1;var t=$(this).closest(".comment");t.find(".commentToolbar").hide(),CKEDITOR.replace(t.find(".commentBody").attr("id"),CKConfig).on("instanceReady",function(){t.find(".commentStatus").html(""),t.find(".commentFooter").show(),t.find(".commentFooter .commentControls").show()}),tripwire.activity.editComment=t.data("id"),tripwire.refresh("refresh")}),$("body").on("click",".commentSave, .commentCancel",function(e){e.preventDefault();var t=$(this);if(t.attr("disabled"))return!1;var o=t.closest(".comment");if(t.attr("disabled","true"),t.hasClass("commentSave")){var n={mode:"save",commentID:o.data("id"),systemID:o.find(".commentSticky").hasClass("active")?0:viewingSystemID,comment:CKEDITOR.instances[o.find(".commentBody").attr("id")].getData()};$.ajax({url:"comments.php",type:"POST",data:n,dataType:"JSON"}).done(function(e){e&&1==e.result&&(o.find(".commentModified").html("Edited by "+e.comment.modifiedBy+" at "+e.comment.modifiedDate),o.find(".commentCreated").html("Posted by "+e.comment.createdBy+" at "+e.comment.createdDate),Tooltips.attach(o.find("[data-tooltip]")),CKEDITOR.instances[o.find(".commentBody").attr("id")].destroy(!1),o.attr("data-id",e.comment.id),o.find(".commentToolbar").show(),o.find(".commentFooter").hide(),t.removeAttr("disabled"))})}else CKEDITOR.instances[o.find(".commentBody").attr("id")].destroy(!0),o.attr("data-id")?(o.find(".commentToolbar").show(),o.find(".commentFooter").hide(),t.removeAttr("disabled")):o.remove();o.find(".commentStatus").html(""),delete tripwire.activity.editComment,tripwire.refresh("refresh")}),$("body").on("click",".commentDelete",function(e){e.preventDefault();var t=$(this).closest(".comment");$("#dialog-deleteComment").hasClass("ui-dialog-content")?$("#dialog-deleteComment").dialog("isOpen")||$("#dialog-deleteComment").data("comment",t).dialog("open"):$("#dialog-deleteComment").data("comment",t).dialog({resizable:!1,minHeight:0,position:{my:"center",at:"center",of:$("#notesWidget")},dialogClass:"dialog-noeffect ui-dialog-shadow",buttons:{Delete:function(){$("#dialog-deleteComment").parent().find(":button:contains('Delete')").button("disable");var e=$(this).data("comment"),t={mode:"delete",commentID:e.data("id")};$.ajax({url:"comments.php",type:"POST",data:t,dataType:"JSON"}).done(function(t){t&&1==t.result&&($("#dialog-deleteComment").dialog("close"),e.remove())}).always(function(){$("#dialog-deleteComment").parent().find(":button:contains('Delete')").button("enable")})},Cancel:function(){$(this).dialog("close")}}})}),$("body").on("click","#add-comment",function(e){if(e.preventDefault(),$(".cke").length)return!1;var t=$(".comment:last").clone(),o=$(".comment:visible:last .commentBody").attr("id")?$(".comment:visible:last .commentBody").attr("id").replace("comment","")+1:0;$(".comment:last").before(t),t.find(".commentBody").attr("id","comment"+o),t.removeClass("hidden").find(".commentEdit").click()}),$("body").on("click",".commentSticky",function(e){e.preventDefault();var t=$(this).closest(".comment"),o={mode:"sticky",commentID:t.data("id"),systemID:t.find(".commentSticky").hasClass("active")?viewingSystemID:0};$.ajax({url:"comments.php",type:"POST",data:o,dataType:"JSON"}).done(function(e){e&&1==e.result&&(t.find(".commentSticky").hasClass("active")?t.find(".commentSticky").removeClass("active"):t.find(".commentSticky").addClass("active"))})});
-1!=window.location.href.indexOf("galileo")&&Notify.trigger("This is the test version of Tripwire.<br/>Please use <a href='https://tripwire.cloud-things.com'>Tripwire</a>"),$("body").on("click","a[href^='.?system=']",function(e){e.preventDefault();var i=$(this).attr("href").replace(".?system=",""),t=Object.index(tripwire.systems,"name",i);tripwire.systemChange(t)}),$("body").on("submit","#systemSearch",function(e){e.preventDefault();var i=$(this).find("[name='system']").val(),t=Object.index(tripwire.systems,"name",i)||!1;!1!==t&&(tripwire.systemChange(t),$(this).find("[name='system']").val(""),$("#search").click())}),$("body").on("click","#undo:not(.disabled)",function(){tripwire.undo()}),$("body").on("click","#redo:not(.disabled)",function(){tripwire.redo()}),$(document).keydown(function(e){if((e.metaKey||e.ctrlKey)&&(89==e.keyCode||90==e.keyCode)){if($(document.activeElement).is("textarea, input"))return;e.preventDefault(),89!=e.keyCode||$("#redo").hasClass("disabled")?90!=e.keyCode||$("#undo").hasClass("disabled")||($("#undo").click(),Notify.trigger("Undoing last action")):($("#redo").click(),Notify.trigger("Redoing last undo"))}});
$("#admin").click(function(a){function i(){o&&o.abort(),t.html("Total: "+$("#dialog-admin .window .hasFocus table tr[data-id]").length),o=$.ajax({url:"admin.php",type:"POST",data:{mode:$("#dialog-admin .menu .active").attr("data-window")},dataType:"JSON"}).done(function(a){if(a&&a.results){for(var i=a.results,d=[],o=0,e=i.length;o<e;o++){var n=$("#dialog-admin .window .hasFocus tbody tr[data-id='"+i[o].id+"']");if(d.push(i[o].id),n.length)for(col in i[o])(l=n.find("[data-col='"+col+"']")).html(("number"==l.attr("data-format")?numFormat(i[o][col]):i[o][col])||"&nbsp;");else{(n=$("#dialog-admin .window .hasFocus table tr.hidden").clone()).attr("data-id",i[o].id);for(col in i[o]){var l=n.find("[data-col='"+col+"']");l.html(("number"==l.attr("data-format")?numFormat(i[o][col]):i[o][col])||"&nbsp;")}n.removeClass("hidden"),$("#dialog-admin .window .hasFocus tbody").append(n)}}$("#dialog-admin .window .hasFocus table tr[data-id]").each(function(){-1==$.inArray($(this).data("id").toString(),d)&&$(this).remove()}),$("#dialog-admin .window .hasFocus table").trigger("update",[!0])}else $("#dialog-admin .window .hasFocus table tr[data-id]").remove();t.html("Total: "+$("#dialog-admin .window .hasFocus table tr[data-id]").length)}),$("#dialog-admin").dialog("isOpen")&&$("#dialog-admin .menu .active").attr("data-refresh")&&(d=setTimeout(i,$("#dialog-admin .menu .active").attr("data-refresh")))}if(a.preventDefault(),$(this).hasClass("disabled"))return!1;if($("#dialog-admin").hasClass("ui-dialog-content"))$("#dialog-admin").dialog("isOpen")||$("#dialog-admin").dialog("open");else{var d=null,t=null,o=null;$("#dialog-admin").dialog({autoOpen:!0,modal:!0,height:350,width:800,buttons:{Close:function(){$(this).dialog("close")}},create:function(){$("#dialog-admin").on("click",".menu li",function(a){a.preventDefault(),$menuItem=$(this),clearTimeout(d),$("#dialog-admin .menu .active").removeClass("active"),$menuItem.addClass("active"),$("div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane").html(""),$("#dialog-admin .window [data-window]").removeClass("hasFocus").hide(),$("#dialog-admin .window [data-window='"+$menuItem.data("window")+"']").addClass("hasFocus").show(),i()}),$("#dialog-admin [data-sortable='true']").tablesorter({sortReset:!0,widgets:["saveSort"],sortList:[[0,0]]}),$($(this)[0].parentElement).find(".ui-dialog-buttonpane").append("<div class='ui-dialog-traypane'></div>"),t=$("div.ui-dialog[aria-describedby='dialog-admin'] .ui-dialog-traypane")},open:function(){$menuItem=$("#dialog-admin .menu li.active"),i()},close:function(){clearTimeout(d)}})}});
$(".options").click(function(a){if(a.preventDefault(),$(this).hasClass("disabled"))return!1;$("#dialog-options").dialog({autoOpen:!1,width:450,minHeight:400,modal:!0,buttons:{Save:function(){JSON.stringify(options);var a=!1;$("#dialog-options").parent().find(".ui-dialog-buttonpane button:contains('Save')").attr("disabled",!0).addClass("ui-state-disabled"),options.chain.typeFormat=$("#dialog-options #typeFormat").val(),options.chain.classFormat=$("#dialog-options #classFormat").val(),options.chain.gridlines=JSON.parse($("#dialog-options input[name=gridlines]:checked").val()),options.chain["node-reference"]=$("#dialog-options input[name=node-reference]:checked").val(),options.signatures.pasteLife=$("#dialog-options #pasteLife").val(),options.background=$("#dialog-options #background-image").val(),options.masks.active!=$("#dialog-options input[name='mask']:checked").val()&&(a=!0),options.masks.active=$("#dialog-options input[name='mask']:checked").val(),options.apply(),options.save().done(function(){a&&($("#sigTable span[data-age]").countdown("destroy"),$("#sigTable tbody").empty(),$("#signature-count").html(0),tripwire.signatures.list={},tripwire.client.signatures=[],tripwire.refresh("change"))}),$("#dialog-options").dialog("close"),$("#dialog-options").parent().find(".ui-dialog-buttonpane button:contains('Save')").attr("disabled",!1).removeClass("ui-state-disabled"),$("#dialog-options input[name='mask']:checked").data("admin")?$("#admin").removeClass("disabled"):$("#admin").addClass("disabled")},Reset:function(){$("#dialog-confirm #msg").html("Settings will be reset to defaults temporarily.<br/><br/><p><em>Save settings to make changes permanent.</em></p>"),$("#dialog-confirm").dialog("option",{buttons:{Reset:function(){options.reset(),options.apply(),$("#dialog-options").dialog("close"),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).dialog("open")},Close:function(){$(this).dialog("close")}},open:function(){$.ajax({url:"user_stats.php",type:"POST",dataType:"JSON"}).done(function(a){for(stat in a)$("#"+stat).text(a[stat])}),$.ajax({url:"masks.php",type:"POST",dataType:"JSON"}).done(function(a){if(a&&a.masks){$("#dialog-options #masks #default").html(""),$("#dialog-options #masks #personal").html(""),$("#dialog-options #masks #corporate").html("");for(var e in a.masks){var o=a.masks[e],i=$('<input type="radio" name="mask" id="mask'+e+'" value="'+o.mask+'" class="selector" data-owner="'+o.owner+'" data-admin="'+o.admin+'" /><label for="mask'+e+'"><img src="'+o.img+'" />'+(o.optional?'<i class="closeIcon" onclick="return false;" data-icon="red-giant"><i data-icon="times"></i></i>':"")+'<span class="selector_label">'+o.label+"</span></label>");$("#dialog-options #masks #"+o.type).append(i)}i=$('<input type="checkbox" name="find" id="findp" value="personal" class="selector" disabled="disabled" /><label for="findp"><i data-icon="search" style="font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;"></i></label>');if($("#dialog-options #masks #personal").append(i),"1"==init.admin){i=$('<input type="checkbox" name="find" id="findc" value="corporate" class="selector" disabled="disabled" /><label for="findc"><i data-icon="search" style="font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;"></i></label>');$("#dialog-options #masks #corporate").append(i)}$("#dialog-options input[name='mask']").filter("[value='"+a.masks[a.active].mask+"']").attr("checked",!0).trigger("change"),a.masks[a.active].admin?$("#admin").removeClass("disabled"):$("#admin").addClass("disabled")}}),$("#dialog-options #pasteLife").val(options.signatures.pasteLife),$("#dialog-options #typeFormat").val(options.chain.typeFormat),$("#dialog-options #classFormat").val(options.chain.classFormat),$("#dialog-options input[name='node-reference'][value='"+options.chain["node-reference"]+"']").prop("checked",!0),$("#dialog-options input[name='gridlines'][value='"+options.chain.gridlines+"']").prop("checked",!0),$("#dialog-options #background-image").val(options.background)},create:function(){$("#optionsAccordion").accordion({heightStyle:"content",collapsible:!0,active:!1}),$("#dialog-pwChange").dialog({autoOpen:!1,resizable:!1,minHeight:0,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Save:function(){$("#pwForm").submit()},Cancel:function(){$(this).dialog("close")}},close:function(){$("#pwForm input[name='password'], #pwForm input[name='confirm']").val(""),$("#pwError").text("").hide()}}),$("#pwChange").click(function(){$("#dialog-pwChange").dialog("open")}),$("#pwForm").submit(function(a){a.preventDefault(),$("#pwError").text("").hide(),$.ajax({url:"options.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){a&&a.result?($("#dialog-msg #msg").text("Password changed"),$("#dialog-msg").dialog("open"),$("#dialog-pwChange").dialog("close")):a&&a.error?$("#pwError").text(a.error).show("slide",{direction:"up"}):$("#pwError").text("Unknown error").show("slide",{direction:"up"})})}),$("#dialog-usernameChange").dialog({autoOpen:!1,resizable:!1,minHeight:0,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Save:function(){$("#usernameForm").submit()},Cancel:function(){$(this).dialog("close")}},open:function(){$("#usernameForm #username").html($("#dialog-options #username").html())},close:function(){$("#usernameForm [name='username']").val(""),$("#usernameError").text("").hide()}}),$("#usernameChange").click(function(){$("#dialog-usernameChange").dialog("open")}),$("#usernameForm").submit(function(a){a.preventDefault(),$("#usernameError").text("").hide(),$.ajax({url:"options.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){a&&a.result?($("#dialog-msg #msg").text("Username changed"),$("#dialog-msg").dialog("open"),$("#dialog-options #username").html(a.result),$("#dialog-usernameChange").dialog("close")):a&&a.error?$("#usernameError").text(a.error).show("slide",{direction:"up"}):$("#usernameError").text("Unknown error").show("slide",{direction:"up"})})}),$("#masks").on("change","input.selector:checked",function(){$(this).data("owner")?($("#maskControls #edit").removeAttr("disabled"),$("#maskControls #delete").removeAttr("disabled")):($("#maskControls #edit").attr("disabled","disabled"),$("#maskControls #delete").attr("disabled","disabled")),0!=$(this).val()&&0==$(this).val().split(".")[1]?$("#dialog-options #leave").removeAttr("disabled"):$("#dialog-options #leave").attr("disabled","disabled")}),$("#dialog-joinMask").dialog({autoOpen:!1,resizable:!1,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Add:function(){var a=$("#dialog-joinMask #results input:checked"),e=$("#dialog-joinMask #results input:checked+label");$.ajax({url:"masks.php",type:"POST",data:{mask:a.val(),mode:"join"},dataType:"JSON"}).done(function(o){o&&o.result&&(e.css("width",""),e.find(".info").remove(),e.append('<i class="closeIcon" onclick="return false;" data-icon="red-giant"><i data-icon="times"></i></i>'),$("#dialog-options #masks #"+o.type+" input.selector:last").before(a).before(e),$("#dialog-joinMask").dialog("close"))})},Cancel:function(){$(this).dialog("close")}},create:function(){$("#dialog-joinMask form").submit(function(a){a.preventDefault(),$("#dialog-joinMask #results").html(""),$("#dialog-joinMask #loading").show(),$("#dialog-joinMask input[type='submit']").attr("disabled","disabled"),$.ajax({url:"masks.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){if(a&&a.results)for(var e in a.results){var o=a.results[e],i=$('<input type="radio" name="mask" id="mask'+o.mask+'" value="'+o.mask+'" class="selector" data-owner="false" data-admin="'+o.admin+'" /><label for="mask'+o.mask+'" style="width: 100%; margin-left: -5px;">\t<img src="'+o.img+'" />\t<span class="selector_label">'+o.label+'</span>\t<div class="info">\t\t'+(o.characterName?o.characterName+"<br/>":"")+"\t\t"+o.corporationName+"<br/>\t\t"+o.allianceName+"\t</div></label>");$("#dialog-joinMask #results").append(i)}else a&&a.error?($("#dialog-error #msg").text(a.error),$("#dialog-error").dialog("open")):($("#dialog-error #msg").text("Unknown error"),$("#dialog-error").dialog("open"))}).always(function(){$("#dialog-joinMask #loading").hide(),$("#dialog-joinMask input[type='submit']").removeAttr("disabled")})})},close:function(){$("#dialog-joinMask #results").html(""),$("#dialog-joinMask input[name='name']").val("")}}),$("#dialog-options #masks").on("click","input[name='find']+label",function(){$("#dialog-joinMask input[name='find']").val($(this).prev().val()),$("#dialog-joinMask").dialog("open")}),$("#dialog-options #masks").on("click",".closeIcon",function(){var a=$(this).closest("input.selector+label").prev();$("#dialog-confirm #msg").text("Are you sure you want to remove this mask?"),$("#dialog-confirm").dialog("option",{buttons:{Remove:function(){var e={mode:"leave",mask:a.val()};$.ajax({url:"masks.php",type:"POST",data:e,dataType:"JSON"}).done(function(e){e&&e.result?(a.next().remove(),a.remove(),$("#dialog-confirm").dialog("close")):($("#dialog-confirm").dialog("close"),$("#dialog-error #msg").text("Unable to delete"),$("#dialog-error").dialog("open"))})},Cancel:function(){$(this).dialog("close")}}}).dialog("open")}),$("#maskControls #delete").click(function(){var a=$("#masks input.selector:checked");$("#dialog-confirm #msg").text("Are you sure you want to delete this mask?"),$("#dialog-confirm").dialog("option",{buttons:{Delete:function(){var e={mode:"delete",mask:a.val()};$.ajax({url:"masks.php",type:"POST",data:e,dataType:"JSON"}).done(function(e){e&&e.result?(a.next().remove(),a.remove(),$("#dialog-confirm").dialog("close")):($("#dialog-confirm").dialog("close"),$("#dialog-error #msg").text("Unable to delete"),$("#dialog-error").dialog("open"))})},Cancel:function(){$(this).dialog("close")}}}).dialog("open")}),$("#dialog-createMask").dialog({autoOpen:!1,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Create:function(){$("#dialog-createMask form").submit()},Cancel:function(){$(this).dialog("close")}},create:function(){$("#dialog-createMask #accessList").on("click","#create_add+label",function(){$("#dialog-EVEsearch").dialog("open")}),$("#dialog-createMask form").submit(function(a){a.preventDefault(),$.ajax({url:"masks.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){a&&a.result?($.ajax({url:"masks.php",type:"POST",dataType:"JSON"}).done(function(a){if(a&&a.masks){$("#dialog-options #masks #default").html(""),$("#dialog-options #masks #personal").html(""),$("#dialog-options #masks #corporate").html("");for(var e in a.masks){var o=a.masks[e],i=$('<input type="radio" name="mask" id="mask'+e+'" value="'+o.mask+'" class="selector" data-owner="'+o.owner+'" data-admin="'+o.admin+'" /><label for="mask'+e+'"><img src="'+o.img+'" />'+(o.optional?'<i class="closeIcon" onclick="return false;" data-icon="red-giant"><i data-icon="times"></i></i>':"")+'<span class="selector_label">'+o.label+"</span></label>");$("#dialog-options #masks #"+o.type).append(i)}i=$('<input type="checkbox" name="find" id="findp" value="personal" class="selector" disabled="disabled" /><label for="findp"><i data-icon="search" style="font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;"></i></label>');if($("#dialog-options #masks #personal").append(i),"1"==init.admin){i=$('<input type="checkbox" name="find" id="findc" value="corporate" class="selector" disabled="disabled" /><label for="findc"><i data-icon="search" style="font-size: 3em; margin-left: 16px; margin-top: 16px; display: block;"></i></label>');$("#dialog-options #masks #corporate").append(i)}$("#dialog-options input[name='mask']").filter("[value='"+a.masks[a.active].mask+"']").attr("checked",!0).trigger("change"),a.masks[a.active].admin?$("#admin").removeClass("disabled"):$("#admin").addClass("disabled")}}),$("#dialog-createMask").dialog("close")):a&&a.error?($("#dialog-error #msg").text(a.error),$("#dialog-error").dialog("open")):($("#dialog-error #msg").text("Unknown error"),$("#dialog-error").dialog("open"))})}),$("#dialog-createMask select").selectmenu({width:100})},open:function(){$("#dialog-createMask input[name='name']").val(""),$("#dialog-createMask #accessList :not(.static)").remove()}}),$("#maskControls #create").click(function(){$("#dialog-createMask").dialog("open")}),$("#dialog-createMask #accessList").on("click",".maskRemove",function(){$(this).closest("input.selector+label").prev().remove(),$(this).closest("label").remove()}),$("#dialog-editMask").dialog({autoOpen:!1,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Save:function(){$("#dialog-editMask form").submit()},Cancel:function(){$(this).dialog("close")}},create:function(){$("#dialog-editMask #accessList").on("click",".maskRemove",function(){$(this).closest("input.selector+label").prev().attr("name","deletes[]").hide(),$(this).closest("label").hide()}),$("#dialog-editMask #accessList").on("click","#edit_add+label",function(){$("#dialog-EVEsearch").dialog("open")}),$("#dialog-editMask form").submit(function(a){a.preventDefault(),$.ajax({url:"masks.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){a&&a.result?$("#dialog-editMask").dialog("close"):a&&a.error?($("#dialog-error #msg").text(a.error),$("#dialog-error").dialog("open")):($("#dialog-error #msg").text("Unknown error"),$("#dialog-error").dialog("open"))})})},open:function(){var a=$("#dialog-options input[name='mask']:checked").val();$("#dialog-editMask input[name='mask']").val(a),$("#dialog-editMask #accessList label.static").hide(),$("#dialog-editMask #loading").show(),$("#dialog-editMask #name").text($("#dialog-options input[name='mask']:checked+label .selector_label").text()),$.ajax({url:"masks.php",type:"POST",data:{mode:"edit",mask:a},dataType:"JSON"}).done(function(a){if(a&&a.results){for(var e in a.results){var o=a.results[e],i=$('<input type="checkbox" checked="checked" onclick="return false" name="" id="edit_'+(2==o.type?o.corporationID:o.characterID)+"_"+o.type+'" value="'+(2==o.type?o.corporationID:o.characterID)+"_"+o.type+'" class="selector" /><label for="edit_'+(2==o.type?o.corporationID:o.characterID)+"_"+o.type+'" style="width: 100%; margin-left: -5px;">\t<img src="https://image.eveonline.com/'+(2==o.type?"Corporation/"+o.corporationID+"_64.png":"Character/"+o.characterID+"_64.jpg")+'" />\t<span class="selector_label">'+(2==o.type?"Corporation":"Character")+'</span>\t<div class="info">\t\t'+(2!=o.type?o.characterName+"<br/>":"")+"\t\t"+o.corporationName+"<br/>\t\t"+o.allianceName+'\t\t<input type="button" class="maskRemove" value="Remove" style="position: absolute; bottom: 3px; right: 3px;" />\t</div></label>');$("#dialog-editMask #accessList .static:first").before(i)}$("#dialog-editMask #accessList label.static").show()}}).always(function(){$("#dialog-editMask #loading").hide()})},close:function(){$("#dialog-editMask #accessList :not(.static)").remove()}}),$("#maskControls #edit").click(function(){$("#dialog-editMask").dialog("open")}),$("#dialog-EVEsearch").dialog({autoOpen:!1,dialogClass:"ui-dialog-shadow dialog-noeffect dialog-modal",buttons:{Add:function(){if($("#accessList input[value='"+$("#EVESearchResults input").val()+"']").length)return $("#dialog-error #msg").text("Already has access"),$("#dialog-error").dialog("open"),!1;$("#EVESearchResults .info").append('<input type="button" class="maskRemove" value="Remove" style="position: absolute; bottom: 3px; right: 3px;" />');var a=$("#EVESearchResults").html();$("#dialog-createMask").dialog("isOpen")?$("#dialog-createMask #accessList .static:first").before(a):$("#dialog-editMask").dialog("isOpen")&&$("#dialog-editMask #accessList .static:first").before(a),$(this).dialog("close")},Close:function(){$(this).dialog("close")}},create:function(){$("#EVEsearch").submit(function(a){a.preventDefault(),$("#EVEsearch #searchSpinner").show(),$("#EVEsearch input[type='submit']").attr("disabled","disabled"),$("#dialog-EVEsearch").parent().find(".ui-dialog-buttonpane button:contains('Add')").attr("disabled",!0).addClass("ui-state-disabled"),$.ajax({url:"masks.php",type:"POST",data:$(this).serialize(),dataType:"JSON"}).done(function(a){if(a&&a.results){var e=a.results[0],o=$('<input type="checkbox" checked="checked" onclick="return false" name="adds[]" id="find_'+(2==e.type?e.corporationID:e.characterID)+"_"+e.type+'" value="'+(2==e.type?e.corporationID:e.characterID)+"_"+e.type+'" class="selector" /><label for="find_'+(2==e.type?e.corporationID:e.characterID)+"_"+e.type+'" style="width: 100%; margin-left: -5px;">\t<img src="https://image.eveonline.com/'+(2==e.type?"Corporation/"+e.corporationID+"_64.png":"Character/"+e.characterID+"_64.jpg")+'" />\t<span class="selector_label">'+(2==e.type?"Corporation":"Character")+'</span>\t<div class="info">\t\t'+(2!=e.type?e.characterName+"<br/>":"")+"\t\t"+e.corporationName+"<br/>\t\t"+e.allianceName+"\t</div></label>");$("#EVESearchResults").html(o)}else $("#dialog-error #msg").text("No Results"),$("#dialog-error").dialog("open")}).always(function(){$("#EVEsearch #searchSpinner").hide(),$("#EVEsearch input[type='submit']").removeAttr("disabled"),$("#dialog-EVEsearch").parent().find(".ui-dialog-buttonpane button:contains('Add')").removeAttr("disabled").removeClass("ui-state-disabled")})})},close:function(){$("#EVEsearch input[name='name']").val(""),$("#EVESearchResults").html("")}})}}),$("#dialog-options").dialog("open")});
$("#add-signature").click(function(i){i.preventDefault(),$("#dialog-sigAdd").dialog({autoOpen:!1,resizable:!1,minHeight:150,dialogClass:"dialog-noeffect",buttons:{Add:function(){$("#sigAddForm").submit()},Cancel:function(){$(this).dialog("close")}},open:function(){$("#sigAddForm #sigID").val(""),$("#sigAddForm #sigType").val("Sites").selectmenu("refresh").trigger("selectmenuchange"),$("#sigAddForm #sigLife").val(72).selectmenu("refresh"),$("#sigAddForm #sigName").val(""),$("#sigAddForm #whType").val(""),$("#sigAddForm #connection").val(""),$("#sigAddForm #autoAdd")[0].checked=!1,$("#sigAddForm #autoAdd").button("refresh"),$("#sigAddForm #whLife").val("Stable").selectmenu("refresh"),$("#sigAddForm #whMass").val("Stable").selectmenu("refresh"),tripwire.client.EVE&&tripwire.client.EVE.systemName?$("#autoAdd").button("enable"):$("#autoAdd").button("disable")},close:function(){$("th.critical").removeClass("critical"),ValidationTooltips.close()},create:function(){$("#autoAdd").button().click(function(){$("#sigAddForm #connection").val(tripwire.client.EVE.systemName)}),$("#sigAddForm #sigType, #sigAddForm #sigLife").selectmenu({width:100}),$("#sigAddForm #whLife, #sigAddForm #whMass").selectmenu({width:80}),$("#sigAddForm .sigSystemsAutocomplete").inlinecomplete({source:tripwire.aSigSystems,maxSize:10,delay:0}),$("#sigAddForm .typesAutocomplete").inlinecomplete({source:whList,maxSize:10,delay:0}),$("#sigAddForm #whType, #sigAddForm #sigID").blur(function(i){""==this.value&&(this.value="???")}),$("#sigAddForm #whType, #sigAddForm #sigID").focus(function(i){$(this).select()})}}),$("#dialog-sigAdd").dialog("open")}),$("#sigAddForm").submit(function(i){if(i.preventDefault(),$("#sigAddForm #connection").val($("#sigAddForm #connection").val().trim()),$("th.critical").removeClass("critical"),ValidationTooltips.close(),""==$("#sigAddForm #sigID").val()||3!==$("#sigAddForm #sigID").val().length)return $("#sigAddForm #sigID").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #sigID")}).setContent("Must be 3 Letters in length!");if("???"!==$("#sigAddForm #sigID").val()){for(var e=$("#sigAddForm #sigID").val().length;e--;)if($("#sigAddForm #sigID").val()[e].toLowerCase()===$("#sigAddForm #sigID").val()[e].toUpperCase())return $("#sigAddForm #sigID").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #sigID")}).setContent("Must be only letters!");if(-1!==$.map(tripwire.client.signatures,function(i){return"273.0"!=i.mask||(null==options.chain.active||options.chain.tabs[options.chain.active].evescout)&&null!=options.chain.active?viewingSystemID==i.systemID?i.signatureID:i.sig2ID:null}).indexOf($("#sigAddForm #sigID").val().toUpperCase()))return $("#sigAddForm #sigID").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #sigID")}).setContent("Signature ID already exists!")}if("Wormhole"==$("#sigAddForm #sigType").val()&&""==$("#sigAddForm #whType").val())return $("#sigAddForm #whType").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #whType")}).setContent("Must specify a wormhole type!");if("Wormhole"==$("#sigAddForm #sigType").val()&&-1==whList.indexOf($("#sigAddForm #whType").val()))return $("#sigAddForm #whType").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #whType")}).setContent("Not a valid wormhole type!");if("Wormhole"==$("#sigAddForm #sigType").val()&&$("#sigAddForm #connection").val()&&-1==tripwire.aSigSystems.indexOf($("#sigAddForm #connection").val()))return $("#sigAddForm #connection").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigAddForm #connection")}).setContent("Not a valid leads to system!");var t=$(this).serializeObject();t.systemID=viewingSystemID,t.lifeLength=tripwire.wormholes[t.whType]?tripwire.wormholes[t.whType].life.split(" ")[0]:72,t.class=sigClass(viewingSystem,t.whType),Object.index(tripwire.systems,"name",t.connectionName)&&(t.connectionID=Object.index(tripwire.systems,"name",t.connectionName),t.class2=sigClass(t.connectionName,null),t.connectionName=null);var s={request:{signatures:{add:t}}};$("#sigAddForm input[type=submit]").attr("disabled",!0),$("#dialog-sigAdd").parent().find(":button:contains('Add')").button("disable");tripwire.refresh("refresh",s,function(i){if(1==i.result){$("#dialog-sigAdd").dialog("close"),$("#undo").removeClass("disabled");var e=$.map(i.resultSet,function(e){return i.signatures[e]});viewingSystemID in tripwire.signatures.undo?tripwire.signatures.undo[viewingSystemID].push({action:"add",signatures:e}):tripwire.signatures.undo[viewingSystemID]=[{action:"add",signatures:e}],sessionStorage.setItem("tripwire_undo",JSON.stringify(tripwire.signatures.undo))}},function(i){$("#sigAddForm input[type=submit]").removeAttr("disabled"),$("#dialog-sigAdd").parent().find(":button:contains('Add')").button("enable")})});
$("#add-signature2").click(function(i){i.preventDefault(),$("#dialog-signature").hasClass("ui-dialog-content")?$("#dialog-signature").dialog("isOpen")||$("#dialog-signature").dialog("open"):$("#dialog-signature").dialog({autoOpen:!0,resizable:!1,dialogClass:"dialog-noeffect ui-dialog-shadow",position:{my:"center",at:"center",of:$("#signaturesWidget")},buttons:{Add:function(){$("#form-signature").submit()},Cancel:function(){$(this).dialog("close")}},create:function(){var i=$.map(tripwire.wormholes,function(i,e){return e});i.splice(26,0,"K162"),i.push("GATE"),$("#dialog-signature [name='signatureType'], #dialog-signature [name='signatureLife']").selectmenu({width:100}),$("#dialog-signature [name='wormholeLife'], #dialog-signature [name='wormholeMass']").selectmenu({width:80}),$("#dialog-signature [data-autocomplete='sigSystems']").inlinecomplete({source:tripwire.aSigSystems,maxSize:10,delay:0}),$("#dialog-signature [data-autocomplete='sigType']").inlinecomplete({source:i,maxSize:10,delay:0}),$("#dialog-signature #durationPicker").durationPicker(),$("#dialog-signature [name='signatureID_Alpha'], #dialog-signature [name='signatureID2_Alpha']").on("input",function(){for(;!/^[a-zA-Z?]*$/g.test(this.value);)this.value=this.value.substring(0,this.value.length-1)}),$("#dialog-signature [name='signatureID_Numeric'], #dialog-signature [name='signatureID2_Numeric']").on("input",function(){for(;!/^[0-9?]*$/g.test(this.value);)this.value=this.value.substring(0,this.value.length-1)}),$("#dialog-signature .signatureID, #dialog-signature .wormholeType").on("click",function(){$(this).select()}),$("#dialog-signature .wormholeType").on("input, change",function(){$(this).val().length>0&&-1!=$.inArray($(this).val(),i)&&"K162"!=$(this).val()&&($("#dialog-signature .wormholeType").not(this).val("K162"),$("#dialog-signature #durationPicker").val(60*tripwire.wormholes[$(this).val()].life.substring(0,2)*60).change())}),$("#dialog-signature").on("selectmenuchange","[name='signatureType']",function(){"wormhole"==this.value?($("#dialog-signature #site").slideUp(200,function(){$(this).hide(0)}),$("#dialog-signature #wormhole").slideDown(200,function(){$(this).show(200)})):($("#dialog-signature #site").slideDown(200,function(){$(this).show(200)}),$("#dialog-signature #wormhole").slideUp(200,function(){$(this).hide(0)})),ValidationTooltips.close()}),$("#form-signature").submit(function(e){e.preventDefault();var t=$(this).serializeObject(),a=!0;if(ValidationTooltips.close(),$.each($("#dialog-signature .signatureID:visible"),function(){if($(this).val().length>0&&$(this).val().length<3)return ValidationTooltips.open({target:$(this)}).setContent("Must be 3 characters in length!"),$(this).select(),a=!1,!1}),!a)return!1;if(isNaN(parseInt($("#dialog-signature #durationPicker").val()))||!(parseInt($("#dialog-signature #durationPicker").val())>=300))return ValidationTooltips.open({target:$("#dialog-signature #durationPicker + .bdp-input")}).setContent("Must be at least 5 minutes!"),$("#dialog-signature #durationPicker").select(),!1;if($.each($("#dialog-signature .wormholeType:visible"),function(){if($(this).val().length>0&&-1==$.inArray($(this).val(),i))return ValidationTooltips.open({target:$(this)}).setContent("Must be a valid wormhole type!"),$(this).select(),a=!1,!1}),!a)return!1;if($("#dialog-signature .leadsTo:visible")[0]&&-1==$.inArray($("#dialog-signature .leadsTo:visible:first").val(),tripwire.aSigSystems))return ValidationTooltips.open({target:$("#dialog-signature .leadsTo:visible:first")}).setContent("Must be a valid leads to system!"),$(this).select(),!1;if($.each($("#dialog-signature .leadsTo:visible"),function(){if($(this).val().length>0&&-1==$.inArray($(this).val(),tripwire.aSigSystems))return ValidationTooltips.open({target:$(this)}).setContent("Must be a valid leads to system!"),$(this).select(),a=!1,!1}),!a)return!1;console.log(t);var n={};"wormhole"===t.signatureType||(n={signatures:{add:[{signatureID:t.signatureID_Alpha+t.signatureID_Numeric,systemID:viewingSystemID,type:t.signatureType,name:t.signatureName}]}}),$.ajax({url:"signatures2.php",method:"POST",data:n,dataType:"JSON"}).done(function(i){console.log(i)}).always(function(i){})})},open:function(){$("#dialog-signature input").val(""),$("#dialog-signature [name='signatureType']").val("combat").selectmenu("refresh"),$("#dialog-signature #site").show(),$("#dialog-signature #wormhole").hide(),$("#dialog-signature .sideLabel:first").html(viewingSystem+" Side"),$("#dialog-signature .sideLabel:last").html("Other Side"),$("#dialog-signature #durationPicker").val(60*options.signatures.pasteLife*60).change()},close:function(){ValidationTooltips.close()}})});
function openSigEdit(i){return i.preventDefault(),!$(this).closest("tr").attr("disabled")&&($("#dialog-deleteSig").hasClass("ui-dialog-content")&&$("#dialog-deleteSig").dialog("isOpen")?($("#dialog-deleteSig").parent().effect("shake",300),!1):$("#dialog-sigEdit").hasClass("ui-dialog-content")&&$("#dialog-sigEdit").dialog("isOpen")?($("#dialog-sigEdit").parent().effect("shake",300),!1):($(this).closest("tr").addClass("selected"),void($("#dialog-sigEdit").hasClass("ui-dialog-content")?$("#dialog-sigEdit").dialog("isOpen")||$("#dialog-sigEdit").dialog("open"):$("#dialog-sigEdit").dialog({resizable:!1,minHeight:150,dialogClass:"ui-dialog-shadow dialog-noeffect",buttons:{Save:function(){$("#sigEditForm").submit()},Cancel:function(){$(this).dialog("close")}},open:function(){var i=$("#sigTable tr.selected").data("id");$("#sigEditForm").data("id",i);var e=tripwire.client.signatures[i];tripwire.activity.editSig=i,tripwire.refresh("refresh"),$("#autoEdit")[0].checked=!1,$("#autoEdit").button("refresh"),e.life||e.mass?(e.systemID==viewingSystemID?($("#dialog-sigEdit #sigID").val(e.signatureID),$("#dialog-sigEdit #sigType").val("Wormhole").selectmenu("refresh").trigger("selectmenuchange"),$("#dialog-sigEdit #whType").val(e.type),$("#dialog-sigEdit #connection").val(tripwire.systems[e.connectionID]?tripwire.systems[e.connectionID].name:e.connection),$("#dialog-sigEdit #whLife").val(e.life).selectmenu("refresh"),$("#dialog-sigEdit #whMass").val(e.mass).selectmenu("refresh"),$("#dialog-sigEdit [name=side]").val("parent")):($("#dialog-sigEdit #sigID").val(e.sig2ID),$("#dialog-sigEdit #sigType").val("Wormhole").selectmenu("refresh").trigger("selectmenuchange"),$("#dialog-sigEdit #whType").val(e.sig2Type),$("#dialog-sigEdit #connection").val(tripwire.systems[e.systemID]?tripwire.systems[e.systemID].name:e.system),$("#dialog-sigEdit #whLife").val(e.life).selectmenu("refresh"),$("#dialog-sigEdit #whMass").val(e.mass).selectmenu("refresh"),$("#dialog-sigEdit [name=side]").val("child")),$("#dialog-sigEdit #sigLife").val(72).selectmenu("refresh"),$("#dialog-sigEdit #sigName").val("")):($("#dialog-sigEdit #sigID").val(e.signatureID),$("#dialog-sigEdit #sigType").val("???"==e.type?"Sites":e.type).selectmenu("refresh").trigger("selectmenuchange"),$("#dialog-sigEdit #sigLife").val(e.lifeLength).selectmenu("refresh"),$("#dialog-sigEdit #sigName").val(e.name),$("#dialog-sigEdit #whType").val(""),$("#dialog-sigEdit #connection").val(""),$("#dialog-sigEdit #whLife").val("Stable").selectmenu("refresh"),$("#dialog-sigEdit #whMass").val("Stable").selectmenu("refresh"),$("#dialog-sigEdit [name=side]").val("parent")),tripwire.client.EVE&&tripwire.client.EVE.systemName?$("#autoEdit").button("enable"):$("#autoEdit").button("disable"),$("#dialog-sigEdit #sigID").select()},close:function(i,e){delete tripwire.activity.editSig,tripwire.refresh("refresh"),$(this).data("id",""),$("th.critical").removeClass("critical"),ValidationTooltips.close(),$("#sigTable tr.selected").removeClass("selected")},create:function(){$("#autoEdit").button().click(function(){$("#sigEditForm #connection").val(tripwire.client.EVE.systemName)}),$("#sigEditForm #sigType, #sigEditForm #sigLife").selectmenu({width:100}),$("#sigEditForm #whLife, #sigEditForm #whMass").selectmenu({width:80}),$("#sigEditForm .sigSystemsAutocomplete").inlinecomplete({source:tripwire.aSigSystems,maxSize:10,delay:0}),$("#sigEditForm .typesAutocomplete").inlinecomplete({source:whList,maxSize:10,delay:0}),$("#sigEditForm #whType, #sigEditForm #sigID").blur(function(i){""==this.value&&(this.value="???")}),$("#sigEditForm #whType, #sigEditForm #sigID").focus(function(i){$(this).select()})}}))))}$("#sigTable").on("click",".sigEdit",openSigEdit),$("#sigTable tbody").on("dblclick","tr",openSigEdit),$("#sigEditForm").submit(function(i){if(i.preventDefault(),$("#sigEditForm #connection").val($("#sigEditForm #connection").val().trim()),$("th.critical").removeClass("critical"),ValidationTooltips.close(),""==$("#sigEditForm #sigID").val()||3!==$("#sigEditForm #sigID").val().length)return $("#sigEditForm #sigID").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigEditForm #sigID")}).setContent("Must be 3 letters in length!");if("???"!==$("#sigEditForm #sigID").val()){for(var e=$("#sigEditForm #sigID").val().length;e--;)if($("#sigEditForm #sigID").val()[e].toLowerCase()===$("#sigEditForm #sigID").val()[e].toUpperCase())return $("#sigEditForm #sigID").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigEditForm #sigID")}).setContent("Must be only letters!");if($("#sigEditForm #sigID").val().toUpperCase()!==(viewingSystemID==tripwire.client.signatures[$(this).data("id")].systemID?tripwire.client.signatures[$(this).data("id")].signatureID:tripwire.client.signatures[$(this).data("id")].sig2ID)&&-1!==$.map(tripwire.client.signatures,function(i){return"273.0"!=i.mask||(null==options.chain.active||options.chain.tabs[options.chain.active].evescout)&&null!=options.chain.active?viewingSystemID==i.systemID?i.signatureID:i.sig2ID:null}).indexOf($("#sigEditForm #sigID").val().toUpperCase()))return $("#sigEditForm #sigID").focus().parent().prev("th").addClass("critical"),ValidationTooltips.open({target:$("#sigEditForm #sigID")}).setContent("Signature ID already exists! <input type='button' autofocus='true' id='overwrite' value='Overwrite' style='margin-bottom: -4px; margin-top: -4px; font-size: 0.8em;' data-id='"+$("#sigTable tr:has(td:first-child:contains("+$("#sigEditForm #sigID").val().toUpperCase()+"))").data("id")+"' />"),void $("#overwrite").focus()}if("Wormhole"==$("#sigEditForm #sigType").val()&&""==$("#sigEditForm #whType").val())return $("#sigEditForm #whType").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigEditForm #whType")}).setContent("Must specify a wormhole type!");if("Wormhole"==$("#sigEditForm #sigType").val()&&-1==whList.indexOf($("#sigEditForm #whType").val()))return $("#sigEditForm #whType").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigEditForm #whType")}).setContent("Not a valid wormhole type!");if("Wormhole"==$("#sigEditForm #sigType").val()&&$("#sigEditForm #connection").val()&&-1==tripwire.aSigSystems.indexOf($("#sigEditForm #connection").val()))return $("#sigEditForm #connection").focus().parent().prev("th").addClass("critical"),void ValidationTooltips.open({target:$("#sigEditForm #connection")}).setContent("Not a valid leads to system!");var t=$(this).serializeObject();t.id=$(this).data("id"),t.systemID=viewingSystemID,tripwire.wormholes[t.whType]?t.lifeLength=tripwire.wormholes[t.whType].life.split(" ")[0]:"parent"==t.side?t.lifeLength=tripwire.wormholes[tripwire.client.signatures[t.id].sig2Type]?tripwire.wormholes[tripwire.client.signatures[t.id].sig2Type].life.split(" ")[0]:t.lifeLength:t.lifeLength=tripwire.wormholes[tripwire.client.signatures[t.id].type]?tripwire.wormholes[tripwire.client.signatures[t.id].type].life.split(" ")[0]:t.lifeLength,t.connectionID=t.connectionName?Object.index(tripwire.systems,"name",t.connectionName)||null:null,t.connectionName=t.connectionID?"parent"==t.side?tripwire.client.signatures[t.id].connectionID>0?tripwire.client.signatures[t.id].connection:null:tripwire.client.signatures[t.id].systemID>0?tripwire.client.signatures[t.id].system:null:t.connectionName,t.whLife=tripwire.client.signatures[t.id].life!=t.whLife?t.whLife:null,t.whLife=tripwire.client.signatures[t.id].life?t.whLife:"New "+t.whLife,t.sig2ID="parent"==t.side?tripwire.client.signatures[t.id].sig2ID:tripwire.client.signatures[t.id].signatureID,t.sig2Type="parent"==t.side?tripwire.client.signatures[t.id].sig2Type:tripwire.client.signatures[t.id].type,t.class=sigClass(viewingSystem,t.sig2Type),t.class2=sigClass(t.connectionID?tripwire.systems[t.connectionID].name:null,t.whType);var s={request:{signatures:{update:t}}},a=[tripwire.client.signatures[t.id]];$("#sigEditForm input[type=submit]").attr("disabled",!0),$("#dialog-sigEdit").parent().find(":button:contains('Save')").button("disable");tripwire.refresh("refresh",s,function(i){1==i.result&&($("#dialog-sigEdit").dialog("close"),$("#undo").removeClass("disabled"),viewingSystemID in tripwire.signatures.undo?tripwire.signatures.undo[viewingSystemID].push({action:"update",signatures:a}):tripwire.signatures.undo[viewingSystemID]=[{action:"update",signatures:a}],sessionStorage.setItem("tripwire_undo",JSON.stringify(tripwire.signatures.undo)))},function(i){$("#sigEditForm input[type=submit]").removeAttr("disabled"),$("#dialog-sigEdit").parent().find(":button:contains('Save')").button("enable")})});
//# sourceMappingURL=app.min.js.map
